"use strict";(self.webpackChunkProyectoFinal=self.webpackChunkProyectoFinal||[]).push([[179],{58:(ws,Zn,We)=>{We.d(Zn,{BH:()=>Ut,G6:()=>ns,L:()=>at,LL:()=>H,Pz:()=>bt,Sg:()=>Fr,UG:()=>X,ZB:()=>Te,ZR:()=>ne,aH:()=>zt,b$:()=>Pn,eu:()=>$,hl:()=>U,jU:()=>en,m9:()=>_a,ne:()=>Ts,pd:()=>Nu,r3:()=>Ir,ru:()=>qt,tV:()=>te,uI:()=>Vn,vZ:()=>Cs,w1:()=>ts,xO:()=>xu,xb:()=>ti,z$:()=>Je,zd:()=>Oi});const Le=function(D){const T=[];let A=0;for(let K=0;K<D.length;K++){let M=D.charCodeAt(K);M<128?T[A++]=M:M<2048?(T[A++]=M>>6|192,T[A++]=63&M|128):55296==(64512&M)&&K+1<D.length&&56320==(64512&D.charCodeAt(K+1))?(M=65536+((1023&M)<<10)+(1023&D.charCodeAt(++K)),T[A++]=M>>18|240,T[A++]=M>>12&63|128,T[A++]=M>>6&63|128,T[A++]=63&M|128):(T[A++]=M>>12|224,T[A++]=M>>6&63|128,T[A++]=63&M|128)}return T},Xt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,T){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let M=0;M<D.length;M+=3){const q=D[M],Ue=M+1<D.length,Xe=Ue?D[M+1]:0,dt=M+2<D.length,nn=dt?D[M+2]:0;let er=(15&Xe)<<2|nn>>6,Ot=63&nn;dt||(Ot=64,Ue||(er=64)),K.push(A[q>>2],A[(3&q)<<4|Xe>>4],A[er],A[Ot])}return K.join("")},encodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(D):this.encodeByteArray(Le(D),T)},decodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(D):function(D){const T=[];let A=0,K=0;for(;A<D.length;){const M=D[A++];if(M<128)T[K++]=String.fromCharCode(M);else if(M>191&&M<224){const q=D[A++];T[K++]=String.fromCharCode((31&M)<<6|63&q)}else if(M>239&&M<365){const dt=((7&M)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;T[K++]=String.fromCharCode(55296+(dt>>10)),T[K++]=String.fromCharCode(56320+(1023&dt))}else{const q=D[A++],Ue=D[A++];T[K++]=String.fromCharCode((15&M)<<12|(63&q)<<6|63&Ue)}}return T.join("")}(this.decodeStringToByteArray(D,T))},decodeStringToByteArray(D,T){this.init_();const A=T?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let M=0;M<D.length;){const q=A[D.charAt(M++)],Xe=M<D.length?A[D.charAt(M)]:0;++M;const nn=M<D.length?A[D.charAt(M)]:64;++M;const be=M<D.length?A[D.charAt(M)]:64;if(++M,null==q||null==Xe||null==nn||null==be)throw new dn;K.push(q<<2|Xe>>4),64!==nn&&(K.push(Xe<<4&240|nn>>2),64!==be&&K.push(nn<<6&192|be))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(D){return function(D){const T=Le(D);return Xt.encodeByteArray(T,!0)}(D).replace(/\./g,"")},te=function(D){try{return Xt.decodeString(D,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Te(D,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return T}for(const A in T)!T.hasOwnProperty(A)||!st(A)||(D[A]=Te(D[A],T[A]));return D}function st(D){return"__proto__"!==D}const Ye=()=>{try{return function wt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=D&&te(D[1]);return T&&JSON.parse(T)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},zt=()=>{var D;return null===(D=Ye())||void 0===D?void 0:D.config},bt=D=>{var T;return null===(T=Ye())||void 0===T?void 0:T[`_${D}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,A)=>{this.resolve=T,this.reject=A})}wrapCallback(T){return(A,K)=>{A?this.reject(A):this.resolve(K),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(A):T(A,K))}}}function Fr(D,T){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=T||"demo-project",M=D.iat||0,q=D.sub||D.user_id;if(!q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:M,exp:M+3600,auth_time:M,sub:q,user_id:q,firebase:{sign_in_provider:"custom",identities:{}}},D);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(Ue)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Vn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function X(){var D;const T=null===(D=Ye())||void 0===D?void 0:D.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function en(){return"object"==typeof self&&self.self===self}function qt(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ts(){const D=Je();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function ns(){return!X()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((D,T)=>{try{let A=!0;const K="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(K);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(K),D(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var q;T((null===(q=M.error)||void 0===q?void 0:q.message)||"")}}catch(A){T(A)}})}class ne extends Error{constructor(T,A,K){super(A),this.code=T,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,H.prototype.create)}}class H{constructor(T,A,K){this.service=T,this.serviceName=A,this.errors=K}create(T,...A){const K=A[0]||{},M=`${this.service}/${T}`,q=this.errors[T],Ue=q?function _e(D,T){return D.replace(ft,(A,K)=>{const M=T[K];return null!=M?String(M):`<${K}?>`})}(q,K):"Error";return new ne(M,`${this.serviceName}: ${Ue} (${M}).`,K)}}const ft=/\{\$([^}]+)}/g;function Ir(D,T){return Object.prototype.hasOwnProperty.call(D,T)}function ti(D){for(const T in D)if(Object.prototype.hasOwnProperty.call(D,T))return!1;return!0}function Cs(D,T){if(D===T)return!0;const A=Object.keys(D),K=Object.keys(T);for(const M of A){if(!K.includes(M))return!1;const q=D[M],Ue=T[M];if(hn(q)&&hn(Ue)){if(!Cs(q,Ue))return!1}else if(q!==Ue)return!1}for(const M of K)if(!A.includes(M))return!1;return!0}function hn(D){return null!==D&&"object"==typeof D}function xu(D){const T=[];for(const[A,K]of Object.entries(D))Array.isArray(K)?K.forEach(M=>{T.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):T.push(encodeURIComponent(A)+"="+encodeURIComponent(K));return T.length?"&"+T.join("&"):""}function Oi(D){const T={};return D.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[M,q]=K.split("=");T[decodeURIComponent(M)]=decodeURIComponent(q)}}),T}function Nu(D){const T=D.indexOf("?");if(!T)return"";const A=D.indexOf("#",T);return D.substring(T,A>0?A:void 0)}function Ts(D,T){const A=new Ls(D,T);return A.subscribe.bind(A)}class Ls{constructor(T,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{T(this)}).catch(K=>{this.error(K)})}next(T){this.forEachObserver(A=>{A.next(T)})}error(T){this.forEachObserver(A=>{A.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,A,K){let M;if(void 0===T&&void 0===A&&void 0===K)throw new Error("Missing Observer.");M=function Ao(D,T){if("object"!=typeof D||null===D)return!1;for(const A of T)if(A in D&&"function"==typeof D[A])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:A,complete:K},void 0===M.next&&(M.next=Bt),void 0===M.error&&(M.error=Bt),void 0===M.complete&&(M.complete=Bt);const q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),q}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,T)}sendOne(T,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{A(this.observers[T])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bt(){}function _a(D){return D&&D._delegate?D._delegate:D}},282:(ws,Zn,We)=>{function I(n){return"function"==typeof n}function Fe(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const z=Fe(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Le(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class It{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof z?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Qn(s)}catch(o){e=e??[],o instanceof z?e=[...e,...o.errors]:e.push(o)}}if(e)throw new z(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qn(e);else{if(e instanceof It){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Le(t,e)}remove(e){const{_finalizers:t}=this;t&&Le(t,e),e instanceof It&&e._removeParent(this)}}It.EMPTY=(()=>{const n=new It;return n.closed=!0,n})();const Xt=It.EMPTY;function dn(n){return n instanceof It||n&&"closed"in n&&I(n.remove)&&I(n.add)&&I(n.unsubscribe)}function Qn(n){I(n)?n():n.unsubscribe()}const at={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(n,e,...t){const{delegate:r}=te;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=te;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ae(n){te.setTimeout(()=>{const{onUnhandledError:e}=at;if(!e)throw n;e(n)})}function Te(){}const st=Tt("C",void 0,void 0);function Tt(n,e,t){return{kind:n,value:e,error:t}}let je=null;function Ye(n){if(at.useDeprecatedSynchronousErrorHandling){const e=!je;if(e&&(je={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=je;if(je=null,t)throw r}}else n()}class Xn extends It{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dn(e)&&e.add(this)):this.destination=en}static create(e,t,r){return new Fr(e,t,r)}next(e){this.isStopped?X(function Yn(n){return Tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?X(function wt(n){return Tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?X(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zt=Function.prototype.bind;function bt(n,e){return zt.call(n,e)}class Ut{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Je(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Je(r)}else Je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Je(t)}}}class Fr extends Xn{constructor(e,t,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&at.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bt(e.next,s),error:e.error&&bt(e.error,s),complete:e.complete&&bt(e.complete,s)}):i=e}this.destination=new Ut(i)}}function Je(n){at.useDeprecatedSynchronousErrorHandling?function Jn(n){at.useDeprecatedSynchronousErrorHandling&&je&&(je.errorThrown=!0,je.error=n)}(n):ae(n)}function X(n,e){const{onStoppedNotification:t}=at;t&&te.setTimeout(()=>t(n,e))}const en={closed:!0,next:Te,error:function Vn(n){throw n},complete:Te},qt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pn(n){return n}function ts(n){return 0===n.length?Pn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let nt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function U(n){return n&&n instanceof Xn||function ns(n){return n&&I(n.next)&&I(n.error)&&I(n.complete)}(n)&&dn(n)}(t)?t:new Fr(t,r,i);return Ye(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Do(r))((i,s)=>{const o=new Fr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[qt](){return this}pipe(...t){return ts(t)(this)}toPromise(t){return new(t=Do(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Do(n){var e;return null!==(e=n??at.Promise)&&void 0!==e?e:Promise}const $=Fe(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class n extends nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Z(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $}next(t){Ye(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ye(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ye(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Xt:(this.currentObservers=null,s.push(t),new It(()=>{this.currentObservers=null,Le(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new nt;return t.source=this,t}}return n.create=(e,t)=>new Z(e,t),n})();class Z extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Xt}}function ne(n){return I(n?.lift)}function H(n){return e=>{if(ne(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new ft(n,e,t,r,i)}class ft extends Xn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ve(n,e){return H((t,r)=>{let i=0;t.subscribe(_e(r,s=>{r.next(n.call(e,s,i++))}))})}var Ae=We(582);const gt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function tn(n){return I(n?.then)}function $t(n){return I(n[qt])}function ur(n){return Symbol.asyncIterator&&I(n?.[Symbol.asyncIterator])}function Ln(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vr=function Ir(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ti(n){return I(n?.[Vr])}function Mu(n){return(0,Ae.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ae.qq)(t.read());if(i)return yield(0,Ae.qq)(void 0);yield yield(0,Ae.qq)(r)}}finally{t.releaseLock()}})}function Cs(n){return I(n?.getReader)}function hn(n){if(n instanceof nt)return n;if(null!=n){if($t(n))return function ha(n){return new nt(e=>{const t=n[qt]();if(I(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(gt(n))return function xu(n){return new nt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(tn(n))return function Oi(n){return new nt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ae)})}(n);if(ur(n))return Lr(n);if(ti(n))return function Nu(n){return new nt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Cs(n))return function Ts(n){return Lr(Mu(n))}(n)}throw Ln(n)}function Lr(n){return new nt(e=>{(function Ls(n,e){var t,r,i,s;return(0,Ae.mG)(this,void 0,void 0,function*(){try{for(t=(0,Ae.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function cr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Bt(n,e,t=1/0){return I(e)?Bt((r,i)=>ve((s,o)=>e(r,s,i,o))(hn(n(r,i))),t):("number"==typeof e&&(t=e),H((r,i)=>function Ao(n,e,t,r,i,s,o,a){const u=[];let l=0,f=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=w=>l<r?E(w):u.push(w),E=w=>{s&&e.next(w),l++;let C=!1;hn(t(w,f++)).subscribe(_e(e,R=>{i?.(R),s?y(R):e.next(R)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;u.length&&l<r;){const R=u.shift();o?cr(e,o,()=>E(R)):E(R)}m()}catch(R){e.error(R)}}))};return n.subscribe(_e(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function ki(n=1/0){return Bt(Pn,n)}const Un=new nt(n=>n.complete());function ni(n){return n&&I(n.schedule)}function Us(n){return n[n.length-1]}function pa(n){return I(Us(n))?n.pop():void 0}function Bs(n){return ni(Us(n))?n.pop():void 0}function wr(n,e=0){return H((t,r)=>{t.subscribe(_e(r,i=>cr(r,n,()=>r.next(i),e),()=>cr(r,n,()=>r.complete(),e),i=>cr(r,n,()=>r.error(i),e)))})}function Ur(n,e=0){return H((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _a(n,e){if(!n)throw new Error("Iterable cannot be null");return new nt(t=>{cr(t,e,()=>{const r=n[Symbol.asyncIterator]();cr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function A(n,e){return e?function T(n,e){if(null!=n){if($t(n))return function js(n,e){return hn(n).pipe(Ur(e),wr(e))}(n,e);if(gt(n))return function ul(n,e){return new nt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(tn(n))return function ma(n,e){return hn(n).pipe(Ur(e),wr(e))}(n,e);if(ur(n))return _a(n,e);if(ti(n))return function Ou(n,e){return new nt(t=>{let r;return cr(t,e,()=>{r=n[Vr](),cr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(n,e);if(Cs(n))return function D(n,e){return _a(Mu(n),e)}(n,e)}throw Ln(n)}(n,e):hn(n)}function K(...n){const e=Bs(n),t=function ga(n,e){return"number"==typeof Us(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?hn(r[0]):ki(t)(A(r,e)):Un}class M extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function q(...n){return A(n,Bs(n))}function Ue(n={}){const{connector:e=(()=>new j),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,f=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,f=g=!1},E=()=>{const w=o;y(),w?.unsubscribe()};return H((w,C)=>{l++,!g&&!f&&m();const R=u=u??e();C.add(()=>{l--,0===l&&!g&&!f&&(a=Xe(E,i))}),R.subscribe(C),!o&&l>0&&(o=new Fr({next:P=>R.next(P),error:P=>{g=!0,m(),a=Xe(y,t,P),R.error(P)},complete:()=>{f=!0,m(),a=Xe(y,r),R.complete()}}),hn(w).subscribe(o))})(s)}}function Xe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Fr({next:()=>{r.unsubscribe(),n()}});return hn(e(...t)).subscribe(r)}function dt(n,e){return H((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(_e(r,u=>{i?.unsubscribe();let l=0;const f=s++;hn(n(u,f)).subscribe(i=_e(r,g=>r.next(e?e(u,g,f,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nn(n,e=Pn){return n=n??Bn,H((t,r)=>{let i,s=!0;t.subscribe(_e(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Bn(n,e){return n===e}function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function er(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function rs(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const cl=be({__forward_ref__:be});function F(n){return n.__forward_ref__=F,n.toString=function(){return Ot(this())},n}function S(n){return ie(n)?n():n}function ie(n){return"function"==typeof n&&n.hasOwnProperty(cl)&&n.__forward_ref__===F}function Ee(n){return n&&!!n.\u0275providers}const ut="https://g.co/ng/security#xss";class N extends Error{constructor(e,t){super(function fn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function ku(n,e){throw new N(-201,!1)}function vi(n,e){null==n&&function Oe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rn(n){return{providers:n.providers||[],imports:n.imports||[]}}function hl(n){return Kh(n,Fu)||Kh(n,So)}function Kh(n,e){return n.hasOwnProperty(e)?n[e]:null}function fl(n){return n&&(n.hasOwnProperty(Zh)||n.hasOwnProperty(Jm))?n[Zh]:null}const Fu=be({\u0275prov:be}),Zh=be({\u0275inj:be}),So=be({ngInjectableDef:be}),Jm=be({ngInjectorDef:be});var rt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(rt||{});let Qh;function Br(n){const e=Qh;return Qh=n,e}function gl(n,e,t){const r=hl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&rt.Optional?null:void 0!==e?e:void ku(Ot(n))}const Rt=globalThis;class ue{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Lu={},Uu="__NG_DI_FLAG__",Hs="ngTempTokenPath",tf=/\n/gm,Fi="__source";let va;function zs(n){const e=va;return va=n,e}function rf(n,e=rt.Default){if(void 0===va)throw new N(-203,!1);return null===va?gl(n,void 0,e):va.get(n,e&rt.Optional?null:void 0,e)}function ee(n,e=rt.Default){return(function pl(){return Qh}()||rf)(S(n),e)}function pe(n,e=rt.Default){return ee(n,yl(e))}function yl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Bu(n){const e=[];for(let t=0;t<n.length;t++){const r=S(n[t]);if(Array.isArray(r)){if(0===r.length)throw new N(900,!1);let i,s=rt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=sw(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ee(i,s))}else e.push(ee(r))}return e}function Vi(n,e){return n[Uu]=e,n.prototype[Uu]=e,n}function sw(n){return n[Uu]}function qs(n){return{toString:n}.toString()}var Ea=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ea||{}),wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wn||{});const Cr={},ct=[],$u=be({\u0275cmp:be}),vl=be({\u0275dir:be}),El=be({\u0275pipe:be}),r_=be({\u0275mod:be}),jr=be({\u0275fac:be}),Hu=be({__NG_ELEMENT_ID__:be}),zu=be({__NG_ENV_ID__:be});function sf(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Il(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ii(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function wl(n){return 3===n||4===n||6===n}function ii(n){return 64===n.charCodeAt(0)}function Ia(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||i_(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function i_(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Cl="ng-template";function Tl(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==sf(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function af(n){return 4===n.type&&n.value!==Cl}function s_(n,e,t){return e===(4!==n.type||t?n.value:Cl)}function aw(n,e,t){let r=4;const i=n.attrs||[],s=function cf(n){for(let e=0;e<n.length;e++)if(wl(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!s_(n,u,t)||""===u&&1===e.length){if(si(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Tl(n.attrs,l,t)){if(si(r))return!1;o=!0}continue}const g=uf(8&r?"class":u,i,af(n),t);if(-1===g){if(si(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==sf(y,l,0)||2&r&&l!==m){if(si(r))return!1;o=!0}}}}else{if(!o&&!si(r)&&!si(u))return!1;if(o&&si(u))continue;o=!1,r=u|1&r}}return si(r)||o}function si(n){return 0==(1&n)}function uf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function o_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function bl(n,e,t=!1){for(let r=0;r<e.length;r++)if(aw(n,e[r],t))return!0;return!1}function df(n,e){return n?":not("+e.trim()+")":e}function hf(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!si(o)&&(e+=df(s,i),i=""),r=o,s=s||!si(r);t++}return""!==i&&(e+=df(s,i)),e}function Tr(n){return qs(()=>{const e=c_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ea.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wn.Emulated,styles:n.styles||ct,_:null,schemas:n.schemas||null,tView:null,id:""};Sl(t);const r=n.dependencies;return t.directiveDefs=Pl(r,!1),t.pipeDefs=Pl(r,!0),t.id=function uw(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function a_(n){return ht(n)||Mn(n)}function gf(n){return null!==n}function lr(n){return qs(()=>({type:n.type,bootstrap:n.bootstrap||ct,declarations:n.declarations||ct,imports:n.imports||ct,exports:n.exports||ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function u_(n,e){if(null==n)return Cr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function ke(n){return qs(()=>{const e=c_(n);return Sl(e),e})}function jn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ht(n){return n[$u]||null}function Mn(n){return n[vl]||null}function $n(n){return n[El]||null}function br(n,e){const t=n[r_]||null;if(!t&&!0===e)throw new Error(`Type ${Ot(n)} does not have '\u0275mod' property.`);return t}function c_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Cr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:u_(n.inputs,e),outputs:u_(n.outputs)}}function Sl(n){n.features?.forEach(e=>e(n))}function Pl(n,e){if(!n)return null;const t=e?$n:a_;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(gf)}const Wt=0,ge=1,He=2,Kt=3,oi=4,qu=5,Hn=6,wa=7,_n=8,is=9,Ca=10,ze=11,Po=12,l_=13,Ws=14,yn=15,Ro=16,Ta=17,Ei=18,Gu=19,Rl=20,Ks=21,Li=22,Wu=23,Mo=24,lt=25,Ml=1,xl=2,ss=7,xo=9,tr=11;function $r(n){return Array.isArray(n)&&"object"==typeof n[Ml]}function Dr(n){return Array.isArray(n)&&!0===n[Ml]}function d_(n){return 0!=(4&n.flags)}function ba(n){return n.componentOffset>-1}function yf(n){return 1==(1&n.flags)}function ai(n){return!!n.template}function vf(n){return 0!=(512&n[He])}function No(n,e){return n.hasOwnProperty(jr)?n[jr]:null}let dr=null,Ui=!1;function Ii(n){const e=dr;return dr=n,e}const m_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function __(n){if(!Qs(n)||n.dirty){if(!n.producerMustRecompute(n)&&!y_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Ol(n){n.dirty=!0,function vn(n){if(void 0===n.liveConsumerNode)return;const e=Ui;Ui=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ol(t)}finally{Ui=e}}(n),n.consumerMarkedDirty?.(n)}function Cf(n){return n&&(n.nextProducerIndex=0),Ii(n)}function Zu(n,e){if(Ii(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Qs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)kl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function y_(n){Oo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(__(t),r!==t.version))return!0}return!1}function v_(n){if(Oo(n),Qs(n))for(let e=0;e<n.producerNode.length;e++)kl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function kl(n,e){if(function Sa(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Oo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)kl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Oo(i),i.producerIndexOfThis[r]=e}}function Qs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Oo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Fl=null;const b_=()=>{},Sf=(()=>({...m_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:b_}))();class mw{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function wi(){return D_}function D_(n){return n.type.prototype.ngOnChanges&&(n.setInput=_w),A_}function A_(){const n=P_(this),e=n?.current;if(e){const t=n.previous;if(t===Cr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _w(n,e,t,r){const i=this.declaredInputs[t],s=P_(n)||function Pf(n,e){return n[S_]=e}(n,{previous:Cr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new mw(u&&u.currentValue,e,a===Cr),n[r]=e}wi.ngInherit=!0;const S_="__ngSimpleChanges__";function P_(n){return n[S_]||null}const os=function(n,e,t){};function Mt(n){for(;Array.isArray(n);)n=n[Wt];return n}function Ra(n,e){return Mt(e[n])}function Hr(n,e){return Mt(e[n.index])}function Ma(n,e){return n.data[e]}function Ci(n,e){return n[e]}function Ar(n,e){const t=e[n];return $r(t)?t:t[Wt]}function as(n,e){return null==e?null:n[e]}function Nf(n){n[Ta]=0}function Iw(n){1024&n[He]||(n[He]|=1024,Bl(n,1))}function M_(n){1024&n[He]&&(n[He]&=-1025,Bl(n,-1))}function Bl(n,e){let t=n[Kt];if(null===t)return;t[qu]+=e;let r=t;for(t=t[Kt];null!==t&&(1===e&&1===r[qu]||-1===e&&0===r[qu]);)t[qu]+=e,r=t,t=t[Kt]}const Ve={lFrame:$_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function O_(){return Ve.bindingsEnabled}function re(){return Ve.lFrame.lView}function mt(){return Ve.lFrame.tView}function hr(n){return Ve.lFrame.contextLView=n,n[_n]}function zn(n){return Ve.lFrame.contextLView=null,n}function nr(){let n=F_();for(;null!==n&&64===n.type;)n=n.parent;return n}function F_(){return Ve.lFrame.currentTNode}function us(n,e){const t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function Lf(){return Ve.lFrame.isParent}function Ju(){Ve.lFrame.isParent=!1}function rr(){const n=Ve.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function xa(){return Ve.lFrame.bindingIndex++}function ls(n){const e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Dw(n,e){const t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,ec(e)}function ec(n){Ve.lFrame.currentDirectiveIndex=n}function Bf(n){const e=Ve.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function jf(n){Ve.lFrame.currentQueryIndex=n}function $f(n){const e=n[ge];return 2===e.type?e.declTNode:1===e.type?n[Hn]:null}function j_(n,e,t){if(t&rt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&rt.Host||(i=$f(s),null===i||(s=s[Ws],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ve.lFrame=zf();return r.currentTNode=e,r.lView=n,!0}function Hf(n){const e=zf(),t=n[ge];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zf(){const n=Ve.lFrame,e=null===n?null:n.child;return null===e?$_(n):e}function $_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function tc(){const n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const H_=tc;function qf(){const n=tc();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Sr(){return Ve.lFrame.selectedIndex}function Fo(n){Ve.lFrame.selectedIndex=n}function rn(){const n=Ve.lFrame;return Ma(n.tView,n.selectedIndex)}let q_=!0;function Hl(){return q_}function As(n){q_=n}function zl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function ql(n,e,t){Wl(n,e,3,t)}function Gl(n,e,t,r){(3&n[He])===t&&Wl(n,e,t,r)}function Wf(n,e){let t=n[He];(3&t)===e&&(t&=8191,t+=1,n[He]=t)}function Wl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ta]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ta]+=65536),(a<s||-1==s)&&(Nw(n,t,e,u),n[Ta]=(4294901760&n[Ta])+u+2),u++}function Kl(n,e){os(4,n,e);const t=Ii(null);try{e.call(n)}finally{Ii(t),os(5,n,e)}}function Nw(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[He]>>13<n[Ta]>>16&&(3&n[He])===e&&(n[He]+=8192,Kl(a,s)):Kl(a,s)}const Js=-1;class nc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Zl(n){return n!==Js}function Na(n){return 32767&n}function ic(n,e){let t=function kw(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ws],t--;return r}let Qf=!0;function Ql(n){const e=Qf;return Qf=n,e}const Yf=255,W_=5;let NP=0;const ds={};function Yl(n,e){const t=Jl(n,e);if(-1!==t)return t;const r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Jf(r.data,n),Jf(e,null),Jf(r.blueprint,null));const i=Xl(n,e),s=n.injectorIndex;if(Zl(i)){const o=Na(i),a=ic(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Jf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Jl(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Xl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=X_(i),null===r)return Js;if(t++,i=i[Ws],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Js}function sc(n,e,t){!function Vo(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hu)&&(r=t[Hu]),null==r&&(r=t[Hu]=NP++);const i=r&Yf;e.data[n+(i>>W_)]|=1<<i}(n,e,t)}function K_(n,e,t){if(t&rt.Optional||void 0!==n)return n;ku()}function ed(n,e,t,r){if(t&rt.Optional&&void 0===r&&(r=null),!(t&(rt.Self|rt.Host))){const i=n[is],s=Br(void 0);try{return i?i.get(e,r,t&rt.Optional):gl(e,r,t&rt.Optional)}finally{Br(s)}}return K_(r,0,t)}function Z_(n,e,t,r=rt.Default,i){if(null!==n){if(2048&e[He]&&!(r&rt.Self)){const o=function Uw(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[He]&&!(512&o[He]);){const a=Q_(s,o,t,r|rt.Self,ds);if(a!==ds)return a;let u=s.parent;if(!u){const l=o[Rl];if(l){const f=l.get(t,ds,r);if(f!==ds)return f}u=X_(o),o=o[Ws]}s=u}return i}(n,e,t,r,ds);if(o!==ds)return o}const s=Q_(n,e,t,r,ds);if(s!==ds)return s}return ed(e,t,r,i)}function Q_(n,e,t,r,i){const s=function Vw(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Hu)?n[Hu]:void 0;return"number"==typeof e?e>=0?e&Yf:Lw:e}(t);if("function"==typeof s){if(!j_(e,n,r))return r&rt.Host?K_(i,0,r):ed(e,t,r,i);try{let o;if(o=s(r),null!=o||r&rt.Optional)return o;ku()}finally{H_()}}else if("number"==typeof s){let o=null,a=Jl(n,e),u=Js,l=r&rt.Host?e[yn][Hn]:null;for((-1===a||r&rt.SkipSelf)&&(u=-1===a?Xl(n,e):e[a+8],u!==Js&&J_(r,!1)?(o=e[ge],a=Na(u),e=ic(u,e)):a=-1);-1!==a;){const f=e[ge];if(Y_(s,a,f.data)){const g=Xf(a,e,t,o,r,l);if(g!==ds)return g}u=e[a+8],u!==Js&&J_(r,e[ge].data[a+8]===l)&&Y_(s,a,e)?(o=f,a=Na(u),e=ic(u,e)):a=-1}}return i}function Xf(n,e,t,r,i,s){const o=e[ge],a=o.data[n+8],f=function td(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,m=i?a+f:n.directiveEnd;for(let y=r?a:a+f;y<m;y++){const E=o[y];if(y<u&&t===E||y>=u&&E.type===t)return y}if(i){const y=o[u];if(y&&ai(y)&&y.type===t)return u}return null}(a,o,t,null==r?ba(a)&&Qf:r!=o&&0!=(3&a.type),i&rt.Host&&s===a);return null!==f?Lo(e,o,f,a):ds}function Lo(n,e,t,r){let i=n[t];const s=e.data;if(function G_(n){return n instanceof nc}(i)){const o=i;o.resolving&&function ya(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new N(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ot(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}(s[t]));const a=Ql(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Br(o.injectImpl):null;j_(n,r,rt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function xw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=D_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Br(l),Ql(a),o.resolving=!1,H_()}}return i}function Y_(n,e,t){return!!(t[e+(n>>W_)]&1<<n)}function J_(n,e){return!(n&rt.Self||n&rt.Host&&e)}class Pr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Z_(this._tNode,this._lView,e,yl(r),t)}}function Lw(){return new Pr(nr(),re())}function xn(n){return qs(()=>{const e=n.prototype.constructor,t=e[jr]||oc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[jr]||oc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function oc(n){return ie(n)?()=>{const e=oc(S(n));return e&&e()}:No(n)}function X_(n){const e=n[ge],t=e.type;return 2===t?e.declTNode:1===t?n[Hn]:null}const Fa="__parameters__";function La(n,e,t){return qs(()=>{const r=function np(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,f){const g=u.hasOwnProperty(Fa)?u[Fa]:Object.defineProperty(u,Fa,{value:[]})[Fa];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function qn(n,e){n.forEach(t=>Array.isArray(t)?qn(t,e):e(t))}function Ba(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function uc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ui(n,e,t){let r=Bo(n,e);return r>=0?n[1|r]=t:(r=~r,function $w(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function hs(n,e){const t=Bo(n,e);if(t>=0)return n[1|t]}function Bo(n,e){return function ry(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ja=Vi(La("Optional"),8),$a=Vi(La("SkipSelf"),4);function fy(n){return 128==(128&n.flags)}var Ha=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ha||{});const Qj=/^>|^->|<!--|-->|--!>|<!-$/g,Yj=/(<|>)/g,Jj="\u200b$1\u200b";const Qw=new Map;let Xj=0;const Jw="__ngContext__";function Gr(n,e){$r(e)?(n[Jw]=e[Gu],function t$(n){Qw.set(n[Gu],n)}(e)):n[Jw]=e}let Xw;function e0(n,e){return Xw(n,e)}function dp(n){const e=n[Kt];return Dr(e)?e[Kt]:e}function tR(n){return rR(n[Po])}function nR(n){return rR(n[oi])}function rR(n){for(;null!==n&&!Dr(n);)n=n[oi];return n}function od(n,e,t,r,i){if(null!=r){let s,o=!1;Dr(r)?s=r:$r(r)&&(o=!0,r=r[Wt]);const a=Mt(r);0===n&&null!==t?null==i?aR(e,t,a):fc(e,t,a,i||null,!0):1===n&&null!==t?fc(e,t,a,i||null,!0):2===n?function Ey(n,e,t){const r=yy(n,e);r&&function E$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function C$(n,e,t,r,i){const s=t[ss];s!==Mt(t)&&od(e,n,r,s,i);for(let a=tr;a<t.length;a++){const u=t[a];fp(u[ge],u,n,e,r,s)}}(e,n,s,t,i)}}function t0(n,e){return n.createComment(function WP(n){return n.replace(Qj,e=>e.replace(Yj,Jj))}(e))}function my(n,e,t){return n.createElement(e,t)}function sR(n,e){const t=n[xo],r=t.indexOf(e);M_(e),t.splice(r,1)}function _y(n,e){if(n.length<=tr)return;const t=tr+e,r=n[t];if(r){const i=r[Ro];null!==i&&i!==n&&sR(i,r),e>0&&(n[t-1][oi]=r[oi]);const s=uc(n,tr+e);!function h$(n,e){fp(n,e,e[ze],2,null,null),e[Wt]=null,e[Hn]=null}(r[ge],r);const o=s[Ei];null!==o&&o.detachView(s[ge]),r[Kt]=null,r[oi]=null,r[He]&=-129}return r}function n0(n,e){if(!(256&e[He])){const t=e[ze];e[Wu]&&v_(e[Wu]),e[Mo]&&v_(e[Mo]),t.destroyNode&&fp(n,e,t,3,null,null),function g$(n){let e=n[Po];if(!e)return r0(n[ge],n);for(;e;){let t=null;if($r(e))t=e[Po];else{const r=e[tr];r&&(t=r)}if(!t){for(;e&&!e[oi]&&e!==n;)$r(e)&&r0(e[ge],e),e=e[Kt];null===e&&(e=n),$r(e)&&r0(e[ge],e),t=e&&e[oi]}e=t}}(e)}}function r0(n,e){if(!(256&e[He])){e[He]&=-129,e[He]|=256,function v$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof nc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];os(4,a,u);try{u.call(a)}finally{os(5,a,u)}}else{os(4,i,s);try{s.call(i)}finally{os(5,i,s)}}}}}(n,e),function y$(n,e){const t=n.cleanup,r=e[wa];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[wa]=null);const i=e[Ks];if(null!==i){e[Ks]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[ge].type&&e[ze].destroy();const t=e[Ro];if(null!==t&&Dr(e[Kt])){t!==e[Kt]&&sR(t,e);const r=e[Ei];null!==r&&r.detachView(n)}!function n$(n){Qw.delete(n[Gu])}(e)}}function s0(n,e,t){return function oR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Wt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===wn.None||s===wn.Emulated)return null}return Hr(r,t)}}(n,e.parent,t)}function fc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function aR(n,e,t){n.appendChild(e,t)}function uR(n,e,t,r,i){null!==r?fc(n,e,t,r,i):aR(n,e,t)}function yy(n,e){return n.parentNode(e)}let o0,Iy,l0,wy,dR=function lR(n,e,t){return 40&n.type?Hr(n,t):null};function vy(n,e,t,r){const i=s0(n,r,e),s=e[ze],a=function cR(n,e,t){return dR(n,e,t)}(r.parent||e[Hn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)uR(s,i,t[u],a,!1);else uR(s,i,t,a,!1);void 0!==o0&&o0(s,r,e,t,i)}function hp(n,e){if(null!==e){const t=e.type;if(3&t)return Hr(e,n);if(4&t)return a0(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return hp(n,r);{const i=n[e.index];return Dr(i)?a0(-1,i):Mt(i)}}if(32&t)return e0(e,n)()||Mt(n[e.index]);{const r=fR(n,e);return null!==r?Array.isArray(r)?r[0]:hp(dp(n[yn]),r):hp(n,e.next)}}return null}function fR(n,e){return null!==e?n[yn][Hn].projection[e.projection]:null}function a0(n,e){const t=tr+n+1;if(t<e.length){const r=e[t],i=r[ge].firstChild;if(null!==i)return hp(r,i)}return e[ss]}function u0(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Gr(Mt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)u0(n,e,t.child,r,i,s,!1),od(e,n,i,a,s);else if(32&u){const l=e0(t,r);let f;for(;f=l();)od(e,n,i,f,s);od(e,n,i,a,s)}else 16&u?gR(n,e,r,t,i,s):od(e,n,i,a,s);t=o?t.projectionNext:t.next}}function fp(n,e,t,r,i,s){u0(t,r,n.firstChild,e,i,s,!1)}function gR(n,e,t,r,i,s){const o=t[yn],u=o[Hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)od(e,n,i,u[l],s);else{let l=u;const f=o[Kt];fy(r)&&(l.flags|=128),u0(n,e,l,f,i,s,!0)}}function mR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _R(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Il(n,e,r),null!==i&&mR(n,e,i),null!==s&&function b$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function ad(n){return function c0(){if(void 0===Iy&&(Iy=null,Rt.trustedTypes))try{Iy=Rt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Iy}()?.createHTML(n)||n}function ud(){if(void 0!==l0)return l0;if(typeof document<"u")return document;throw new N(210,!1)}function d0(){if(void 0===wy&&(wy=null,Rt.trustedTypes))try{wy=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wy}function yR(n){return d0()?.createHTML(n)||n}function ER(n){return d0()?.createScriptURL(n)||n}class pc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class R$ extends pc{getTypeName(){return"HTML"}}class M$ extends pc{getTypeName(){return"Style"}}class x$ extends pc{getTypeName(){return"Script"}}class N$ extends pc{getTypeName(){return"URL"}}class O$ extends pc{getTypeName(){return"ResourceURL"}}function ji(n){return n instanceof pc?n.changingThisBreaksApplicationSecurity:n}function eo(n,e){const t=function k$(n){return n instanceof pc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ut})`)}return t===e}class j${constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(ad(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class $${constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=ad(e),t}}const z$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cy(n){return(n=String(n)).match(z$)?n:"unsafe:"+n}function jo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function pp(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const wR=jo("area,br,col,hr,img,wbr"),CR=jo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),TR=jo("rp,rt"),h0=pp(wR,pp(CR,jo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pp(TR,jo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pp(TR,CR)),f0=jo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bR=pp(f0,jo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),q$=jo("script,style,template");class G${constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!h0.hasOwnProperty(t))return this.sanitizedSomething=!0,!q$.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!bR.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;f0[a]&&(u=Cy(u)),this.buf.push(" ",o,'="',DR(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();h0.hasOwnProperty(t)&&!wR.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(DR(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const W$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,K$=/([^\#-~ |!])/g;function DR(n){return n.replace(/&/g,"&amp;").replace(W$,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(K$,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ty;function AR(n,e){let t=null;try{Ty=Ty||function IR(n){const e=new $$(n);return function H$(){try{return!!(new window.DOMParser).parseFromString(ad(""),"text/html")}catch{return!1}}()?new j$(e):e}(n);let r=e?String(e):"";t=Ty.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Ty.getInertBodyElement(r)}while(r!==s);return ad((new G$).sanitizeChildren(p0(t)||t))}finally{if(t){const r=p0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function p0(n){return"content"in n&&function Z$(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var $i=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}($i||{});function g0(n){const e=gp();return e?yR(e.sanitize($i.HTML,n)||""):eo(n,"HTML")?yR(ji(n)):AR(ud(),De(n))}function cd(n){const e=gp();return e?e.sanitize($i.URL,n)||"":eo(n,"URL")?ji(n):Cy(De(n))}function SR(n){const e=gp();if(e)return ER(e.sanitize($i.RESOURCE_URL,n)||"");if(eo(n,"ResourceURL"))return ER(ji(n));throw new N(904,!1)}function gp(){const n=re();return n&&n[Ca].sanitizer}const mp=new ue("ENVIRONMENT_INITIALIZER"),RR=new ue("INJECTOR",-1),MR=new ue("INJECTOR_DEF_TYPES");class m0{get(e,t=Lu){if(t===Lu){const r=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw r.name="NullInjectorError",r}return t}}function _p(n){return{\u0275providers:n}}function tH(...n){return{\u0275providers:xR(0,n),\u0275fromNgModule:!0}}function xR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return qn(e,o=>{const a=o;by(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&NR(i,s),t}function NR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];_0(i,s=>{e(s,r)})}}function by(n,e,t,r){if(!(n=S(n)))return!1;let i=null,s=fl(n);const o=!s&&ht(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=fl(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)by(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{qn(s.imports,f=>{by(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&NR(l,e)}if(!a){const l=No(i)||(()=>new i);e({provide:i,useFactory:l,deps:ct},i),e({provide:MR,useValue:i,multi:!0},i),e({provide:mp,useValue:()=>ee(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;_0(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function _0(n,e){for(let t of n)Ee(t)&&(t=t.\u0275providers),Array.isArray(t)?_0(t,e):e(t)}const nH=be({provide:String,useValue:be});function y0(n){return null!==n&&"object"==typeof n&&nH in n}function gc(n){return"function"==typeof n}const v0=new ue("Set Injector scope."),Dy={},iH={};let E0;function Ay(){return void 0===E0&&(E0=new m0),E0}class Hi{}class ld extends Hi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,w0(e,o=>this.processProvider(o)),this.records.set(RR,dd(void 0,this)),i.has("environment")&&this.records.set(Hi,dd(void 0,this));const s=this.records.get(v0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(MR.multi,ct,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=zs(this),r=Br(void 0);try{return e()}finally{zs(t),Br(r)}}get(e,t=Lu,r=rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zu))return e[zu](this);r=yl(r);const s=zs(this),o=Br(void 0);try{if(!(r&rt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function cH(n){return"function"==typeof n||"object"==typeof n&&n instanceof ue}(e)&&hl(e);u=l&&this.injectableDefInScope(l)?dd(I0(e),Dy):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&rt.Self?Ay():this.parent).get(e,t=r&rt.Optional&&t===Lu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Hs]=a[Hs]||[]).unshift(Ot(e)),s)throw a;return function ow(n,e,t,r){const i=n[Hs];throw e[Fi]&&i.unshift(e[Fi]),n.message=function ju(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ot(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(tf,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Hs]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Br(o),zs(s)}}resolveInjectorInitializers(){const e=zs(this),t=Br(void 0);try{const i=this.get(mp.multi,ct,rt.Self);for(const s of i)s()}finally{zs(e),Br(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new N(205,!1)}processProvider(e){let t=gc(e=S(e))?e:S(e&&e.provide);const r=function oH(n){return y0(n)?dd(void 0,n.useValue):dd(FR(n),Dy)}(e);if(gc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=dd(void 0,Dy,!0),i.factory=()=>Bu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Dy&&(t.value=iH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function uH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=S(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function I0(n){const e=hl(n),t=null!==e?e.factory:No(n);if(null!==t)return t;if(n instanceof ue)throw new N(204,!1);if(n instanceof Function)return function sH(n){const e=n.length;if(e>0)throw function cc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new N(204,!1);const t=function Ym(n){return n&&(n[Fu]||n[So])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new N(204,!1)}function FR(n,e,t){let r;if(gc(n)){const i=S(n);return No(i)||I0(i)}if(y0(n))r=()=>S(n.useValue);else if(function kR(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Bu(n.deps||[]));else if(function OR(n){return!(!n||!n.useExisting)}(n))r=()=>ee(S(n.useExisting));else{const i=S(n&&(n.useClass||n.provide));if(!function aH(n){return!!n.deps}(n))return No(i)||I0(i);r=()=>new i(...Bu(n.deps))}return r}function dd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function w0(n,e){for(const t of n)Array.isArray(t)?w0(t,e):t&&Ee(t)?w0(t.\u0275providers,e):e(t)}const Sy=new ue("AppId",{providedIn:"root",factory:()=>lH}),lH="ng",VR=new ue("Platform Initializer"),Ss=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LR=new ue("AnimationModuleType"),UR=new ue("CSP nonce",{providedIn:"root",factory:()=>ud().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let BR=(n,e,t)=>null;function R0(n,e,t=!1){return BR(n,e,t)}class EH{}class HR{}class wH{resolveComponentFactory(e){throw function IH(n){const e=Error(`No component factory found for ${Ot(n)}.`);return e.ngComponent=n,e}(e)}}let Ep=(()=>{class n{static#e=this.NULL=new wH}return n})();function CH(){return pd(nr(),re())}function pd(n,e){return new zi(Hr(n,e))}let zi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=CH}return n})();class Ip{}let $o=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function bH(){const n=re(),t=Ar(nr().index,n);return($r(t)?t:n)[ze]}()}return n})(),DH=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>null})}return n})();class gd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const AH=new gd("16.2.12"),N0={};function KR(n,e=null,t=null,r){const i=ZR(n,e,t,r);return i.resolveInjectorInitializers(),i}function ZR(n,e=null,t=null,r,i=new Set){const s=[t||ct,tH(n)];return r=r||("object"==typeof n?void 0:Ot(n)),new ld(s,e||Ay(),r||null,i)}let Rr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Lu;static#t=this.NULL=new m0;static create(t,r){if(Array.isArray(t))return KR({name:""},r,t,"");{const i=t.name??"";return KR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=de({token:n,providedIn:"any",factory:()=>ee(RR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function k0(n){return n.ngOriginalError}class Ho{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&k0(e);for(;t&&k0(t);)t=k0(t);return t||null}}function V0(n){return e=>{setTimeout(n,void 0,e)}}const Cn=class OH extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=V0(s),i&&(i=V0(i)),o&&(o=V0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof It&&e.add(a),a}};function YR(...n){}class vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cn(!1),this.onMicrotaskEmpty=new Cn(!1),this.onStable=new Cn(!1),this.onError=new Cn(!1),typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function kH(){const n="function"==typeof Rt.requestAnimationFrame;let e=Rt[n?"requestAnimationFrame":"setTimeout"],t=Rt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function LH(n){const e=()=>{!function VH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,U0(n),n.isCheckStableRunning=!0,L0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),U0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function BH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return JR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),XR(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return JR(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),XR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,U0(n),L0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vt.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(vt.isInAngularZone())throw new N(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,FH,YR,YR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const FH={};function L0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function U0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function JR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XR(n){n._nesting--,L0(n)}class UH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cn,this.onMicrotaskEmpty=new Cn,this.onStable=new Cn,this.onError=new Cn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const eM=new ue("",{providedIn:"root",factory:tM});function tM(){const n=pe(vt);let e=!0;return K(new nt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new nt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{vt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ue()))}function zo(n){return n instanceof Function?n():n}let B0=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})();function wp(n){for(;n;){n[He]|=64;const e=dp(n);if(vf(n)&&!e)return n;n=e}return null}const oM=new ue("",{providedIn:"root",factory:()=>!1});let ky=null;function lM(n,e){return n[e]??fM()}function dM(n,e){const t=fM();t.producerNode?.length&&(n[e]=ky,t.lView=n,ky=hM())}const QH={...m_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wp(n.lView)},lView:null};function hM(){return Object.create(QH)}function fM(){return ky??=hM(),ky}const Ze={};function me(n){pM(mt(),re(),Sr()+n,!1)}function pM(n,e,t,r){if(!r)if(3==(3&e[He])){const s=n.preOrderCheckHooks;null!==s&&ql(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Gl(e,s,0,t)}Fo(t)}function G(n,e=rt.Default){const t=re();return null===t?ee(n,e):Z_(nr(),t,S(n),e)}function Fy(n,e,t,r,i,s,o,a,u,l,f){const g=e.blueprint.slice();return g[Wt]=i,g[He]=140|r,(null!==l||n&&2048&n[He])&&(g[He]|=2048),Nf(g),g[Kt]=g[Ws]=n,g[_n]=t,g[Ca]=o||n&&n[Ca],g[ze]=a||n&&n[ze],g[is]=u||n&&n[is]||null,g[Hn]=s,g[Gu]=function e$(){return Xj++}(),g[Li]=f,g[Rl]=l,g[yn]=2==e.type?n[yn]:g,g}function yd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function j0(n,e,t,r,i){const s=F_(),o=Lf(),u=n.data[e]=function i4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ys(){return null!==Ve.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function L_(){return Ve.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function ko(){const n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return us(s,!0),s}function Cp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mM(n,e,t,r,i){const s=lM(e,Wu),o=Sr(),a=2&r;try{Fo(-1),a&&e.length>lt&&pM(n,e,lt,!1),os(a?2:0,i);const l=a?s:null,f=Cf(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Zu(l,f)}}finally{a&&null===e[Wu]&&dM(e,Wu),Fo(o),os(a?3:1,i)}}function $0(n,e,t){if(d_(e)){const r=Ii(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ii(r)}}}function H0(n,e,t){O_()&&(function d4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ba(t)&&function y4(n,e,t){const r=Hr(e,n),i=_M(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Vy(n,Fy(n,i,null,o,r,e,null,n[Ca].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Yl(t,e),Gr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=Lo(e,n,a,t);Gr(l,e),null!==o&&v4(0,a-i,l,u,0,o),ai(u)&&(Ar(t.index,e)[_n]=Lo(e,n,a,t))}}(n,e,t,Hr(t,e)),64==(64&t.flags)&&wM(n,e,t))}function z0(n,e,t=Hr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function _M(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=q0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function q0(n,e,t,r,i,s,o,a,u,l,f){const g=lt+r,m=g+i,y=function JH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ze);return t}(g,m),E="function"==typeof l?l():l;return y[ge]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let yM=n=>null;function vM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?EM(t,e,i,s):r.hasOwnProperty(i)&&EM(t,e,r[i],s)}return t}function EM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function qi(n,e,t,r,i,s,o,a){const u=Hr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(Q0(n,t,f,r,i),ba(e)&&function a4(n,e){const t=Ar(e,n);16&t[He]||(t[He]|=64)}(t,e.index)):3&e.type&&(r=function o4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function G0(n,e,t,r){if(O_()){const i=null===r?null:{"":-1},s=function f4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(bl(e,o.selectors,!1))if(r||(r=[]),ai(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),W0(n,e,a.length)}else r.unshift(o),W0(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&IM(n,e,t,o,i,a),i&&function p4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new N(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Ia(t.mergedAttrs,t.attrs)}function IM(n,e,t,r,i,s){for(let l=0;l<r.length;l++)sc(Yl(t,e),n,r[l].type);!function m4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Cp(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=Ia(t.mergedAttrs,f.hostAttrs),_4(n,t,e,u,f),g4(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function s4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],m=t?t.get(g):null,E=m?m.outputs:null;u=vM(g.inputs,f,u,m?m.inputs:null),l=vM(g.outputs,f,l,E);const w=null===u||null===o||af(e)?null:E4(u,f,o);a.push(w)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function wM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function U_(){return Ve.lFrame.currentDirectiveIndex}();try{Fo(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];ec(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&h4(u,l)}}finally{Fo(-1),ec(o)}}function h4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function W0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function g4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ai(e)&&(t[""]=n)}}function _4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=No(i.type)),o=new nc(s,ai(i),G);n.blueprint[r]=o,t[r]=o,function c4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function l4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Cp(n,t,i.hostVars,Ze),i)}function to(n,e,t,r,i,s){const o=Hr(n,e);!function K0(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?De(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[ze],o,s,n.value,t,r,i)}function v4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)CM(r,t,o[a++],o[a++],o[a++])}function CM(n,e,t,r,i){const s=Ii(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Ii(s)}}function E4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function TM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function bM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];jf(t[r]),o.contentQueries(2,e[s],s)}}}function Vy(n,e){return n[Po]?n[l_][oi]=e:n[Po]=e,n[l_]=e,e}function Z0(n,e,t){jf(0);const r=Ii(null);try{e(n,t)}finally{Ii(r)}}function SM(n,e,t){return(null===n||ai(n))&&(t=function Pa(n){for(;Array.isArray(n);){if("object"==typeof n[Ml])return n;n=n[Wt]}return null}(t[e.index])),t[ze]}function PM(n,e){const t=n[is],r=t?t.get(Ho,null):null;r&&r.handleError(e)}function Q0(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];CM(n.data[o],e[o],r,a,i)}}function I4(n,e){const t=Ar(e,n),r=t[ge];!function w4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Wt];null!==i&&null===t[Li]&&(t[Li]=R0(i,t[is])),Y0(r,t,t[_n])}function Y0(n,e,t){Hf(e);try{const r=n.viewQuery;null!==r&&Z0(1,r,t);const i=n.template;null!==i&&mM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bM(n,e),n.staticViewQueries&&Z0(2,n.viewQuery,t);const s=n.components;null!==s&&function C4(n,e){for(let t=0;t<e.length;t++)I4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[He]&=-5,qf()}}let RM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function gw(n,e,t){const r=Object.create(Sf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Ol(r),run:()=>{if(r.dirty=!1,r.hasRun&&!y_(r))return;r.hasRun=!0;const o=Cf(r);try{r.cleanupFn(),r.cleanupFn=b_,r.fn(i)}finally{Zu(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ly(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=rs(i,a):2==s&&(r=rs(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Tp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Mt(s)),Dr(s)&&MM(s,r);const o=t.type;if(8&o)Tp(n,e,t.child,r);else if(32&o){const a=e0(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=fR(e,t);if(Array.isArray(a))r.push(...a);else{const u=dp(e[yn]);Tp(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function MM(n,e){for(let t=tr;t<n.length;t++){const r=n[t],i=r[ge].firstChild;null!==i&&Tp(r[ge],r,i,e)}n[ss]!==n[Wt]&&e.push(n[ss])}function Uy(n,e,t,r=!0){const i=e[Ca],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{xM(n,e,n.template,t)}catch(u){throw r&&PM(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function xM(n,e,t,r){const i=e[He];if(256!=(256&i)){e[Ca].effectManager?.flush(),Hf(e);try{Nf(e),function $l(n){return Ve.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&mM(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&ql(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Gl(e,l,0,null),Wf(e,0)}if(function D4(n){for(let e=tR(n);null!==e;e=nR(e)){if(!e[xl])continue;const t=e[xo];for(let r=0;r<t.length;r++){Iw(t[r])}}}(e),NM(e,2),null!==n.contentQueries&&bM(n,e),o){const l=n.contentCheckHooks;null!==l&&ql(e,l)}else{const l=n.contentHooks;null!==l&&Gl(e,l,1),Wf(e,1)}!function YH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=lM(e,Mo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Fo(~s);else{const o=s,a=t[++i],u=t[++i];Dw(a,o),r.dirty=!1;const l=Cf(r);try{u(2,e[o])}finally{Zu(r,l)}}}}finally{null===e[Mo]&&dM(e,Mo),Fo(-1)}}(n,e);const a=n.components;null!==a&&kM(e,a,0);const u=n.viewQuery;if(null!==u&&Z0(2,u,r),o){const l=n.viewCheckHooks;null!==l&&ql(e,l)}else{const l=n.viewHooks;null!==l&&Gl(e,l,2),Wf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[He]&=-73,M_(e)}finally{qf()}}}function NM(n,e){for(let t=tR(n);null!==t;t=nR(t))for(let r=tr;r<t.length;r++)OM(t[r],e)}function A4(n,e,t){OM(Ar(e,n),t)}function OM(n,e){if(!function vw(n){return 128==(128&n[He])}(n))return;const t=n[ge],r=n[He];if(80&r&&0===e||1024&r||2===e)xM(t,n,t.template,n[_n]);else if(n[qu]>0){NM(n,1);const i=t.components;null!==i&&kM(n,i,1)}}function kM(n,e,t){for(let r=0;r<e.length;r++)A4(n,e[r],t)}class bp{get rootNodes(){const e=this._lView,t=e[ge];return Tp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return 256==(256&this._lView[He])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Kt];if(Dr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(_y(e,r),uc(t,r))}this._attachedToViewContainer=!1}n0(this._lView[ge],this._lView)}onDestroy(e){!function x_(n,e){if(256==(256&n[He]))throw new N(911,!1);null===n[Ks]&&(n[Ks]=[]),n[Ks].push(e)}(this._lView,e)}markForCheck(){wp(this._cdRefInjectingView||this._lView)}detach(){this._lView[He]&=-129}reattach(){this._lView[He]|=128}detectChanges(){Uy(this._lView[ge],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function p$(n,e){fp(n,e,e[ze],2,null,null)}(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e}}class S4 extends bp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Uy(e[ge],e,e[_n],!1)}checkNoChanges(){}get context(){return null}}class FM extends Ep{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ht(e);return new Dp(t,this.ngModule)}}function VM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class R4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yl(r);const i=this.injector.get(e,N0,r);return i!==N0||t===N0?i:this.parentInjector.get(e,t,r)}}class Dp extends HR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=VM(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return VM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Al(n){return n.map(hf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Hi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new R4(e,s):e,a=o.get(Ip,null);if(null===a)throw new N(407,!1);const g={rendererFactory:a,sanitizer:o.get(DH,null),effectManager:o.get(RM,null),afterRenderEventManager:o.get(B0,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function XH(n,e,t,r){const s=r.get(oM,!1)||t===wn.ShadowDom,o=n.selectRootElement(e,s);return function e4(n){yM(n)}(o),o}(m,r,this.componentDef.encapsulation,o):my(m,y,function P4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),R=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let P=null;null!==E&&(P=R0(E,o,!0));const O=q0(0,null,null,1,0,null,null,null,null,null,null),W=Fy(null,O,null,R,null,null,g,m,o,null,P);let ce,Re;Hf(W);try{const $e=this.componentDef;let Nt,_i=null;$e.findHostDirectiveDefs?(Nt=[],_i=new Map,$e.findHostDirectiveDefs($e,Nt,_i),Nt.push($e)):Nt=[$e];const Ni=function x4(n,e){const t=n[ge],r=lt;return n[r]=e,yd(t,r,2,"#host",null)}(W,E),YI=function N4(n,e,t,r,i,s,o){const a=i[ge];!function O4(n,e,t,r){for(const i of n)e.mergedAttrs=Ia(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Ly(e,e.mergedAttrs,!0),null!==t&&_R(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=R0(e,i[is]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const g=Fy(i,_M(t),null,f,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&W0(a,n,r.length-1),Vy(i,g),i[n.index]=g}(Ni,E,$e,Nt,W,g,m);Re=Ma(O,lt),E&&function F4(n,e,t,r){if(r)Il(n,t,["ng-version",AH.full]);else{const{attrs:i,classes:s}=function ff(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!si(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Il(n,t,i),s&&s.length>0&&mR(n,t,s.join(" "))}}(m,$e,E,r),void 0!==t&&function V4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Re,this.ngContentSelectors,t),ce=function k4(n,e,t,r,i,s){const o=nr(),a=i[ge],u=Hr(o,i);IM(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Gr(Lo(i,a,o.directiveStart+f,o),i);wM(a,i,o),u&&Gr(u,i);const l=Lo(i,a,o.directiveStart+o.componentOffset,o);if(n[_n]=i[_n]=l,null!==s)for(const f of s)f(l,e);return $0(a,o,n),l}(YI,$e,Nt,_i,W,[L4]),Y0(O,W,null)}finally{qf()}return new M4(this.componentType,ce,pd(Re,W),W,Re)}}class M4 extends EH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new S4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Q0(s[ge],s,i,e,t),this.previousInputValues.set(e,t),wp(Ar(this._tNode.index,s))}}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function L4(){const n=nr();zl(re()[ge],n)}function kt(n){let e=function LM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ai(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new N(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=By(n.inputs),o.inputTransforms=By(n.inputTransforms),o.declaredInputs=By(n.declaredInputs),o.outputs=By(n.outputs);const a=i.hostBindings;a&&$4(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&B4(n,u),l&&j4(n,l),er(n.inputs,i.inputs),er(n.declaredInputs,i.declaredInputs),er(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),er(o.inputTransforms,i.inputTransforms)),ai(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===kt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function U4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ia(i.hostAttrs,t=Ia(t,i.hostAttrs))}}(r)}function By(n){return n===Cr?{}:n===ct?[]:n}function B4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function j4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function $4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function $M(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function jy(n){return!!function J0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function no(n,e,t){return n[e]=t}function Wr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Di(n,e,t,r){const i=re();return Wr(i,xa(),e)&&(mt(),to(rn(),i,n,e,t,r)),Di}function xt(n,e,t,r,i,s,o,a){const u=re(),l=mt(),f=n+lt,g=l.firstCreatePass?function fz(n,e,t,r,i,s,o,a,u){const l=e.consts,f=yd(e,n,4,o||null,as(l,a));G0(e,t,f,as(l,u)),zl(e,f);const g=f.tView=q0(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,s,o):l.data[f];us(g,!1);const m=tx(l,u,g,n);Hl()&&vy(l,u,m,g),Gr(m,u),Vy(u,u[f]=TM(m,u,m,g)),yf(g)&&H0(l,u,g),null!=o&&z0(u,g,a)}let tx=function nx(n,e,t,r){return As(!0),e[ze].createComment("")};function xe(n,e,t){const r=re();return Wr(r,xa(),e)&&qi(mt(),rn(),r,n,e,r[ze],t,!1),xe}function iC(n,e,t,r,i){const o=i?"class":"style";Q0(n,t,e.inputs[o],o,r)}function L(n,e,t,r){const i=re(),s=mt(),o=lt+n,a=i[ze],u=s.firstCreatePass?function _z(n,e,t,r,i,s){const o=e.consts,u=yd(e,n,2,r,as(o,i));return G0(e,t,u,as(o,s)),null!==u.attrs&&Ly(u,u.attrs,!1),null!==u.mergedAttrs&&Ly(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=ix(s,i,u,a,e,n);i[o]=l;const f=yf(u);return us(u,!0),_R(a,l,u),32!=(32&u.flags)&&Hl()&&vy(s,i,l,u),0===function ww(){return Ve.lFrame.elementDepthCount}()&&Gr(l,i),function Yu(){Ve.lFrame.elementDepthCount++}(),f&&(H0(s,i,u),$0(s,u,i)),null!==r&&z0(i,u),L}function V(){let n=nr();Lf()?Ju():(n=n.parent,us(n,!1));const e=n;(function kf(n){return Ve.skipHydrationRootTNode===n})(e)&&function k_(){Ve.skipHydrationRootTNode=null}(),function Cw(){Ve.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(zl(t,n),d_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function MP(n){return 0!=(8&n.flags)}(e)&&iC(t,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Kf(n){return 0!=(16&n.flags)}(e)&&iC(t,e,re(),e.stylesWithoutHost,!1),V}function it(n,e,t,r){return L(n,e,t,r),V(),it}let ix=(n,e,t,r,i,s)=>(As(!0),my(r,i,function z_(){return Ve.lFrame.currentNamespace}()));function Mp(n,e,t){const r=re(),i=mt(),s=n+lt,o=i.firstCreatePass?function Ez(n,e,t,r,i){const s=e.consts,o=as(s,r),a=yd(e,n,8,"ng-container",o);return null!==o&&Ly(a,o,!0),G0(e,t,a,as(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];us(o,!0);const a=ox(i,r,o,n);return r[s]=a,Hl()&&vy(i,r,a,o),Gr(a,r),yf(o)&&(H0(i,r,o),$0(i,o,r)),null!=t&&z0(r,o),Mp}function xp(){let n=nr();const e=mt();return Lf()?Ju():(n=n.parent,us(n,!1)),e.firstCreatePass&&(zl(e,n),d_(n)&&e.queries.elementEnd(n)),xp}let ox=(n,e,t,r)=>(As(!0),t0(e[ze],""));function ro(){return re()}function Np(n){return!!n&&"function"==typeof n.then}function ax(n){return!!n&&"function"==typeof n.subscribe}function Qe(n,e,t,r){const i=re(),s=mt(),o=nr();return function cx(n,e,t,r,i,s,o){const a=yf(r),l=n.firstCreatePass&&function AM(n){return n.cleanup||(n.cleanup=[])}(n),f=e[_n],g=function DM(n){return n[wa]||(n[wa]=[])}(e);let m=!0;if(3&r.type||o){const w=Hr(r,e),C=o?o(w):w,R=g.length,P=o?W=>o(Mt(W[r.index])):r.index;let O=null;if(!o&&a&&(O=function Cz(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[wa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,m=!1;else{s=dx(r,e,f,s,!1);const W=t.listen(C,i,s);g.push(s,W),l&&l.push(i,P,R,R+1)}}else s=dx(r,e,f,s,!1);const y=r.outputs;let E;if(m&&null!==y&&(E=y[i])){const w=E.length;if(w)for(let C=0;C<w;C+=2){const ce=e[E[C]][E[C+1]].subscribe(s),Re=g.length;g.push(s,ce),l&&l.push(i,r.index,Re,-(Re+1))}}}(s,i,i[ze],o,n,e,r),Qe}function lx(n,e,t,r){try{return os(6,e,t),!1!==t(r)}catch(i){return PM(n,i),!1}finally{os(7,e,t)}}function dx(n,e,t,r,i){return function s(o){if(o===Function)return r;wp(n.componentOffset>-1?Ar(n.index,e):e);let u=lx(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=lx(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Et(n=1){return function Aw(n){return(Ve.lFrame.contextLView=function Sw(n,e){for(;n>0;)e=e[Ws],n--;return e}(n,Ve.lFrame.contextLView))[_n]}(n)}function Gy(n,e){return n<<17|e<<2}function za(n){return n>>17&32767}function oC(n){return 2|n}function _c(n){return(131068&n)>>2}function aC(n,e){return-131069&n|e<<2}function uC(n){return 1|n}function Ix(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?za(s):_c(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];xz(n[a],e)&&(u=!0,n[a+1]=r?uC(f):oC(f)),a=r?za(f):_c(f)}u&&(n[t+1]=r?oC(s):uC(s))}function xz(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Bo(n,e)>=0}const ir={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wx(n){return n.substring(ir.key,ir.keyEnd)}function Cx(n,e){const t=ir.textEnd;return t===e?-1:(e=ir.keyEnd=function Fz(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,ir.key=e,t),Sd(n,e,t))}function Sd(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Pd(n,e,t){return Ps(n,e,t,!1),Pd}function Rd(n,e){return Ps(n,e,null,!0),Rd}function ps(n){!function Rs(n,e,t,r){const i=mt(),s=ls(2);i.firstUpdatePass&&Px(i,null,s,r);const o=re();if(t!==Ze&&Wr(o,s,t)){const a=i.data[Sr()];if(Nx(a,r)&&!Sx(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(t=rs(u,t||"")),iC(i,a,o,t,r)}else!function Gz(n,e,t,r,i,s,o,a){i===Ze&&(i=ct);let u=0,l=0,f=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;null!==f||null!==g;){const m=u<i.length?i[u+1]:void 0,y=l<s.length?s[l+1]:void 0;let w,E=null;f===g?(u+=2,l+=2,m!==y&&(E=g,w=y)):null===g||null!==f&&f<g?(u+=2,E=f):(l+=2,E=g,w=y),null!==E&&Mx(n,e,t,r,E,w,o,a),f=u<i.length?i[u]:null,g=l<s.length?s[l]:null}}(i,a,o,o[ze],o[s+1],o[s+1]=function zz(n,e,t){if(null==t||""===t)return ct;const r=[],i=ji(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(qz,so,n,!0)}function so(n,e){for(let t=function Oz(n){return function bx(n){ir.key=0,ir.keyEnd=0,ir.value=0,ir.valueEnd=0,ir.textEnd=n.length}(n),Cx(n,Sd(n,0,ir.textEnd))}(e);t>=0;t=Cx(e,t))ui(n,wx(e),!0)}function Ps(n,e,t,r){const i=re(),s=mt(),o=ls(2);s.firstUpdatePass&&Px(s,n,o,r),e!==Ze&&Wr(i,o,e)&&Mx(s,s.data[Sr()],i,i[ze],n,i[o+1]=function Wz(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ot(ji(n)))),n}(e,t),r,o)}function Sx(n,e){return e>=n.expandoStartIndex}function Px(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Sr()],o=Sx(n,t);Nx(s,r)&&null===e&&!o&&(e=!1),e=function Bz(n,e,t,r){const i=Bf(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Op(t=cC(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=cC(i,n,e,t,r),null===s){let u=function jz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==_c(r))return n[za(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=cC(null,n,e,u[1],r),u=Op(u,e.attrs,r),function $z(n,e,t,r){n[za(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function Hz(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Op(r,n[s].hostAttrs,t);return Op(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Rz(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=za(o),u=_c(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Bo(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const m=za(n[a+1]);n[r+1]=Gy(m,a),0!==m&&(n[m+1]=aC(n[m+1],r)),n[a+1]=function Sz(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Gy(a,0),0!==a&&(n[a+1]=aC(n[a+1],r)),a=r;else n[r+1]=Gy(u,0),0===a?a=r:n[u+1]=aC(n[u+1],r),u=r;l&&(n[r+1]=oC(n[r+1])),Ix(n,f,r,!0),Ix(n,f,r,!1),function Mz(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Bo(s,e)>=0&&(t[r+1]=uC(t[r+1]))}(e,f,n,r,s),o=Gy(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function cC(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Op(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Op(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ui(n,o,!!t||e[++s]))}return void 0===n?null:n}function qz(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&ui(n,r,t)}function Mx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function Pz(n){return 1==(1&n)}(l)?xx(u,e,t,i,_c(l),o):void 0;Wy(f)||(Wy(s)||function Az(n){return 2==(2&n)}(l)&&(s=xx(u,null,t,i,a,o)),function T$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ha.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ha.Important),n.setStyle(t,r,i,s))}}(r,o,Ra(Sr(),t),i,s))}function xx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,g=null===f;let m=t[i+1];m===Ze&&(m=g?ct:void 0);let y=g?hs(m,r):f===r?m:void 0;if(l&&!Wy(y)&&(y=hs(u,r)),Wy(y)&&(a=y,o))return a;const E=n[i+1];i=o?za(E):_c(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=hs(u,r))}return a}function Wy(n){return void 0!==n}function Nx(n,e){return 0!=(n.flags&(e?8:16))}function Y(n,e=""){const t=re(),r=mt(),i=n+lt,s=r.firstCreatePass?yd(r,i,1,e,null):r.data[i],o=Ox(r,t,s,e,n);t[i]=o,Hl()&&vy(r,t,o,s),us(s,!1)}let Ox=(n,e,t,r,i)=>(As(!0),function gy(n,e){return n.createText(e)}(e[ze],r));function yc(n){return on("",n,""),yc}function on(n,e,t){const r=re(),i=function Ed(n,e,t,r){return Wr(n,xa(),t)?e+De(t)+r:Ze}(r,n,e,t);return i!==Ze&&function qo(n,e,t){const r=Ra(e,n);!function iR(n,e,t){n.setValue(e,t)}(n[ze],r,t)}(r,Sr(),i),on}function lC(n,e,t){const r=re();if(Wr(r,xa(),e)){const s=mt(),o=rn();qi(s,o,r,n,e,SM(Bf(s.data),o,r),t,!0)}return lC}const vc=void 0;var gq=["en",[["a","p"],["AM","PM"],vc],[["AM","PM"],vc,vc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vc,"{1} 'at' {0}",vc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pq(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Md={};function ci(n){const e=function mq(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=eN(e);if(t)return t;const r=e.split("-")[0];if(t=eN(r),t)return t;if("en"===r)return gq;throw new N(701,!1)}function eN(n){return n in Md||(Md[n]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[n]),Md[n]}var Zt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Zt||{});const xd="en-US";let tN=xd;function fC(n,e,t,r,i){if(n=S(n),Array.isArray(n))for(let s=0;s<n.length;s++)fC(n[s],e,t,r,i);else{const s=mt(),o=re(),a=nr();let u=gc(n)?n:S(n.provide);const l=FR(n),f=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(gc(n)||!n.multi){const y=new nc(l,i,G),E=gC(u,e,i?f:f+m,g);-1===E?(sc(Yl(a,o),s,u),pC(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=gC(u,e,f+m,g),E=gC(u,e,f,f+m),C=E>=0&&t[E];if(i&&!C||!i&&!(y>=0&&t[y])){sc(Yl(a,o),s,u);const R=function p6(n,e,t,r,i){const s=new nc(n,t,G);return s.multi=[],s.index=e,s.componentProviders=0,DN(s,i,r&&!t),s}(i?f6:h6,t.length,i,r,l);!i&&C&&(t[E].providerFactory=R),pC(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(R),o.push(R)}else pC(s,n,y>-1?y:E,DN(t[i?E:y],l,!i&&r));!i&&r&&C&&t[E].componentProviders++}}}function pC(n,e,t,r){const i=gc(e),s=function rH(n){return!!n.useClass}(e);if(i||s){const u=(s?S(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function DN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gC(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function h6(n,e,t,r){return mC(this.multi,[])}function f6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Lo(t,t[ge],this.providerFactory.index,r);s=a.slice(0,o),mC(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],mC(i,s);return s}function mC(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function pn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function d6(n,e,t){const r=mt();if(r.firstCreatePass){const i=ai(n);fC(t,r.data,r.blueprint,i,!0),fC(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ec{}class AN{}class _C extends Ec{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new FM(this);const i=br(e);this._bootstrapComponents=zo(i.bootstrap),this._r3Injector=ZR(e,t,[{provide:Ec,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class yC extends AN{constructor(e){super(),this.moduleType=e}create(e){return new _C(this.moduleType,e,[])}}class SN extends Ec{constructor(e){super(),this.componentFactoryResolver=new FM(this),this.instance=null;const t=new ld([...e.providers,{provide:Ec,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver}],e.parent||Ay(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function vC(n,e,t=null){return new SN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let _6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=xR(0,t.type),i=r.length>0?vC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(ee(Hi))})}return n})();function Jy(n){n.getStandaloneInjector=e=>e.get(_6).getOrCreateStandaloneInjector(n)}function kN(n,e,t,r){return function FN(n,e,t,r,i,s){const o=e+t;return Wr(n,o,i)?no(n,o+1,s?r.call(s,i):r(i)):Bp(n,o+1)}(re(),rr(),n,e,t,r)}function Bp(n,e){const t=n[e];return t===Ze?void 0:t}function VN(n,e,t,r,i,s,o){const a=e+t;return function mc(n,e,t,r){const i=Wr(n,e,t);return Wr(n,e+1,r)||i}(n,a,i,s)?no(n,a+2,o?r.call(o,i,s):r(i,s)):Bp(n,a+2)}function jp(n,e){const t=mt();let r;const i=n+lt;t.firstCreatePass?(r=function k6(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=No(r.type)),a=Br(G);try{const u=Ql(!1),l=s();return Ql(u),function mz(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,re(),i,l),l}finally{Br(a)}}function $p(n,e,t,r){const i=n+lt,s=re(),o=Ci(s,i);return function Hp(n,e){return n[ge].data[e].pure}(s,i)?VN(s,rr(),e,o.transform,t,r,o):o.transform(t,r)}function $6(n,e,t,r=!0){const i=e[ge];if(function m$(n,e,t,r){const i=tr+r,s=t.length;r>0&&(t[i-1][oi]=e),r<s-tr?(e[oi]=t[i],Ba(t,tr+r,e)):(t.push(e),e[oi]=null),e[Kt]=t;const o=e[Ro];null!==o&&t!==o&&function _$(n,e){const t=n[xo];e[yn]!==e[Kt][Kt][yn]&&(n[xl]=!0),null===t?n[xo]=[e]:t.push(e)}(o,e);const a=e[Ei];null!==a&&a.insertView(n),e[He]|=128}(i,e,n,t),r){const s=a0(t,n),o=e[ze],a=yy(o,n[ss]);null!==a&&function f$(n,e,t,r,i,s){r[Wt]=i,r[Hn]=e,fp(n,r,t,1,i,s)}(i,n[Hn],o,e,a,s)}}Symbol;let Go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=q6}return n})();const H6=Go,z6=class extends H6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function j6(n,e,t,r){const i=e.tView,a=Fy(n,i,t,4096&n[He]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ro]=n[e.index];const l=n[Ei];return null!==l&&(a[Ei]=l.createEmbeddedView(i)),Y0(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new bp(i)}};function q6(){return Xy(nr(),re())}function Xy(n,e){return 4&n.type?new z6(e,n,pd(n,e)):null}let Ms=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Y6}return n})();function Y6(){return function WN(n,e){let t;const r=e[n.index];return Dr(r)?t=r:(t=TM(r,e,null,n),e[n.index]=t,Vy(e,t)),KN(t,e,n,r),new qN(t,n,e)}(nr(),re())}const J6=Ms,qN=class extends J6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pd(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xl(this._hostTNode,this._hostLView);if(Zl(e)){const t=ic(e,this._hostLView),r=Na(e);return new Pr(t[ge].data[r+8],t)}return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=GN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function ac(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?e:new Dp(ht(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const C=(o?l:this.parentInjector).get(Hi,null);C&&(s=C)}ht(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Ew(n){return Dr(n[Kt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[Kt],f=new qN(l,l[Hn],l[Kt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return $6(a,i,o,!r),e.attachToViewContainerRef(),Ba(wC(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=GN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=_y(this._lContainer,t);r&&(uc(wC(this._lContainer),t),n0(r[ge],r))}detach(e){const t=this._adjustIndex(e,-1),r=_y(this._lContainer,t);return r&&null!=uc(wC(this._lContainer),t)?new bp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function GN(n){return n[8]}function wC(n){return n[8]||(n[8]=[])}let KN=function ZN(n,e,t,r){if(n[ss])return;let i;i=8&t.type?Mt(r):function X6(n,e){const t=n[ze],r=t.createComment(""),i=Hr(e,n);return fc(t,yy(t,i),r,function I$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ss]=i};function iO(n,e){return Xy(n,e)}const nv=new ue("Application Initializer");let NC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=pe(nv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Np(s))t.push(s);else if(ax(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Wo=new ue("LocaleId",{providedIn:"root",factory:()=>pe(Wo,rt.Optional|rt.SkipSelf)||function P5(){return typeof $localize<"u"&&$localize.locale||xd}()});let rv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class x5{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let wO=(()=>{class n{compileModuleSync(t){return new yC(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=zo(br(t).declarations).reduce((o,a)=>{const u=ht(a);return u&&o.push(new Dp(u)),o},[]);return new x5(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const DO=new ue(""),sv=new ue("");let LC,FC=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,LC||(function eG(n){LC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ee(vt),ee(VC),ee(sv))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),VC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return LC?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),qa=null;const AO=new ue("AllowMultipleToken"),UC=new ue("PlatformDestroyListeners"),BC=new ue("appBootstrapListener");class PO{constructor(e,t){this.name=e,this.token=t}}function MO(n,e,t=[]){const r=`Platform: ${e}`,i=new ue(r);return(s=[])=>{let o=jC();if(!o||o.injector.get(AO,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function rG(n){if(qa&&!qa.get(AO,!1))throw new N(400,!1);(function SO(){!function dw(n){Fl=n}(()=>{throw new N(600,!1)})})(),qa=n;const e=n.get(NO);(function RO(n){n.get(VR,null)?.forEach(t=>t())})(n)}(function xO(n=[],e){return Rr.create({name:e,providers:[{provide:v0,useValue:"platform"},{provide:UC,useValue:new Set([()=>qa=null])},...n]})}(a,r))}return function sG(n){const e=jC();if(!e)throw new N(401,!1);return e}()}}function jC(){return qa?.get(NO)??null}let NO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function oG(n="zone.js",e){return"noop"===n?new UH:"zone.js"===n?new vt(e):n}(r?.ngZone,function OO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function m6(n,e,t){return new _C(n,e,t)}(t.moduleType,this.injector,function UO(n){return[{provide:vt,useFactory:n},{provide:mp,multi:!0,useFactory:()=>{const e=pe(uG,{optional:!0});return()=>e.initialize()}},{provide:LO,useFactory:aG},{provide:eM,useFactory:tM}]}(()=>i)),o=s.injector.get(Ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{ov(this._modules,s),a.unsubscribe()})}),function kO(n,e,t){try{const r=t();return Np(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(NC);return a.runInitializers(),a.donePromise.then(()=>(function nN(n){vi(n,"Expected localeId to be defined"),"string"==typeof n&&(tN=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Wo,xd)||xd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=FO({},r);return function tG(n,e,t){const r=new yC(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(oo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new N(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new N(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(UC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Rr))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function FO(n,e){return Array.isArray(e)?e.reduce(FO,n):{...n,...e}}let oo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(LO),this.zoneIsStable=pe(eM),this.componentTypes=[],this.components=[],this.isStable=pe(rv).hasPendingTasks.pipe(dt(t=>t?q(!1):this.zoneIsStable),nn(),Ue()),this._injector=pe(Hi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof HR;if(!this._injector.get(NC).done)throw!i&&function Gs(n){const e=ht(n)||Mn(n)||$n(n);return null!==e&&e.standalone}(t),new N(405,!1);let o;o=i?t:this._injector.get(Ep).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function nG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ec),l=o.create(Rr.NULL,[],r||o.selector,a),f=l.location.nativeElement,g=l.injector.get(DO,null);return g?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),ov(this.components,l),g?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new N(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ov(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(BC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ov(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new N(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ov(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const LO=new ue("",{providedIn:"root",factory:()=>pe(Ho).handleError.bind(void 0)});function aG(){const n=pe(vt),e=pe(Ho);return t=>n.runOutsideAngular(()=>e.handleError(t))}let uG=(()=>{class n{constructor(){this.zone=pe(vt),this.applicationRef=pe(oo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let av=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=lG}return n})();function lG(n){return function dG(n,e,t){if(ba(n)&&!t){const r=Ar(n.index,e);return new bp(r,r)}return 47&n.type?new bp(e[yn],e):null}(nr(),re(),16==(16&n))}class HO{constructor(){}supports(e){return jy(e)}create(e){return new _G(e)}}const mG=(n,e)=>e;class _G{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<qO(r,i,s)?t:r,a=qO(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,E=y+m;f<=E&&E<l&&(s[m]=y+1)}s[o.previousIndex]=f-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!jy(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Z4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new yG(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new zO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class yG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class zO{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new vG,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qO(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function WO(){return new lv([new HO])}let lv=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:WO});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||WO()),deps:[[n,new $a,new ja]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new N(901,!1)}}return n})();const TG=MO(null,"core",[]);let bG=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ee(oo))};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({})}return n})();function kd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let KC=null;function Ga(){return KC}class UG{}const sr=new ue("DocumentToken");let ZC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return pe(jG)},providedIn:"platform"})}return n})();const BG=new ue("Location Initialized");let jG=(()=>{class n extends ZC{constructor(){super(),this._doc=pe(sr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ga().getBaseHref(this._doc)}onPopState(t){const r=Ga().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ga().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function QC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function r1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ko(n){return n&&"?"!==n[0]?"?"+n:n}let wc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return pe(s1)},providedIn:"root"})}return n})();const i1=new ue("appBaseHref");let s1=(()=>{class n extends wc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??pe(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(ZC),ee(i1,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$G=(()=>{class n extends wc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=QC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(ZC),ee(i1,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),YC=(()=>{class n{constructor(t){this._subject=new Cn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function qG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(r1(o1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ko(r))}normalize(t){return n.stripTrailingSlash(function zG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,o1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ko;static#t=this.joinWithSlash=QC;static#n=this.stripTrailingSlash=r1;static#r=this.\u0275fac=function(r){return new(r||n)(ee(wc))};static#i=this.\u0275prov=de({token:n,factory:function(){return function HG(){return new YC(ee(wc))}()},providedIn:"root"})}return n})();function o1(n){return n.replace(/\/index.html$/,"")}var hv=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(hv||{}),Nn=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Nn||{});function gs(n,e){const t=ci(n),r=t[Zt.NumberSymbols][e];if(typeof r>"u"){if(e===Nn.CurrencyDecimal)return t[Zt.NumberSymbols][Nn.Decimal];if(e===Nn.CurrencyGroup)return t[Zt.NumberSymbols][Nn.Group]}return r}const y9=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function sT(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function g1(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class M9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wv=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new M9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),y1(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{y1(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(G(Ms),G(Go),G(lv))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function y1(n,e){n.context.$implicit=e.item}let Wa=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new x9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){v1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){v1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(G(Ms),G(Go))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class x9{constructor(){this.$implicit=null,this.ngIf=null}}function v1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ot(e)}'.`)}let w1=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function lT(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function T9(n,e,t){return function rT(n,e,t,r,i,s,o=!1){let a="",u=!1;if(isFinite(n)){let l=function D9(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(l=function b9(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let f=e.minInt,g=e.minFrac,m=e.maxFrac;if(s){const P=s.match(y9);if(null===P)throw new Error(`${s} is not a valid digit info`);const O=P[1],W=P[3],ce=P[5];null!=O&&(f=sT(O)),null!=W&&(g=sT(W)),null!=ce?m=sT(ce):null!=W&&g>m&&(m=g)}!function A9(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let g=o;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let g=1;g<o;g++)r[g]=0}if(a>=5)if(o-1<0){for(let g=0;g>o;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const l=e+n.integerLen,f=r.reduceRight(function(g,m,y,E){return E[y]=(m+=g)<10?m:m-10,u&&(0===E[y]&&y>=l?E.pop():u=!1),m>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}(l,g,m);let y=l.digits,E=l.integerLen;const w=l.exponent;let C=[];for(u=y.every(P=>!P);E<f;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?C=y.splice(E,y.length):(C=y,y=[0]);const R=[];for(y.length>=e.lgSize&&R.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)R.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&R.unshift(y.join("")),a=R.join(gs(t,r)),C.length&&(a+=gs(t,i)+C.join("")),w&&(a+=gs(t,Nn.Exponential)+"+"+w)}else a=gs(t,Nn.Infinity);return a=n<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function iT(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let f=0;f<u.length;f++){const g=u.charAt(f);"0"===g?t.minFrac=t.maxFrac=f+1:"#"===g?t.maxFrac=f+1:t.posSuf+=g}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const f=i.length-t.posPre.length-t.posSuf.length,g=s.indexOf("#");t.negPre=s.substring(0,g).replace(/'/g,""),t.negSuf=s.slice(g+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function JC(n,e){return ci(n)[Zt.NumberFormats][e]}(e,hv.Decimal),gs(e,Nn.MinusSign)),e,Nn.Group,Nn.Decimal,t)}(function dT(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function Ns(n,e){return new N(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(G(Wo,16))};static#t=this.\u0275pipe=jn({name:"number",type:n,pure:!0,standalone:!0})}return n})();let n8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({})}return n})();const C1="browser";function T1(n){return n===C1}function Cv(n){return"server"===n}let o8=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new a8(ee(sr),window)})}return n})();class a8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function u8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class b1{}class M8 extends UG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pT extends M8{static makeCurrent(){!function LG(n){KC||(KC=n)}(new pT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function x8(){return Qp=Qp||document.querySelector("base"),Qp?Qp.getAttribute("href"):null}();return null==t?null:function N8(n){Dv=Dv||document.createElement("a"),Dv.setAttribute("href",n);const e=Dv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return g1(document.cookie,e)}}let Dv,Qp=null,k8=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const gT=new ue("EventManagerPlugins");let R1=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new N(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gT),ee(vt))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class M1{constructor(e){this._doc=e}}const mT="ng-app-id";let x1=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${mT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(mT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(mT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr),ee(Sy),ee(UR,8),ee(Ss))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const _T={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yT=/%COMP%/g,U8=new ue("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function O1(n,e){return e.map(t=>t.replace(yT,n))}let vT=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Cv(a),this.defaultRenderer=new ET(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wn.ShadowDom&&(r={...r,encapsulation:wn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof F1?i.applyToHost(t):i instanceof IT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case wn.Emulated:s=new F1(u,l,r,this.appId,f,o,a,g);break;case wn.ShadowDom:return new H8(u,l,t,r,o,a,this.nonce,g);default:s=new IT(u,l,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(R1),ee(x1),ee(Sy),ee(U8),ee(sr),ee(Ss),ee(vt),ee(UR))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class ET{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_T[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(k1(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(k1(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new N(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=_T[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_T[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ha.DashCase|Ha.Important)?e.style.setProperty(t,r,i&Ha.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ha.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ga().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function k1(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class H8 extends ET{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=O1(i.id,i.styles);for(const f of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class IT extends ET{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?O1(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class F1 extends IT{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function B8(n){return"_ngcontent-%COMP%".replace(yT,n)}(l),this.hostAttr=function j8(n){return"_nghost-%COMP%".replace(yT,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let z8=(()=>{class n extends M1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const V1=["alt","control","meta","shift"],q8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let W8=(()=>{class n extends M1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ga().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),V1.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=q8[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),V1.forEach(o=>{o!==i&&(0,G8[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const U1=[{provide:Ss,useValue:C1},{provide:VR,useValue:function K8(){pT.makeCurrent()},multi:!0},{provide:sr,useFactory:function Q8(){return function P$(n){l0=n}(document),document},deps:[]}],Y8=MO(TG,"browser",U1),J8=new ue(""),B1=[{provide:sv,useClass:class O8{addToWindow(e){Rt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new N(5103,!1);return s},Rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rt.getAllAngularRootElements=()=>e.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const i=Rt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ga().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:DO,useClass:FC,deps:[vt,VC,sv]},{provide:FC,useClass:FC,deps:[vt,VC,sv]}],j1=[{provide:v0,useValue:"root"},{provide:Ho,useFactory:function Z8(){return new Ho},deps:[]},{provide:gT,useClass:z8,multi:!0,deps:[sr,vt,Ss]},{provide:gT,useClass:W8,multi:!0,deps:[sr]},vT,x1,R1,{provide:Ip,useExisting:vT},{provide:b1,useClass:k8,deps:[]},[]];let $1=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ee(J8,12))};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({providers:[...j1,...B1],imports:[n8,bG]})}return n})(),H1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr))};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new r:function eW(){return new H1(ee(sr))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let G1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new(r||n):ee(W1),i},providedIn:"root"})}return n})(),W1=(()=>{class n extends G1{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case $i.NONE:return r;case $i.HTML:return eo(r,"HTML")?ji(r):AR(this._doc,String(r)).toString();case $i.STYLE:return eo(r,"Style")?ji(r):r;case $i.SCRIPT:if(eo(r,"Script"))return ji(r);throw new N(5200,!1);case $i.URL:return eo(r,"URL")?ji(r):Cy(String(r));case $i.RESOURCE_URL:if(eo(r,"ResourceURL"))return ji(r);throw new N(5201,!1);default:throw new N(5202,!1)}}bypassSecurityTrustHtml(t){return function F$(n){return new R$(n)}(t)}bypassSecurityTrustStyle(t){return function V$(n){return new M$(n)}(t)}bypassSecurityTrustScript(t){return function L$(n){return new x$(n)}(t)}bypassSecurityTrustUrl(t){return function U$(n){return new N$(n)}(t)}bypassSecurityTrustResourceUrl(t){return function B$(n){return new O$(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr))};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new r:function iW(n){return new W1(n.get(sr))}(ee(Rr)),i},providedIn:"root"})}return n})();const{isArray:oW}=Array,{getPrototypeOf:aW,prototype:uW,keys:cW}=Object;function Z1(n){if(1===n.length){const e=n[0];if(oW(e))return{args:e,keys:null};if(function lW(n){return n&&"object"==typeof n&&aW(n)===uW}(e)){const t=cW(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:dW}=Array;function CT(n){return ve(e=>function hW(n,e){return dW(e)?n(...e):n(e)}(n,e))}function Q1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function TT(...n){const e=Bs(n),t=pa(n),{args:r,keys:i}=Z1(n);if(0===r.length)return A([],e);const s=new nt(function fW(n,e,t=Pn){return r=>{Y1(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Y1(e,()=>{const l=A(n[u],e);let f=!1;l.subscribe(_e(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Q1(i,o):Pn));return t?s.pipe(CT(t)):s}function Y1(n,e,t){n?cr(t,n,e):e()}const Av=Fe(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Yp(...n){return function pW(){return ki(1)}()(A(n,Bs(n)))}function Sv(n){return new nt(e=>{hn(n()).subscribe(e)})}function Cc(n,e){const t=I(n)?n:()=>n,r=i=>i.error(t());return new nt(e?i=>e.schedule(r,0,i):r)}function bT(){return H((n,e)=>{let t=null;n._refCount++;const r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class DT extends nt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ne(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new It;const t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=It.EMPTY)}return e}refCount(){return bT()(this)}}function Pi(n){return n<=0?()=>Un:H((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pv(...n){const e=Bs(n);return H((t,r)=>{(e?Yp(n,t,e):Yp(n,t)).subscribe(r)})}function fr(n,e){return H((t,r)=>{let i=0;t.subscribe(_e(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Rv(n){return H((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function J1(n=gW){return H((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gW(){return new Av}function Za(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fr((i,s)=>n(i,s,r)):Pn,Pi(1),t?Rv(e):J1(()=>new Av))}function Vd(n,e){return I(e)?Bt(n,e,1):Bt(n,1)}function Wn(n,e,t){const r=I(n)||e||t?{next:n,error:e,complete:t}:n;return r?H((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(_e(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Pn}function Qa(n){return H((e,t)=>{let s,r=null,i=!1;r=e.subscribe(_e(t,void 0,void 0,o=>{s=hn(n(o,Qa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Mv(n,e){return H(function mW(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(_e(o,f=>{const g=l++;u=a?n(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function AT(n){return n<=0?()=>Un:H((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function X1(n){return ve(()=>n)}function Jp(n){return H((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const et="primary",Xp=Symbol("RouteTitle");class vW{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ld(n){return new vW(n)}function EW(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ao(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ek(n[i],e[i]))return!1;return!0}function ek(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function tk(n){return n.length>0?n[n.length-1]:null}function Ya(n){return function sW(n){return!!n&&(n instanceof nt||I(n.lift)&&I(n.subscribe))}(n)?n:Np(n)?A(Promise.resolve(n)):q(n)}const wW={exact:function ik(n,e,t){if(!Tc(n.segments,e.segments)||!xv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ik(n.children[r],e.children[r],t))return!1;return!0},subset:sk},nk={exact:function CW(n,e){return ao(n,e)},subset:function TW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ek(n[t],e[t]))},ignored:()=>!0};function rk(n,e,t){return wW[t.paths](n.root,e.root,t.matrixParams)&&nk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sk(n,e,t){return ok(n,e,e.segments,t)}function ok(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Tc(i,t)||e.hasChildren()||!xv(i,t,r))}if(n.segments.length===t.length){if(!Tc(n.segments,t)||!xv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sk(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Tc(n.segments,i)&&xv(n.segments,i,r)&&n.children[et])&&ok(n.children[et],e,s,r)}}function xv(n,e,t){return e.every((r,i)=>nk[t](n[i].parameters,r.parameters))}class Ud{constructor(e=new Ft([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return AW.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nv(this)}}class eg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ld(this.parameters)),this._parameterMap}toString(){return ck(this)}}function Tc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return new ST},providedIn:"root"})}return n})();class ST{parse(e){const t=new LW(e);return new Ud(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ng(e.root,!0)}`,r=function RW(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ov(t)}=${Ov(i)}`).join("&"):`${Ov(t)}=${Ov(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function SW(n){return encodeURI(n)}(e.fragment)}`:""}`}}const AW=new ST;function Nv(n){return n.segments.map(e=>ck(e)).join("/")}function ng(n,e){if(!n.hasChildren())return Nv(n);if(e){const t=n.children[et]?ng(n.children[et],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==et&&r.push(`${i}:${ng(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function DW(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===et&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==et&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===et?[ng(n.children[et],!1)]:[`${i}:${ng(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[et]?`${Nv(n)}/${t[0]}`:`${Nv(n)}/(${t.join("//")})`}}function ak(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ov(n){return ak(n).replace(/%3B/gi,";")}function PT(n){return ak(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kv(n){return decodeURIComponent(n)}function uk(n){return kv(n.replace(/\+/g,"%20"))}function ck(n){return`${PT(n.path)}${function PW(n){return Object.keys(n).map(e=>`;${PT(e)}=${PT(n[e])}`).join("")}(n.parameters)}`}const MW=/^[^\/()?;#]+/;function RT(n){const e=n.match(MW);return e?e[0]:""}const xW=/^[^\/()?;=#]+/,OW=/^[^=?&#]+/,FW=/^[^&#]+/;class LW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[et]=new Ft(e,t)),r}parseSegment(){const e=RT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(e),new eg(kv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function NW(n){const e=n.match(xW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=RT(this.remaining);i&&(r=i,this.capture(r))}e[kv(t)]=kv(r)}parseQueryParam(e){const t=function kW(n){const e=n.match(OW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function VW(n){const e=n.match(FW);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=uk(t),s=uk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=RT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new N(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=et);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[et]:new Ft([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new N(4011,!1)}}function lk(n){return n.segments.length>0?new Ft([],{[et]:n}):n}function dk(n){const e={};for(const r of Object.keys(n.children)){const s=dk(n.children[r]);if(r===et&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UW(n){if(1===n.numberOfChildren&&n.children[et]){const e=n.children[et];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}function bc(n){return n instanceof Ud}function hk(n){let e;const i=lk(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new Ft(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function fk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return MT(i,i,i,t,r);const s=function jW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new gk(t,e,r)}(e);if(s.toRoot())return MT(i,i,new Ft([],{}),t,r);const o=function $W(n,e,t){if(n.isAbsolute)return new Vv(e,!0,0);if(!t)return new Vv(e,!1,NaN);if(null===t.parent)return new Vv(t,!0,0);const r=Fv(n.commands[0])?0:1;return function HW(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new N(4005,!1);i=r.segments.length}return new Vv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?ig(o.segmentGroup,o.index,s.commands):mk(o.segmentGroup,o.index,s.commands);return MT(i,o.segmentGroup,a,t,r)}function Fv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rg(n){return"object"==typeof n&&null!=n&&n.outlets}function MT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:pk(n,e,t);const a=lk(dk(o));return new Ud(a,s,i)}function pk(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:pk(s,e,t)}),new Ft(n.segments,r)}class gk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fv(r[0]))throw new N(4003,!1);const i=r.find(rg);if(i&&i!==tk(r))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mk(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return ig(n,e,t);const r=function qW(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(rg(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!yk(u,l,o))return s;r+=2}else{if(!yk(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ft(n.segments.slice(0,r.pathIndex),{});return s.children[et]=new Ft(n.segments.slice(r.pathIndex),n.children),ig(s,0,i)}return r.match&&0===i.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?xT(n,e,t):r.match?ig(n,0,i):xT(n,e,t)}function ig(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function zW(n){return rg(n[0])?n[0].outlets:{[et]:n}}(t),i={};if(Object.keys(r).some(s=>s!==et)&&n.children[et]&&1===n.numberOfChildren&&0===n.children[et].segments.length){const s=ig(n.children[et],e,t);return new Ft(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=mk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ft(n.segments,i)}}function xT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(rg(s)){const u=GW(s.outlets);return new Ft(r,u)}if(0===i&&Fv(t[0])){r.push(new eg(n.segments[e].path,_k(t[0]))),i++;continue}const o=rg(s)?s.outlets[et]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Fv(a)?(r.push(new eg(o,_k(a))),i+=2):(r.push(new eg(o,{})),i++)}return new Ft(r,{})}function GW(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=xT(new Ft([],{}),0,r))}),e}function _k(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yk(n,e,t){return n==t.path&&ao(e,t.parameters)}const sg="imperative";class uo{constructor(e,t){this.id=e,this.url=t}}class Lv extends uo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ja extends uo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class og extends uo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bd extends uo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Uv extends uo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vk extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WW extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KW extends uo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ZW extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QW extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class JW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class XW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ek{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class NT{}class OT{constructor(e){this.url=e}}class r7{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ag,this.attachRef=null}}let ag=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new r7,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ik{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=FT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return FT(e,this._root).map(t=>t.value)}}function kT(n,e){if(n===e.value)return e;for(const t of e.children){const r=kT(n,t);if(r)return r}return null}function FT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=FT(n,t);if(r.length)return r.unshift(e),r}return[]}class Yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wk extends Ik{constructor(e,t){super(e),this.snapshot=t,VT(this,e)}toString(){return this.snapshot.toString()}}function Ck(n,e){const t=function i7(n,e){const o=new Bv([],{},{},"",{},et,e,null,{});return new bk("",new Yo(o,[]))}(0,e),r=new M([new eg("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new Dc(r,i,o,a,s,et,e,t.root);return u.snapshot=t.root,new wk(new Yo(u,[]),t)}class Dc{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ve(l=>l[Xp]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ve(e=>Ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ve(e=>Ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function s7(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Bv{get title(){return this.data?.[Xp]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bk extends Ik{constructor(e,t){super(t),this.url=e,VT(this,t)}toString(){return Dk(this._root)}}function VT(n,e){e.value._routerState=n,e.children.forEach(t=>VT(n,t))}function Dk(n){const e=n.children.length>0?` { ${n.children.map(Dk).join(", ")} } `:"";return`${n.value}${e}`}function LT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ao(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ao(e.params,t.params)||n.paramsSubject.next(t.params),function IW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ao(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ao(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function UT(n,e){const t=ao(n.params,e.params)&&function bW(n,e){return Tc(n,e)&&n.every((t,r)=>ao(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||UT(n.parent,e.parent))}let BT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=et,this.activateEvents=new Cn,this.deactivateEvents=new Cn,this.attachEvents=new Cn,this.detachEvents=new Cn,this.parentContexts=pe(ag),this.location=pe(Ms),this.changeDetector=pe(av),this.environmentInjector=pe(Hi),this.inputBinder=pe(jv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new o7(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wi]})}return n})();class o7{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Dc?this.route:e===ag?this.childContexts:this.parent.get(e,t)}}const jv=new ue("");let Ak=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=TT([r.queryParams,r.params,r.data]).pipe(dt(([s,o,a],u)=>(a={...s,...o,...a},0===u?q(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function VG(n){const e=ht(n);if(!e)return null;const t=new Dp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function ug(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function u7(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ug(n,r,i);return ug(n,r)})}(n,e,t);return new Yo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ug(n,a)),o}}const r=function c7(n){return new Dc(new M(n.url),new M(n.params),new M(n.queryParams),new M(n.fragment),new M(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ug(n,s));return new Yo(r,i)}}const jT="ngNavigationCancelingError";function Sk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=bc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Pk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Pk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[jT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rk(n){return n&&n[jT]}let Mk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Tr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Jy],decls:1,vars:0,template:function(r,i){1&r&&it(0,"router-outlet")},dependencies:[BT],encapsulation:2})}return n})();function $T(n){const e=n.children&&n.children.map($T),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==et&&(t.component=Mk),t}function Os(n){return n.outlet||et}function cg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _7{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),LT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=jd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=jd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=jd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=jd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new n7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new e7(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(LT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),LT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=cg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class xk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $v{constructor(e,t){this.component=e,this.route=t}}function y7(n,e,t){const r=n._root;return lg(r,e?e._root:null,t,[r.value])}function $d(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function rw(n){return null!==hl(n)}(n)?e.get(n):n:r}function lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=jd(e);return n.children.forEach(o=>{(function E7(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function I7(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tc(n.url,e.url)||!ao(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UT(n,e)||!ao(n.queryParams,e.queryParams);default:return!UT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new xk(r)):(s.data=o.data,s._resolvedData=o._resolvedData),lg(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $v(a.outlet.component,o))}else o&&dg(e,a,i),i.canActivateChecks.push(new xk(r)),lg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>dg(a,t.getContext(o),i)),i}function dg(n,e,t){const r=jd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{dg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new $v(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hg(n){return"function"==typeof n}function Nk(n){return n instanceof Av||"EmptyError"===n?.name}const Hv=Symbol("INITIAL_VALUE");function Hd(){return dt(n=>TT(n.map(e=>e.pipe(Pi(1),Pv(Hv)))).pipe(ve(e=>{for(const t of e)if(!0!==t){if(t===Hv)return Hv;if(!1===t||t instanceof Ud)return t}return!0}),fr(e=>e!==Hv),Pi(1)))}function Ok(n){return function es(...n){return ts(n)}(Wn(e=>{if(bc(e))throw Sk(0,e)}),ve(e=>!0===e))}class zv{constructor(e){this.segmentGroup=e||null}}class kk{constructor(e){this.urlTree=e}}function zd(n){return Cc(new zv(n))}function Fk(n){return Cc(new kk(n))}class j7{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new N(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return q(r);if(i.numberOfChildren>1||!i.children[et])return Cc(new N(4e3,!1));i=i.children[et]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ud(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ft(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new N(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const HT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $7(n,e,t,r,i){const s=zT(n,e,t);return s.matched?(r=function d7(n,e){return n.providers&&!n._injector&&(n._injector=vC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function L7(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?q(i.map(o=>{const a=$d(o,n);return Ya(function A7(n){return n&&hg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hd(),Ok()):q(!0)}(r,e,t).pipe(ve(o=>!0===o?s:{...HT}))):q(s)}function zT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...HT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||EW)(t,n,e);if(!i)return{...HT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Vk(n,e,t,r){return t.length>0&&function q7(n,e,t){return t.some(r=>qv(n,e,r)&&Os(r)!==et)}(n,t,r)?{segmentGroup:new Ft(e,z7(r,new Ft(t,n.children))),slicedSegments:[]}:0===t.length&&function G7(n,e,t){return t.some(r=>qv(n,e,r))}(n,t,r)?{segmentGroup:new Ft(n.segments,H7(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ft(n.segments,n.children),slicedSegments:t}}function H7(n,e,t,r,i){const s={};for(const o of r)if(qv(n,t,o)&&!i[Os(o)]){const a=new Ft([],{});s[Os(o)]=a}return{...i,...s}}function z7(n,e){const t={};t[et]=e;for(const r of n)if(""===r.path&&Os(r)!==et){const i=new Ft([],{});t[Os(r)]=i}return t}function qv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Q7{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new j7(this.urlSerializer,this.urlTree)}noMatchError(e){return new N(4002,!1)}recognize(){const e=Vk(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,et).pipe(Qa(t=>{if(t instanceof kk)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof zv?this.noMatchError(t):t}),ve(t=>{const r=new Bv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},et,this.rootComponentType,null,{}),i=new Yo(r,t),s=new bk("",i),o=function BW(n,e,t=null,r=null){return fk(hk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,et).pipe(Qa(r=>{throw r instanceof zv?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Tk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(Vd(s=>{const o=r.children[s],a=function g7(n,e){const t=n.filter(r=>Os(r)===e);return t.push(...n.filter(r=>Os(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Mv((s,o)=>(s.push(...o),s)),Rv(null),function _W(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fr((i,s)=>n(i,s,r)):Pn,AT(1),t?Rv(e):J1(()=>new Av))}(),Bt(s=>{if(null===s)return zd(r);const o=Lk(s);return function Y7(n){n.sort((e,t)=>e.value.outlet===et?-1:t.value.outlet===et?1:e.value.outlet.localeCompare(t.value.outlet))}(o),q(o)}))}processSegment(e,t,r,i,s,o){return A(t).pipe(Vd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Qa(u=>{if(u instanceof zv)return q(null);throw u}))),Za(a=>!!a),Qa(a=>{if(Nk(a))return function K7(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?q([]):zd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function W7(n,e,t,r){return!!(Os(n)===r||r!==et&&qv(e,t,n))&&("**"===n.path||zT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):zd(i):zd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fk(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Bt(o=>{const a=new Ft(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=zT(t,i,s);if(!a)return zd(t);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?Fk(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Bt(m=>this.processSegment(e,r,t,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?tk(i).parameters:{};a=q({snapshot:new Bv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uk(r),Os(r),r.component??r._loadedComponent??null,r,Bk(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$7(t,r,i,e).pipe(ve(({matched:u,consumedSegments:l,remainingSegments:f,parameters:g})=>u?{snapshot:new Bv(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uk(r),Os(r),r.component??r._loadedComponent??null,r,Bk(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(dt(u=>null===u?zd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(dt(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:w}=Vk(t,m,y,l);if(0===w.length&&E.hasChildren())return this.processChildren(f,l,E).pipe(ve(R=>null===R?null:[new Yo(g,R)]));if(0===l.length&&0===w.length)return q([new Yo(g,[])]);const C=Os(r)===s;return this.processSegment(f,l,E,w,C?et:s,!0).pipe(ve(R=>[new Yo(g,R)]))}))))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?q({routes:t._loadedRoutes,injector:t._loadedInjector}):function V7(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?q(!0):q(i.map(o=>{const a=$d(o,n);return Ya(function C7(n){return n&&hg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hd(),Ok())}(e,t,r).pipe(Bt(i=>i?this.configLoader.loadChildren(e,t).pipe(Wn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function B7(n){return Cc(Pk(!1,3))}())):q({routes:[],injector:e})}}function J7(n){const e=n.value.routeConfig;return e&&""===e.path}function Lk(n){const e=[],t=new Set;for(const r of n){if(!J7(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lk(r.children);e.push(new Yo(r.value,i))}return e.filter(r=>!t.has(r))}function Uk(n){return n.data||{}}function Bk(n){return n.resolve||{}}function jk(n){return"string"==typeof n.title||null===n.title}function qT(n){return dt(e=>{const t=n(e);return t?A(t).pipe(ve(()=>e)):q(e)})}const qd=new ue("ROUTES");let GT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=pe(wO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ya(t.loadComponent()).pipe(ve($k),Wn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Jp(()=>{this.componentLoaders.delete(t)})),i=new DT(r,()=>new j).pipe(bT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function sK(n,e,t,r){return Ya(n.loadChildren()).pipe(ve($k),Bt(i=>i instanceof AN||Array.isArray(i)?q(i):A(e.compileModuleAsync(i))),ve(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(qd,[],{optional:!0,self:!0}).flat()),{routes:o.map($T),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Jp(()=>{this.childrenLoaders.delete(r)})),o=new DT(s,()=>new j).pipe(bT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $k(n){return function oK(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Gv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=pe(GT),this.environmentInjector=pe(Hi),this.urlSerializer=pe(tg),this.rootContexts=pe(ag),this.inputBindingEnabled=null!==pe(jv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new JW(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new YW(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fr(s=>0!==s.id),ve(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),dt(s=>{this.currentTransition=s;let o=!1,a=!1;return q(s).pipe(Wn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dt(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new Bd(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),Un}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(dt(m=>{const y=this.transitions?.getValue();return this.events.next(new Lv(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Un:Promise.resolve(m)}),function X7(n,e,t,r,i,s){return Bt(o=>function Z7(n,e,t,r,i,s,o="emptyOnly"){return new Q7(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(ve(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wn(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new vk(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:E,restoredState:w,extras:C}=u,R=new Lv(m,this.urlSerializer.serialize(y),E,w);this.events.next(R);const P=Ck(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:P,urlAfterRedirects:y,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},q(s)}{const m="";return this.events.next(new Bd(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),Un}}),Wn(u=>{const l=new WW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ve(u=>(this.currentTransition=s={...u,guards:y7(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function P7(n,e){return Bt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?q({...t,guardsResult:!0}):function R7(n,e,t,r){return A(n).pipe(Bt(i=>function F7(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?q(s.map(a=>{const u=cg(e)??i,l=$d(a,u);return Ya(function D7(n){return n&&hg(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(Za())})).pipe(Hd()):q(!0)}(i.component,i.route,t,e,r)),Za(i=>!0!==i,!0))}(o,r,i,n).pipe(Bt(a=>a&&function w7(n){return"boolean"==typeof n}(a)?function M7(n,e,t,r){return A(e).pipe(Vd(i=>Yp(function N7(n,e){return null!==n&&e&&e(new XW(n)),q(!0)}(i.route.parent,r),function x7(n,e){return null!==n&&e&&e(new t7(n)),q(!0)}(i.route,r),function k7(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function v7(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Sv(()=>q(o.guards.map(u=>{const l=cg(o.node)??t,f=$d(u,l);return Ya(function b7(n){return n&&hg(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Za())})).pipe(Hd())));return q(s).pipe(Hd())}(n,i.path,t),function O7(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return q(!0);const i=r.map(s=>Sv(()=>{const o=cg(e)??t,a=$d(s,o);return Ya(function T7(n){return n&&hg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Za())}));return q(i).pipe(Hd())}(n,i.route,t))),Za(i=>!0!==i,!0))}(r,s,n,e):q(a)),ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Wn(u=>{if(s.guardsResult=u.guardsResult,bc(u.guardsResult))throw Sk(0,u.guardsResult);const l=new KW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),fr(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),qT(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(Wn(l=>{const f=new ZW(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),dt(l=>{let f=!1;return q(l).pipe(function eK(n,e){return Bt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let s=0;return A(i).pipe(Vd(o=>function tK(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!jk(i)&&(s[Xp]=i.title),function nK(n,e,t,r){const i=function rK(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return q({});const s={};return A(i).pipe(Bt(o=>function iK(n,e,t,r){const i=cg(e)??r,s=$d(n,i);return Ya(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Za(),Wn(a=>{s[o]=a}))),AT(1),X1(s),Qa(o=>Nk(o)?Un:Cc(o)))}(s,n,e,r).pipe(ve(o=>(n._resolvedData=o,n.data=Tk(n,t).resolve,i&&jk(i)&&(n.data[Xp]=i.title),null)))}(o.route,r,n,e)),Wn(()=>s++),AT(1),Bt(o=>s===i.length?q(t):Un))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wn({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Wn(l=>{const f=new QW(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),qT(u=>{const l=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Wn(m=>{f.component=m}),ve(()=>{})));for(const m of f.children)g.push(...l(m));return g};return TT(l(u.targetSnapshot.root)).pipe(Rv(),Pi(1))}),qT(()=>this.afterPreactivation()),ve(u=>{const l=function a7(n,e,t){const r=ug(n,e._root,t?t._root:void 0);return new wk(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),Wn(()=>{this.events.next(new NT)}),((n,e,t,r)=>ve(i=>(new _7(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Pi(1),Wn({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ja(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function yW(n){return H((e,t)=>{hn(n).subscribe(_e(t,()=>t.complete(),Te)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Wn(u=>{throw u}))),Jp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Qa(u=>{if(a=!0,Rk(u))this.events.next(new og(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function l7(n){return Rk(n)&&bc(n.url)}(u)?this.events.next(new OT(u.url)):s.resolve(!1);else{this.events.next(new Uv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){s.reject(l)}}return Un}))}))}cancelNavigationTransition(t,r,i){const s=new og(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hk(n){return n!==sg}let zk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===et);return r}getResolvedTitleForRoute(t){return t.data[Xp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return pe(aK)},providedIn:"root"})}return n})(),aK=(()=>{class n extends zk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(H1))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return pe(lK)},providedIn:"root"})}return n})();class cK{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lK=(()=>{class n extends cK{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Wv=new ue("",{providedIn:"root",factory:()=>({})});let dK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return pe(hK)},providedIn:"root"})}return n})(),hK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fg||{});function qk(n,e){n.events.pipe(fr(t=>t instanceof Ja||t instanceof og||t instanceof Uv||t instanceof Bd),ve(t=>t instanceof Ja||t instanceof Bd?fg.COMPLETE:t instanceof og&&(0===t.code||1===t.code)?fg.REDIRECTING:fg.FAILED),fr(t=>t!==fg.REDIRECTING),Pi(1)).subscribe(()=>{e()})}function fK(n){throw n}function pK(n,e,t){return e.parse("/")}const gK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let On=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=pe(IO),this.isNgZoneEnabled=!1,this._events=new j,this.options=pe(Wv,{optional:!0})||{},this.pendingTasks=pe(rv),this.errorHandler=this.options.errorHandler||fK,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||pK,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=pe(dK),this.routeReuseStrategy=pe(uK),this.titleStrategy=pe(zk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pe(qd,{optional:!0})?.flat()??[],this.navigationTransitions=pe(Gv),this.urlSerializer=pe(tg),this.location=pe(YC),this.componentInputBindingEnabled=!!pe(jv,{optional:!0}),this.eventsSubscription=new It,this.isNgZoneEnabled=pe(vt)instanceof vt&&vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ud,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ck(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Gk(r)&&this._events.next(r));if(r instanceof Lv)Hk(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Bd)this.rawUrlTree=i.rawUrl;else if(r instanceof vk){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof NT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof og)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof OT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hk(i.source)};this.scheduleNavigation(s,sg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Uv&&this.restoreHistory(i,!0),r instanceof Ja&&(this.navigated=!0),Gk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($T),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=hk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return fk(g,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,sg,null,r)}navigate(t,r={skipLocationChange:!1}){return function _K(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new N(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...gK}:!1===r?{...mK}:r,bc(t))return rk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return rk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const f=this.pendingTasks.add();return qk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gk(n){return!(n instanceof NT||n instanceof OT)}let pg=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ja&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function PR(n,e,t){return function eH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?SR:cd}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(G(On),G(Dc),function Uo(n){return function Fw(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(wl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(nr(),n)}("tabindex"),G($o),G(zi),G(wc))};static#t=this.\u0275dir=ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Qe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Di("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",kd],skipLocationChange:["skipLocationChange","skipLocationChange",kd],replaceUrl:["replaceUrl","replaceUrl",kd],routerLink:"routerLink"},standalone:!0,features:[$M,wi]})}return n})();class Wk{}let EK=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(fr(t=>t instanceof Ja),Vd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=vC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(ki())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):q(null);const s=i.pipe(Bt(o=>null===o?q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(ki()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(On),ee(wO),ee(Hi),ee(Wk),ee(GT))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WT=new ue("");let Kk=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Lv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ja?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ek&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ek(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function gM(){throw new Error("invalid")}()};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function Jo(n,e){return{\u0275kind:n,\u0275providers:e}}function Qk(){const n=pe(Rr);return e=>{const t=n.get(oo);if(e!==t.components[0])return;const r=n.get(On),i=n.get(Yk);1===n.get(KT)&&r.initialNavigation(),n.get(Jk,null,rt.Optional)?.setUpPreloading(),n.get(WT,null,rt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Yk=new ue("",{factory:()=>new j}),KT=new ue("",{providedIn:"root",factory:()=>1}),Jk=new ue("");function TK(n){return Jo(0,[{provide:Jk,useExisting:EK},{provide:Wk,useExisting:n}])}const Xk=new ue("ROUTER_FORROOT_GUARD"),DK=[YC,{provide:tg,useClass:ST},On,ag,{provide:Dc,useFactory:function Zk(n){return n.routerState.root},deps:[On]},GT,[]];function AK(){return new PO("Router",On)}let eF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[DK,[],{provide:qd,multi:!0,useValue:t},{provide:Xk,useFactory:MK,deps:[[On,new ja,new $a]]},{provide:Wv,useValue:r||{}},r?.useHash?{provide:wc,useClass:$G}:{provide:wc,useClass:s1},{provide:WT,useFactory:()=>{const n=pe(o8),e=pe(vt),t=pe(Wv),r=pe(Gv),i=pe(tg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Kk(i,r,n,e,t)}},r?.preloadingStrategy?TK(r.preloadingStrategy).\u0275providers:[],{provide:PO,multi:!0,useFactory:AK},r?.initialNavigation?xK(r):[],r?.bindToComponentInputs?Jo(8,[Ak,{provide:jv,useExisting:Ak}]).\u0275providers:[],[{provide:tF,useFactory:Qk},{provide:BC,multi:!0,useExisting:tF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:qd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Xk,8))};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({})}return n})();function MK(n){return"guarded"}function xK(n){return["disabled"===n.initialNavigation?Jo(3,[{provide:nv,multi:!0,useFactory:()=>{const e=pe(On);return()=>{e.setUpLocationChangeListener()}}},{provide:KT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jo(2,[{provide:KT,useValue:0},{provide:nv,multi:!0,deps:[Rr],useFactory:e=>{const t=e.get(BG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(On),s=e.get(Yk);qk(i,()=>{r(!0)}),e.get(Gv).afterPreactivation=()=>(r(!0),s.closed?q(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const tF=new ue(""),co_WS_PATH="http://localhost:18080/ProyectoFinal/rs";class Kv{}class Zv{}class lo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof lo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new lo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof lo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class OK{encodeKey(e){return nF(e)}encodeValue(e){return nF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const FK=/%(\d[a-f0-9])/gi,VK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nF(n){return encodeURIComponent(n).replace(FK,(e,t)=>VK[t]??e)}function Qv(n){return`${n}`}class ho{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new OK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kK(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Qv):[Qv(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ho({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Qv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Qv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class LK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function rF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function iF(n){return typeof Blob<"u"&&n instanceof Blob}function sF(n){return typeof FormData<"u"&&n instanceof FormData}class gg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function UK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new lo),this.context||(this.context=new LK),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ho,this.urlWithParams=t}serializeBody(){return null===this.body?null:rF(this.body)||iF(this.body)||sF(this.body)||function BK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ho?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||sF(this.body)?null:iF(this.body)?this.body.type||null:rF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ho?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),l)),new gg(t,r,s,{params:l,headers:u,context:f,reportProgress:a,responseType:i,withCredentials:o})}}var Gd=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gd||{});class ZT{constructor(e,t=200,r="OK"){this.headers=e.headers||new lo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class QT extends ZT{constructor(e={}){super(e),this.type=Gd.ResponseHeader}clone(e={}){return new QT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wd extends ZT{constructor(e={}){super(e),this.type=Gd.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class oF extends ZT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function YT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Kd=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof gg)s=t;else{let u,l;u=i.headers instanceof lo?i.headers:new lo(i.headers),i.params&&(l=i.params instanceof ho?i.params:new ho({fromObject:i.params})),s=new gg(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=q(s).pipe(Vd(u=>this.handler.handle(u)));if(t instanceof gg||"events"===i.observe)return o;const a=o.pipe(fr(u=>u instanceof Wd));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ve(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ve(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ve(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ve(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ho).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,YT(i,r))}post(t,r,i={}){return this.request("POST",t,YT(i,r))}put(t,r,i={}){return this.request("PUT",t,YT(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kv))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function cF(n,e){return e(n)}function $K(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const zK=new ue(""),mg=new ue(""),lF=new ue("");function qK(){let n=null;return(e,t)=>{null===n&&(n=(pe(zK,{optional:!0})??[]).reduceRight($K,cF));const r=pe(rv),i=r.add();return n(e,t).pipe(Jp(()=>r.remove(i)))}}let dF=(()=>{class n extends Kv{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=pe(rv)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(mg),...this.injector.get(lF,[])]));this.chain=i.reduceRight((s,o)=>function HK(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),cF)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Jp(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Zv),ee(Hi))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const ZK=/^\)\]\}',?\n/;let fF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new N(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?A(r.\u0275loadImpl()):q(null)).pipe(dt(()=>new nt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((w,C)=>o.setRequestHeader(w,C.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const w=t.detectContentTypeHeader();null!==w&&o.setRequestHeader("Content-Type",w)}if(t.responseType){const w=t.responseType.toLowerCase();o.responseType="json"!==w?w:"text"}const a=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const w=o.statusText||"OK",C=new lo(o.getAllResponseHeaders()),R=function QK(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new QT({headers:C,status:o.status,statusText:w,url:R}),u},f=()=>{let{headers:w,status:C,statusText:R,url:P}=l(),O=null;204!==C&&(O=typeof o.response>"u"?o.responseText:o.response),0===C&&(C=O?200:0);let W=C>=200&&C<300;if("json"===t.responseType&&"string"==typeof O){const ce=O;O=O.replace(ZK,"");try{O=""!==O?JSON.parse(O):null}catch(Re){O=ce,W&&(W=!1,O={error:Re,text:O})}}W?(s.next(new Wd({body:O,headers:w,status:C,statusText:R,url:P||void 0})),s.complete()):s.error(new oF({error:O,headers:w,status:C,statusText:R,url:P||void 0}))},g=w=>{const{url:C}=l(),R=new oF({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:C||void 0});s.error(R)};let m=!1;const y=w=>{m||(s.next(l()),m=!0);let C={type:Gd.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),"text"===t.responseType&&o.responseText&&(C.partialText=o.responseText),s.next(C)},E=w=>{let C={type:Gd.UploadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),s.next(C)};return o.addEventListener("load",f),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",E)),o.send(a),s.next({type:Gd.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",f),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",E)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(ee(b1))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const JT=new ue("XSRF_ENABLED"),pF=new ue("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),gF=new ue("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class mF{}let XK=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=g1(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr),ee(Ss),ee(pF))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function eZ(n,e){const t=n.url.toLowerCase();if(!pe(JT)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=pe(mF).getToken(),i=pe(gF);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Xa=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Xa||{});function tZ(...n){const e=[Kd,fF,dF,{provide:Kv,useExisting:dF},{provide:Zv,useExisting:fF},{provide:mg,useValue:eZ,multi:!0},{provide:JT,useValue:!0},{provide:mF,useClass:XK}];for(const t of n)e.push(...t.\u0275providers);return _p(e)}const _F=new ue("LEGACY_INTERCEPTOR_FN");function nZ(){return function Ac(n,e){return{\u0275kind:n,\u0275providers:e}}(Xa.LegacyInterceptors,[{provide:_F,useFactory:qK},{provide:mg,useExisting:_F,multi:!0}])}let rZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({providers:[tZ(nZ())]})}return n})(),Zd=(()=>{class n{constructor(t){this.http=t,this.carritoCodigoSource=new M(null),this.carritoCodigo$=this.carritoCodigoSource.asObservable(),this.carritoCodigo=null,this.apiUrl=co_WS_PATH+"/clientes",this.isAuthenticated=!1,this.codigoCliente=null}iniciarSesion(t){const r=(new ho).set("correo",t.correo).set("clave",t.clave);return this.http.get(`${this.apiUrl}/login`,{params:r}).pipe(Wn(i=>{i.codigoCarrito&&this.setCarritoCodigo(i.codigoCarrito),i.codigoCliente&&this.setCodigoCliente(i.codigoCliente)}))}cerrarSesion(){console.log("Cerrando sesi\xf3n en AuthService"),this.isAuthenticated=!1,this.carritoCodigoSource.next(null),this.codigoCliente=null}obtenerCarritoCliente(t){return this.http.get(`${co_WS_PATH}/carritos/${t}/carrito`)}setAuthStatus(t){this.isAuthenticated=t}getAuthStatus(){return this.isAuthenticated}setCarritoCodigo(t){this.carritoCodigo=t,this.carritoCodigoSource.next(t)}getCarritoCodigo(){return this.carritoCodigo$}getCodigoCliente(){return this.codigoCliente}setCodigoCliente(t){this.codigoCliente=t}getCarritoCodigoSincrono(){return this.carritoCodigo}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kd))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class yF{constructor(e,t,r,i){this.producto=e,this.cantidad=t,this.talla=r,this.codigo=i}}class XT{constructor(){this.detalles=[]}agregarProductoConDetalle(e){const t=this.detalles.findIndex(r=>r.producto.codigo===e.producto.codigo&&r.talla===e.talla);-1!==t?this.detalles[t].cantidad+=e.cantidad:this.detalles.push(e)}removerProducto(e){this.detalles=this.detalles.filter(t=>t.codigo!==e)}}let _g=(()=>{class n{constructor(t,r){this.authService=t,this.http=r,this.carritoActualizadoSource=new M(null),this.carritoActualizado$=this.carritoActualizadoSource.asObservable(),this.carritoCodigoSource=new M(null),this.carritoCodigo$=this.carritoCodigoSource.asObservable(),this.carritoCodigo=null,this.detalles=[],this.cartVisibleSource=new M(!1),this.cartVisible=this.cartVisibleSource.asObservable(),this.carrito=new XT,this.authService.carritoCodigo$.subscribe(i=>{null!==i&&(this.carritoCodigo=i,this.obtenerCarritoCliente(i).subscribe(s=>{this.actualizarCarrito(s)}))})}agregarAlCarrito(t,r,i){this.authService.getAuthStatus()&&this.carritoCodigo?this.agregarProductoAlCarritoBackend(t,r,i,this.carritoCodigo).subscribe(s=>{if(s){const o=new yF(t,r,i);o.codigo=s,this.carrito.agregarProductoConDetalle(o),this.detalles=[...this.carrito.detalles],this.carritoActualizadoSource.next(this.carrito)}else console.error("Error en la respuesta del servidor",s)},s=>{console.error("Error al agregar al carrito",s)}):console.error("Usuario no autenticado o c\xf3digo de carrito no disponible.")}toggleCart(){this.cartVisibleSource.next(!this.cartVisibleSource.getValue())}getCartItems(){return this.detalles}agregarProductoAlCarritoBackend(t,r,i,s){return this.http.post(`${co_WS_PATH}/carritos/${s}/productos`,{producto:{codigo:t.codigo},cantidad:r,talla:i}).pipe(ve(u=>(console.log("Codigo Detalle: ",u.codigoDetalle),u.codigoDetalle)),Qa(u=>(console.error("Error al agregar producto al carrito:",u),Cc(()=>new Error("Error al agregar producto al carrito.")))))}obtenerCarritoCliente(t){return this.http.get(`${co_WS_PATH}/carritos/${t}/carrito`).pipe(Wn(r=>{this.actualizarCarrito(r)}))}getCarritoActual(){return this.carrito}actualizarCarrito(t){this.carrito=new XT,t.detalles.forEach(r=>{const i=new yF(r.producto,r.cantidad,r.talla);i.codigo=r.codigo,this.carrito.detalles.push(i)}),this.carrito.clienteCodigo=t.clienteCodigo,this.detalles=[...this.carrito.detalles],this.carritoActualizadoSource.next(this.carrito)}setCarritoCodigo(t){this.carritoCodigo=t,this.carritoCodigoSource.next(t)}getCarritoCodigo(){return this.carritoCodigo}vaciarCarrito(){this.detalles=[],this.carrito=new XT,this.carritoActualizadoSource.next(this.carrito),console.log("Carrito vaciado en CartService")}eliminarDetalleCarrito(t){this.http.delete(`${co_WS_PATH}/carritos/borrar/${t}`).subscribe({next:()=>{this.carrito.detalles=this.carrito.detalles.filter(i=>i.codigo!==t),this.carritoActualizadoSource.next(this.carrito)},error:i=>{console.error("Error al eliminar el detalle del carrito",i)}})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Zd),ee(Kd))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(G($o),G(zi))};static#t=this.\u0275dir=ke({type:n})}return n})(),Sc=(()=>{class n extends vF{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,features:[kt]})}return n})();const fo=new ue("NgValueAccessor"),dZ={provide:fo,useExisting:F(()=>Xo),multi:!0},fZ=new ue("CompositionEventMode");let Xo=(()=>{class n extends vF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hZ(){const n=Ga()?Ga().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(G($o),G(zi),G(fZ,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Qe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[pn([dZ]),kt]})}return n})();function eu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function IF(n){return null!=n&&"number"==typeof n.length}const Kr=new ue("NgValidators"),tu=new ue("NgAsyncValidators"),pZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bn{static min(e){return function wF(n){return e=>{if(eu(e.value)||eu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function CF(n){return e=>{if(eu(e.value)||eu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return TF(e)}static requiredTrue(e){return function bF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function DF(n){return eu(n.value)||pZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function AF(n){return e=>eu(e.value)||!IF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function SF(n){return e=>IF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function PF(n){if(!n)return Jv;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(eu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return kF(e)}static composeAsync(e){return FF(e)}}function TF(n){return eu(n.value)?{required:!0}:null}function Jv(n){return null}function RF(n){return null!=n}function MF(n){return Np(n)?A(n):n}function xF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function NF(n,e){return e.map(t=>t(n))}function OF(n){return n.map(e=>function gZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function kF(n){if(!n)return null;const e=n.filter(RF);return 0==e.length?null:function(t){return xF(NF(t,e))}}function eb(n){return null!=n?kF(OF(n)):null}function FF(n){if(!n)return null;const e=n.filter(RF);return 0==e.length?null:function(t){return function cZ(...n){const e=pa(n),{args:t,keys:r}=Z1(n),i=new nt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let f=0;f<o;f++){let g=!1;hn(t[f]).subscribe(_e(s,m=>{g||(g=!0,l--),a[f]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?Q1(r,a):a),s.complete())}))}});return e?i.pipe(CT(e)):i}(NF(t,e).map(MF)).pipe(ve(xF))}}function tb(n){return null!=n?FF(OF(n)):null}function VF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LF(n){return n._rawValidators}function UF(n){return n._rawAsyncValidators}function nb(n){return n?Array.isArray(n)?n:[n]:[]}function Xv(n,e){return Array.isArray(n)?n.includes(e):n===e}function BF(n,e){const t=nb(e);return nb(n).forEach(i=>{Xv(t,i)||t.push(i)}),t}function jF(n,e){return nb(e).filter(t=>!Xv(n,t))}class $F{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends $F{get formDirective(){return null}get path(){return null}}class nu extends $F{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class HF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ru=(()=>{class n extends HF{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(G(nu,2))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Rd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[kt]})}return n})(),Qd=(()=>{class n extends HF{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(G(hi,10))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Rd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[kt]})}return n})();const yg="VALID",tE="INVALID",Yd="PENDING",vg="DISABLED";function sb(n){return(nE(n)?n.validators:n)||null}function ob(n,e){return(nE(e)?e.asyncValidators:n)||null}function nE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function qF(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new N(1e3,"");if(!r[t])throw new N(1001,"")}function GF(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new N(1002,"")})}class rE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yg}get invalid(){return this.status===tE}get pending(){return this.status==Yd}get disabled(){return this.status===vg}get enabled(){return this.status!==vg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jF(e,this._rawAsyncValidators))}hasValidator(e){return Xv(this._rawValidators,e)}hasAsyncValidator(e){return Xv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yg||this.status===Yd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vg:yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yd,this._hasOwnPendingAsyncValidator=!0;const t=MF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Cn,this.statusChanges=new Cn}_calculateStatus(){return this._allControlsDisabled()?vg:this.errors?tE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yd)?Yd:this._anyControlsHaveStatus(tE)?tE:yg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function vZ(n){return Array.isArray(n)?eb(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function EZ(n){return Array.isArray(n)?tb(n):n||null}(this._rawAsyncValidators)}}class iu extends rE{constructor(e,t,r){super(sb(t),ob(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GF(this,0,e),Object.keys(e).forEach(r=>{qF(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class WF extends iu{}const Pc=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>Eg}),Eg="always";function iE(n,e){return[...e.path,n]}function Ig(n,e,t=Eg){ab(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function wZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&KF(n,e)})}(n,e),function TZ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function CZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&KF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function IZ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function sE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),aE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function oE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ab(n,e){const t=LF(n);null!==e.validator?n.setValidators(VF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=UF(n);null!==e.asyncValidator?n.setAsyncValidators(VF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();oE(e._rawValidators,i),oE(e._rawAsyncValidators,i)}function aE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=LF(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=UF(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return oE(e._rawValidators,r),oE(e._rawAsyncValidators,r),t}function KF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZF(n,e){ab(n,e)}function cb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function QF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lb(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Xo?t=s:function AZ(n){return Object.getPrototypeOf(n.constructor)===Sc}(s)?r=s:i=s}),i||r||t||null}const PZ={provide:hi,useExisting:F(()=>Cg)},wg=(()=>Promise.resolve())();let Cg=(()=>{class n extends hi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Cn,this.form=new iu({},eb(t),tb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ig(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wg.then(()=>{const r=this._findContainer(t.path),i=new iu({});ZF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,QF(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(G(Kr,10),G(tu,10),G(Pc,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Qe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pn([PZ]),kt]})}return n})();function YF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function JF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const pr=class extends rE{constructor(e=null,t,r){super(sb(t),ob(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=JF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){JF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let XF=(()=>{class n extends hi{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return iE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,features:[kt]})}return n})();const xZ={provide:nu,useExisting:F(()=>Jd)},tV=(()=>Promise.resolve())();let Jd=(()=>{class n extends nu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new pr,this._registered=!1,this.name="",this.update=new Cn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lb(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cb(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ig(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){tV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&kd(r);tV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iE(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(G(hi,9),G(Kr,10),G(tu,10),G(fo,10),G(av,8),G(Pc,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pn([xZ]),kt,wi]})}return n})(),Xd=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const NZ={provide:fo,useExisting:F(()=>db),multi:!0};let db=(()=>{class n extends Sc{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Qe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[pn([NZ]),kt]})}return n})();const OZ={provide:fo,useExisting:F(()=>hb),multi:!0};let nV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({})}return n})(),kZ=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:nV})}return n})(),hb=(()=>{class n extends Sc{constructor(t,r,i,s){super(t,r),this._registry=i,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=pe(Pc,{optional:!0})??Eg}ngOnInit(){this._control=this._injector.get(nu),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(r){return new(r||n)(G($o),G(zi),G(kZ),G(Rr))};static#t=this.\u0275dir=ke({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&Qe("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[pn([OZ]),kt]})}return n})();const fb=new ue("NgModelWithFormControlWarning"),LZ={provide:hi,useExisting:F(()=>eh)};let eh=(()=>{class n extends hi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Cn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(aE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ig(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){sE(t.control||null,t,!1),function SZ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,QF(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(sE(r||null,t),(n=>n instanceof pr)(i)&&(Ig(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);ZF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function bZ(n,e){return aE(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ab(this.form,this),this._oldForm&&aE(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(G(Kr,10),G(tu,10),G(Pc,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Qe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pn([LZ]),kt,wi]})}return n})();const UZ={provide:hi,useExisting:F(()=>uE)};let uE=(()=>{class n extends XF{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){sV(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(G(hi,13),G(Kr,10),G(tu,10))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[pn([UZ]),kt]})}return n})();const BZ={provide:hi,useExisting:F(()=>pb)};let pb=(()=>{class n extends hi{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return iE(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){sV(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(G(hi,13),G(Kr,10),G(tu,10))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[pn([BZ]),kt]})}return n})();function sV(n){return!(n instanceof uE||n instanceof eh||n instanceof pb)}const jZ={provide:nu,useExisting:F(()=>Tg)};let Tg=(()=>{class n extends nu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Cn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lb(0,s)}ngOnChanges(t){this._added||this._setUpControl(),cb(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return iE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(G(hi,13),G(Kr,10),G(tu,10),G(fo,10),G(fb,8))};static#n=this.\u0275dir=ke({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[pn([jZ]),kt,wi]})}return n})();const $Z={provide:fo,useExisting:F(()=>bg),multi:!0};function oV(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let bg=(()=>{class n extends Sc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=oV(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function HZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Qe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pn([$Z]),kt]})}return n})(),aV=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(oV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(G(zi),G($o),G(bg,9))};static#t=this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const zZ={provide:fo,useExisting:F(()=>gb),multi:!0};function uV(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gb=(()=>{class n extends Sc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function qZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Qe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pn([zZ]),kt]})}return n})(),cV=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(uV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(uV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(G(zi),G($o),G(gb,9))};static#t=this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Rc=(()=>{class n{constructor(){this._validator=Jv}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jv,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,features:[wi]})}return n})();const KZ={provide:Kr,useExisting:F(()=>Dg),multi:!0};let Dg=(()=>{class n extends Rc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=kd,this.createValidator=t=>TF}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=xn(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Di("required",i._enabled?"":null)},inputs:{required:"required"},features:[pn([KZ]),kt]})}return n})(),vV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({imports:[nV]})}return n})();class EV extends rE{constructor(e,t,r){super(sb(t),ob(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){GF(this,0,e),e.forEach((r,i)=>{qF(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function IV(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let eQ=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return IV(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new iu(i,s)}record(t,r=null){const i=this._reduceControls(t);return new WF(i,r)}control(t,r,i){let s={};return this.useNonNullable?(IV(r)?s=r:(s.validators=r,s.asyncValidators=i),new pr(t,{...s,nonNullable:!0})):new pr(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new EV(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof pr||t instanceof rE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pc,useValue:t.callSetDisabledState??Eg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({imports:[vV]})}return n})(),nQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fb,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Pc,useValue:t.callSetDisabledState??Eg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({imports:[vV]})}return n})();function rQ(n,e){if(1&n){const t=ro();L(0,"form",3)(1,"div",4)(2,"h2"),Y(3,"Inicio de sesi\xf3n"),V()(),L(4,"div",5)(5,"label",6),Y(6,"Correo:"),V(),L(7,"input",7),Qe("ngModelChange",function(i){return hr(t),zn(Et().cliente.correo=i)}),V()(),L(8,"div",5)(9,"label",8),Y(10,"Contrase\xf1a:"),V(),L(11,"input",9),Qe("ngModelChange",function(i){return hr(t),zn(Et().cliente.clave=i)}),V()(),L(12,"div",10)(13,"button",11),Qe("click",function(){return hr(t),zn(Et().iniciarSesion())}),Y(14,"Iniciar Sesi\xf3n"),V(),L(15,"button",11),Qe("click",function(){return hr(t),zn(Et().registrarse())}),Y(16,"Registrarse"),V()()()}if(2&n){const t=Et();me(7),xe("ngModel",t.cliente.correo),me(4),xe("ngModel",t.cliente.clave)}}function iQ(n,e){if(1&n){const t=ro();L(0,"div")(1,"h2"),Y(2,"Sesi\xf3n Iniciada "),V(),L(3,"button",12),Qe("click",function(){return hr(t),zn(Et().cerrarSesion())}),Y(4,"Cerrar Sesi\xf3n"),V()()}}let sQ=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.cartService=i,this.cliente={correo:"",clave:""},this.detalles=[],this.detalles=this.cartService.getCartItems()}iniciarSesion(){this.authService.iniciarSesion(this.cliente).subscribe(t=>{if("Acceso concedido"===t.mensaje){this.authService.setAuthStatus(!0),console.log("Inicio de sesi\xf3n correcto"),this.router.navigate(["/pages/inicio"]);const r=t.codigoCarrito;r?(this.authService.setCarritoCodigo(r),console.log("C\xf3digo del carrito:",r),this.cartService.obtenerCarritoCliente(r).subscribe(i=>{console.log("Carrito recuperado:",i),this.cartService.actualizarCarrito(i)},i=>console.error("Error al obtener el carrito",i))):console.warn("C\xf3digo del carrito no disponible en la respuesta de autenticaci\xf3n.")}else console.error("Error al iniciar sesi\xf3n: Correo o contrase\xf1a incorrecta"),window.alert("Correo o contrase\xf1a incorrecta")},t=>{console.error("Error al iniciar sesi\xf3n",t),window.alert("Error al iniciar sesi\xf3n")})}registrarse(){this.router.navigate(["/pages/crearuser"])}cerrarSesion(){this.authService.cerrarSesion(),this.cartService.vaciarCarrito(),this.router.navigate(["/pages/inicio"])}static#e=this.\u0275fac=function(r){return new(r||n)(G(Zd),G(On),G(_g))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[[1,"login-container"],["class","login-form",4,"ngIf"],[4,"ngIf"],[1,"login-form"],[1,"login-header"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],[1,"form-actions"],["type","button",3,"click"],[3,"click"]],template:function(r,i){1&r&&(L(0,"div",0),xt(1,rQ,17,2,"form",1),xt(2,iQ,5,0,"div",2),V()),2&r&&(me(1),xe("ngIf",0==i.authService.getAuthStatus()),me(1),xe("ngIf",1==i.authService.getAuthStatus()))},dependencies:[Wa,Xd,Xo,ru,Qd,Dg,Jd,Cg],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#2c3e50;color:#fff;max-width:400px;margin:2rem auto;padding:2rem;border-radius:8px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-bottom:2rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:Roboto,sans-serif;margin-bottom:.5rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:4px;border:1px solid #34495e}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer}.form-group[_ngcontent-%COMP%]{margin-bottom:1em}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1em;gap:15px}button[_ngcontent-%COMP%]{padding:.5em 1em;border:none;border-radius:5px;cursor:pointer;background-color:#333;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#555}@media (max-width: 600px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:.5em}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-top:0}}']})}return n})(),wV=(()=>{class n{constructor(t){this.http=t}getProductos(){return this.http.get(co_WS_PATH+"/productos/list")}getProductoPorCodigoYNombre(t,r){let i=co_WS_PATH+"/productos";const s=(new ho).set("codigo",t.toString()).set("nombre",r);return this.http.get(i,{params:s})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kd))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oQ=function(n){return["/pages/inicio",n]};function aQ(n,e){if(1&n&&(L(0,"div",4)(1,"button",5),it(2,"img",6),L(3,"div",7)(4,"h3"),Y(5),V(),L(6,"p"),Y(7),V()()()()),2&n){const t=e.$implicit;me(1),xe("routerLink",kN(4,oQ,t.codigo)),me(1),xe("src",t.imagen,cd),me(3),yc(t.nombre),me(2),on("Precio: $",t.precio,"")}}let uQ=(()=>{class n{constructor(t,r){this.productoService=t,this.router=r,this.productos=[],this.productosFiltrados=[],this.filtroNombre=""}ngOnInit(){this.productoService.getProductos().subscribe(t=>{this.productos=t,this.productosFiltrados=t})}filtrarProductos(){this.productosFiltrados=this.filtroNombre?this.productos.filter(t=>t.nombre.toLowerCase().includes(this.filtroNombre.toLowerCase())):this.productos}static#e=this.\u0275fac=function(r){return new(r||n)(G(wV),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-inicio"]],decls:4,vars:2,consts:[[1,"search-container"],["type","text","placeholder","Buscar producto por nombre...",3,"ngModel","ngModelChange","input"],[1,"productos-container"],["class","producto",4,"ngFor","ngForOf"],[1,"producto"],[3,"routerLink"],["alt","Imagen del Producto",3,"src"],[1,"info"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"input",1),Qe("ngModelChange",function(o){return i.filtroNombre=o})("input",function(){return i.filtrarProductos()}),V()(),L(2,"div",2),xt(3,aQ,8,6,"div",3),V()),2&r&&(me(1),xe("ngModel",i.filtroNombre),me(2),xe("ngForOf",i.productosFiltrados))},dependencies:[wv,pg,Xo,ru,Jd],styles:['@charset "UTF-8";img[_ngcontent-%COMP%]{width:140px;height:150px;object-fit:cover;display:block;margin:0 auto}.productos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.producto[_ngcontent-%COMP%]{position:relative;flex:0 0 30%;margin:11px;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out;border-radius:15px;text-align:center}.producto[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:10}.productos-container[_ngcontent-%COMP%]:hover   .producto[_ngcontent-%COMP%]{opacity:.6}.productos-container[_ngcontent-%COMP%]   .producto[_ngcontent-%COMP%]:hover{opacity:1}.info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080;color:#fff;padding:10px;text-align:center}.producto[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .producto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.producto[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:10px 0}.producto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-bottom:54px}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.search-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;max-width:500px;padding:10px 20px;border:2px solid #ccc;border-radius:25px;font-size:16px;box-shadow:0 4px 6px #0000001a;transition:border-color .3s,box-shadow .3s}.search-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80;outline:none}.search-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:#aaa;font-style:italic}']})}return n})(),cQ=(()=>{class n{constructor(t){this.router=t,this.cartOpen=!0}toggleCart(){this.cartOpen=!this.cartOpen}redirectToCheckout(){this.router.navigate(["pages/carrito2"])}static#e=this.\u0275fac=function(r){return new(r||n)(G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-carrito"]],decls:13,vars:2,consts:[[3,"click"],["id","shopping-cart-panel"],["id","shopping-cart-header"],["id","shopping-cart-content"]],template:function(r,i){1&r&&(L(0,"button",0),Qe("click",function(){return i.toggleCart()}),Y(1,"Carrito"),V(),L(2,"div",1)(3,"div",2)(4,"button",0),Qe("click",function(){return i.toggleCart()}),Y(5,"\xd7"),V(),L(6,"h2"),Y(7,"HOLAAA"),V()(),L(8,"div",3)(9,"p"),Y(10,"xd."),V()()(),L(11,"button",0),Qe("click",function(){return i.redirectToCheckout()}),Y(12,"Ir a la p\xe1gina de pago"),V()),2&r&&(me(2),Rd("open",i.cartOpen))},styles:['@charset "UTF-8";[_nghost-%COMP%]{position:relative;display:block}#shopping-cart-panel[_ngcontent-%COMP%]{position:fixed;right:-100%;top:0;width:400px;height:100%;background:white;box-shadow:-2px 0 5px #0003;transition:right .3s}#shopping-cart-panel.open[_ngcontent-%COMP%]{right:0}#shopping-cart-header[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-bottom:1px solid #e1e1e1;position:relative}#shopping-cart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:20px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:24px;cursor:pointer}#shopping-cart-content[_ngcontent-%COMP%]{padding:20px;text-align:center}button[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:10px 20px;cursor:pointer}']})}return n})(),lQ=(()=>{class n{constructor(t){this.http=t,this.apiUrl=co_WS_PATH+"/facturas"}generarFactura(t){return this.http.post(`${this.apiUrl}/generar/${t}`,{})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kd))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dQ(n,e){if(1&n&&(L(0,"div",22),it(1,"img",23),L(2,"div",24)(3,"h3"),Y(4),V(),L(5,"div",25)(6,"div",26),Y(7),V(),L(8,"div",26),Y(9),V(),L(10,"div",26),Y(11),V(),L(12,"div",26),Y(13),jp(14,"number"),V()(),Y(15," - "),L(16,"div",27)(17,"p"),Y(18),jp(19,"number"),V(),L(20,"p"),Y(21),jp(22,"number"),V()()()()),2&n){const t=e.$implicit;me(1),xe("src",null==t||null==t.producto?null:t.producto.imagen,cd),me(3),yc(null==t||null==t.producto?null:t.producto.nombre),me(3),on("Cantidad: ",null==t?null:t.cantidad,""),me(2),on("Precio unitario: $",null==t||null==t.producto?null:t.producto.precio,""),me(2),on("Talla elegida: ",null==t?null:t.talla,""),me(2),on("IVA (12%): $",$p(14,8,((null==t?null:t.cantidad)||0)*((null==t||null==t.producto?null:t.producto.precio)||0)*.12,"1.2-2"),""),me(5),on("Subtotal: $",$p(19,11,((null==t?null:t.cantidad)||0)*((null==t||null==t.producto?null:t.producto.precio)||0),"1.2-2"),""),me(3),on("Total con IVA: $",$p(22,14,((null==t?null:t.cantidad)||0)*((null==t||null==t.producto?null:t.producto.precio)||0)*1.12,"1.2-2"),"")}}function hQ(n,e){if(1&n&&(L(0,"div",17)(1,"div",18),it(2,"div",19)(3,"div",20),V(),xt(4,dQ,23,17,"div",21),V()),2&n){const t=Et();me(4),xe("ngForOf",t.detalles)}}function fQ(n,e){if(1&n&&(L(0,"div",28)(1,"h3"),Y(2),jp(3,"number"),V()()),2&n){const t=Et();me(2),on("Total del Carrito (con IVA): $",$p(3,1,t.getTotalConIVA(),"1.2-2"),"")}}function pQ(n,e){if(1&n){const t=ro();L(0,"button",29),Qe("click",function(){return hr(t),zn(Et().generarFactura())}),Y(1,"Generar Factura"),V()}2&n&&xe("disabled",Et().pagoForm.valid)}function gQ(n,e){1&n&&(L(0,"div")(1,"p"),Y(2,"Tu carrito est\xe1 vac\xedo."),V()())}let mQ=(()=>{class n{constructor(t,r,i,s){this.carritoService=t,this.facturaService=r,this.authService=i,this.router=s,this.pagoForm=new iu({numeroTarjeta:new pr("",[bn.required]),nombreTarjeta:new pr("",bn.required),fechaVencimiento:new pr("",bn.required),codigoSeguridad:new pr("",[bn.required]),cedulaPagador:new pr("",[bn.required])}),this.detalles=[]}ngOnInit(){this.carritoService.carritoActualizado$.subscribe(t=>{t&&(this.detalles=t.detalles)}),this.cargarDetallesDelCarrito()}cargarDetallesDelCarrito(){const t=this.authService.getCarritoCodigoSincrono();t&&this.carritoService.obtenerCarritoCliente(t).subscribe(r=>{this.detalles=r.detalles})}generarFactura(){const t=this.authService.getCarritoCodigoSincrono();t?(console.log("CODIGO CARRITO PARA GENERAR FACTURA",t),this.facturaService.generarFactura(t).subscribe(r=>{console.log("Factura generada:",r),this.carritoService.vaciarCarrito(),this.detalles=[],this.router.navigate(["pages/inicio"])},r=>{console.error("Error al generar la factura:",r)})):console.error("No hay un c\xf3digo de carrito disponible")}getTotalConIVA(){return this.detalles.reduce((t,r)=>t+(r.cantidad||0)*(r.producto?.precio||0)*1.12,0)}static#e=this.\u0275fac=function(r){return new(r||n)(G(_g),G(lQ),G(Zd),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-carrito2"]],decls:29,vars:5,consts:[[1,"carrito-container"],["class","cart-items",4,"ngIf"],["class","total-carrito-container",4,"ngIf"],[3,"formGroup"],["for","numeroTarjeta"],["id","numeroTarjeta","type","text","formControlName","numeroTarjeta"],["for","nombreTarjeta"],["id","nombreTarjeta","type","text","formControlName","nombreTarjeta"],["for","fechaVencimiento"],["id","fechaVencimiento","type","text","formControlName","fechaVencimiento"],["for","codigoSeguridad"],["id","codigoSeguridad","type","text","formControlName","codigoSeguridad"],["for","cedulaPagador"],["id","cedulaPagador","type","text","formControlName","cedulaPagador"],[1,"boton-centrado"],[3,"disabled","click",4,"ngIf"],[4,"ngIf"],[1,"cart-items"],[1,"pyro"],[1,"before"],[1,"after"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],["alt","Imagen del Producto",1,"cart-item-image",3,"src"],[1,"cart-item-details"],[1,"detail-boxes"],[1,"detail-box"],[1,"total-box"],[1,"total-carrito-container"],[3,"disabled","click"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h2"),Y(2,"Mi Carrito"),V(),xt(3,hQ,5,1,"div",1),xt(4,fQ,4,4,"div",2),L(5,"form",3)(6,"div")(7,"label",4),Y(8,"N\xfamero"),V(),it(9,"input",5),V(),L(10,"div")(11,"label",6),Y(12,"Nombre y Apellido como figura en la tarjeta"),V(),it(13,"input",7),V(),L(14,"div")(15,"label",8),Y(16,"Fecha de Vencimiento"),V(),it(17,"input",9),V(),L(18,"div")(19,"label",10),Y(20,"C\xf3digo de Seguridad"),V(),it(21,"input",11),V(),L(22,"div")(23,"label",12),Y(24,"C\xe9dula del pagador"),V(),it(25,"input",13),V(),L(26,"div",14),xt(27,pQ,2,1,"button",15),V()(),xt(28,gQ,3,0,"div",16),V()),2&r&&(me(3),xe("ngIf",i.detalles.length>0),me(1),xe("ngIf",i.detalles.length>0),me(1),xe("formGroup",i.pagoForm),me(22),xe("ngIf",i.detalles.length>0),me(1),xe("ngIf",0===i.detalles.length))},dependencies:[wv,Wa,Xd,Xo,ru,Qd,eh,Tg,w1],styles:['@charset "UTF-8";.carrito-container[_ngcontent-%COMP%]{padding:20px;background-color:#f4f4f4}.carrito-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.cart-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:10px;background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:10px;box-shadow:0 2px 4px #0000001a}.cart-item-image[_ngcontent-%COMP%]{width:100px;height:auto;margin-right:15px}.cart-item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.detail-boxes[_ngcontent-%COMP%]{display:flex;gap:10px}.detail-box[_ngcontent-%COMP%], .total-box[_ngcontent-%COMP%]{align-self:flex-start;padding:5px;background-color:#f0f0f0;border:1px solid #ccc;border-radius:5px}.total-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.total-carrito[_ngcontent-%COMP%]{text-align:right}.contenedor-del-h3[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.total-carrito-container[_ngcontent-%COMP%]{text-align:right;width:100%}.cart-item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .cart-item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}button[_ngcontent-%COMP%]{background-color:#445783;color:#fff;padding:12px;border:none;cursor:pointer;border-radius:4px;font-size:16px;transition:background-color .3s,transform .2s;margin-top:20px}button[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.boton-centrado[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}body[_ngcontent-%COMP%]{margin:0;padding:0;background:#003366;overflow:hidden}.pyro[_ngcontent-%COMP%] > .before[_ngcontent-%COMP%], .pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{position:absolute;width:4px;height:4px;border-radius:50%;box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff;animation:1s _ngcontent-%COMP%_bang ease-out infinite backwards,1s _ngcontent-%COMP%_gravity ease-in infinite backwards,5s _ngcontent-%COMP%_position linear infinite backwards}.pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{animation-delay:1.25s,1.25s,1.25s;animation-duration:1.25s,1.25s,6.25s}@keyframes _ngcontent-%COMP%_bang{to{box-shadow:-10px -150.3333333333px #df0,-34px -312.3333333333px #2a00ff,-236px -332.3333333333px #e500ff,57px -239.3333333333px #ff00bf,-78px -143.3333333333px #ff1e00,-209px -42.3333333333px #00ff26,-218px 36.6666666667px #e6ff00,-141px -126.3333333333px #f0e,-150px -75.3333333333px #00fff2,201px 26.6666666667px #0ff,-189px -154.3333333333px #0f7,-84px -128.3333333333px #ff001a,77px -249.3333333333px #ff2f00,205px -222.3333333333px #08ff00,60px -18.3333333333px #f02,-239px -231.3333333333px #5100ff,-62px -271.3333333333px #00ff2f,-59px -148.3333333333px #2bff00,192px -99.3333333333px #60f,-110px -250.3333333333px #ff00e6,-223px -283.3333333333px #006fff,8px 65.6666666667px #0008ff,-10px -260.3333333333px #004cff,118px -170.3333333333px #fb00ff,-178px -210.3333333333px #ff9d00,184px -241.3333333333px #d400ff,195px 31.6666666667px #00ffd5,6px 34.6666666667px #005eff,-234px -180.3333333333px #1500ff,-36px -324.3333333333px #002bff,138px -168.3333333333px #26ff00,-175px -111.3333333333px #9dff00,-222px -60.3333333333px #1f0,94px -205.3333333333px #fa0,247px -200.3333333333px #ffc800,-218px -95.3333333333px #f50,-97px 60.6666666667px #00ff5e,64px -170.3333333333px #48ff00,29px -11.3333333333px #e6ff00,-103px -31.3333333333px #ff7300,-22px -230.3333333333px #ff001e,-247px -88.3333333333px #ff9d00,-158px -317.3333333333px #90f,34px -327.3333333333px #7f00ff,-167px -204.3333333333px #3700ff,207px -324.3333333333px #df0,229px 39.6666666667px #d9ff00,24px -279.3333333333px #1eff00,195px -98.3333333333px #0080ff,-143px 39.6666666667px #00ff80,58px 39.6666666667px #00ff1e,236px -46.3333333333px #00ffa6,194px -36.3333333333px #b0f,144px -251.3333333333px #bf00ff,-89px -275.3333333333px #003cff,193px -218.3333333333px #0f1,-135px -159.3333333333px #f40,55px -82.3333333333px #ff00d0,127px -329.3333333333px #ff5900,-85px -165.3333333333px #5eff00,52px -73.3333333333px #000dff}}@keyframes _ngcontent-%COMP%_gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes _ngcontent-%COMP%_position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}form[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:5px;background-color:#f9f9f9}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px 10px;margin-bottom:20px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e3342f}div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:10px}']})}return n})();class _Q{}let CV=(()=>{class n{constructor(t,r){this.fb=t,this.router=r,this.direccionForm=this.fb.group(new _Q)}ngOnInit(){}guardarDireccion(){console.log("Direcci\xf3n guardada:",this.direccionForm.value)}proceder(){this.router.navigate(["pages/pago"])}static#e=this.\u0275fac=function(r){return new(r||n)(G(eQ),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-carrito3"]],decls:32,vars:1,consts:[[3,"formGroup"],["for","provincia"],["type","text","id","provincia","formControlName","provincia"],["for","ciudad"],["type","text","id","ciudad","formControlName","ciudad"],["for","direccion"],["type","text","id","direccion","formControlName","direccion"],["for","NumeroCasa"],["type","number","id","NumeroCasa","formControlName","NumeroCasa"],["for","referencia"],["type","text","id","referencia","formControlName","referencia"],["for","nombre_recibe"],["type","text","id","nombre_recibe","formControlName","nombre_recibe"],[1,"checkout"],[3,"click"]],template:function(r,i){1&r&&(L(0,"form",0)(1,"div")(2,"label",1),Y(3,"Provincia:"),V(),it(4,"input",2),V(),L(5,"div")(6,"label",3),Y(7,"Ciudad:"),V(),it(8,"input",4),V(),L(9,"div")(10,"label",5),Y(11,"Direcci\xf3n:"),V(),it(12,"input",6),V(),L(13,"div")(14,"label",7),Y(15,"N\xfamero de Casa:"),V(),it(16,"input",8),V(),L(17,"div")(18,"label",9),Y(19,"Referencia:"),V(),it(20,"input",10),V(),L(21,"div")(22,"label",11),Y(23,"Nombre de quien recibe:"),V(),it(24,"input",12),V(),Y(25," -- "),L(26,"div",13)(27,"button",14),Qe("click",function(){return i.guardarDireccion()}),Y(28,"Guardar Direcci\xf3n"),V(),L(29,"button",14),Qe("click",function(){return i.proceder()}),Y(30,"proceder al pago"),V()(),Y(31," -- "),V()),2&r&&xe("formGroup",i.direccionForm)},dependencies:[Xd,Xo,db,ru,Qd,eh,Tg],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px}.btn-enviar[_ngcontent-%COMP%], .btn-recoger[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.btn-enviar[_ngcontent-%COMP%]{background-color:#000;color:#fff;margin-right:10px}.btn-recoger[_ngcontent-%COMP%]{background-color:#f8f8f8;color:#000}"]})}return n})(),yQ=(()=>{class n{constructor(){this.pagoForm=new iu({tipoTarjeta:new pr("credito",bn.required),numeroTarjeta:new pr("",[bn.required,bn.minLength(16),bn.maxLength(16)]),nombreTarjeta:new pr("",bn.required),fechaVencimiento:new iu({mesVencimiento:new pr("",[bn.required,bn.min(1),bn.max(12)]),anoVencimiento:new pr("",[bn.required,bn.min(0)])}),codigoSeguridad:new pr("",[bn.required,bn.minLength(3),bn.maxLength(4)]),cedulaPagador:new pr("",[bn.required,bn.minLength(10),bn.maxLength(10)]),cuotas:new pr("",bn.required)})}onSubmit(){console.log(this.pagoForm.value)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-pago"]],decls:35,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","radio","formControlName","tipoTarjeta","value","credito"],["type","radio","formControlName","tipoTarjeta","value","debito"],["for","numeroTarjeta"],["id","numeroTarjeta","type","text","formControlName","numeroTarjeta"],["for","nombreTarjeta"],["id","nombreTarjeta","type","text","formControlName","nombreTarjeta"],["formGroupName","fechaVencimiento"],["for","mesVencimiento"],["id","mesVencimiento","type","date","formControlName","mesVencimiento"],["formControlName","anoVencimiento"],["for","codigoSeguridad"],["id","codigoSeguridad","type","text","formControlName","codigoSeguridad"],["for","cedulaPagador"],["id","cedulaPagador","type","text","formControlName","cedulaPagador"],["for","cuotas"],["id","cuotas","formControlName","cuotas"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(L(0,"form",0),Qe("ngSubmit",function(){return i.onSubmit()}),L(1,"div")(2,"label"),it(3,"input",1),Y(4," Tarjeta de cr\xe9dito "),V(),L(5,"label"),it(6,"input",2),Y(7," Tarjeta de D\xe9bito "),V()(),L(8,"div")(9,"label",3),Y(10,"N\xfamero"),V(),it(11,"input",4),V(),L(12,"div")(13,"label",5),Y(14,"Nombre y Apellido como figura en la tarjeta"),V(),it(15,"input",6),V(),L(16,"div",7)(17,"label",8),Y(18,"Fecha de Vencimiento"),V(),it(19,"select",9)(20,"select",10),V(),L(21,"div")(22,"label",11),Y(23,"C\xf3digo de Seguridad"),V(),it(24,"input",12),V(),L(25,"div")(26,"label",13),Y(27,"C\xe9dula del pagador"),V(),it(28,"input",14),V(),L(29,"div")(30,"label",15),Y(31,"Cuotas disponibles"),V(),it(32,"select",16),V(),L(33,"button",17),Y(34,"Pagar"),V()()),2&r&&(xe("formGroup",i.pagoForm),me(33),xe("disabled",!i.pagoForm.valid))},dependencies:[Xd,Xo,bg,hb,ru,Qd,eh,Tg,uE],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:5px;background-color:#f9f9f9}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px 10px;margin-bottom:20px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;background-color:#5cb85c;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#4cae4c}[type=radio][_ngcontent-%COMP%]{margin-right:5px}input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e3342f}div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:10px}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();class vQ{}class TV{}class EQ{}const ea="*";function IQ(n,e){return{type:7,name:n,definitions:e,options:{}}}function bV(n,e=null){return{type:4,styles:e,timings:n}}function DV(n,e=null){return{type:2,steps:n,options:e}}function Ag(n){return{type:6,styles:n,offset:null}}function mb(n,e,t){return{type:0,name:n,styles:e,options:t}}function AV(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class Sg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class SV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const PV=["toast-component",""];function wQ(n,e){if(1&n){const t=ro();L(0,"button",5),Qe("click",function(){return hr(t),zn(Et().remove())}),L(1,"span",6),Y(2,"\xd7"),V()()}}function CQ(n,e){if(1&n&&(Mp(0),Y(1),xp()),2&n){const t=Et(2);me(1),on("[",t.duplicatesCount+1,"]")}}function TQ(n,e){if(1&n&&(L(0,"div"),Y(1),xt(2,CQ,2,1,"ng-container",4),V()),2&n){const t=Et();ps(t.options.titleClass),Di("aria-label",t.title),me(1),on(" ",t.title," "),me(1),xe("ngIf",t.duplicatesCount)}}function bQ(n,e){if(1&n&&it(0,"div",7),2&n){const t=Et();ps(t.options.messageClass),xe("innerHTML",t.message,g0)}}function DQ(n,e){if(1&n&&(L(0,"div",8),Y(1),V()),2&n){const t=Et();ps(t.options.messageClass),Di("aria-label",t.message),me(1),on(" ",t.message," ")}}function AQ(n,e){if(1&n&&(L(0,"div"),it(1,"div",9),V()),2&n){const t=Et();me(1),Pd("width",t.width+"%")}}class OQ{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class kQ{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class FQ{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new j;_activate=new j;_manualClose=new j;_resetTimeout=new j;_countDuplicate=new j;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class cE{toastId;config;message;title;toastType;toastRef;_onTap=new j;_onAction=new j;constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const MV=new ue("ToastConfig");class VQ extends kQ{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let LQ=(()=>{class n{_document=pe(sr);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class UQ{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let BQ=(()=>{class n{_overlayContainer=pe(LQ);_componentFactoryResolver=pe(Ep);_appRef=pe(oo);_document=pe(sr);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new VQ(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new UQ(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yb=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===r)return a.toastRef.onDuplicate(i,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize($i.HTML,r));const f=new FQ(u),g=new cE(this.index,s,l,i,t,f),y=Rr.create({providers:[{provide:cE,useValue:g}],parent:this._injector}),E=new OQ(s.toastComponent,y),w=u.attach(E,s.newestOnTop);f.componentInstance=w.instance;const C={toastId:this.index,title:i||"",message:r||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:g.onTap(),onAction:g.onAction(),portal:w};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{C.toastRef.activate()})),this.toasts.push(C),C}static \u0275fac=function(r){return new(r||n)(ee(MV),ee(BQ),ee(Rr),ee(G1),ee(vt))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jQ={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(G(yb),G(cE),G(vt))};static \u0275cmp=Tr({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&Qe("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(lC("@flyInOut",i.state),ps(i.toastClasses),Pd("display",i.displayStyle))},standalone:!0,features:[Jy],attrs:PV,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(xt(0,wQ,3,0,"button",0),xt(1,TQ,3,5,"div",1),xt(2,bQ,1,3,"div",2),xt(3,DQ,2,4,"div",3),xt(4,AQ,2,2,"div",4)),2&r&&(xe("ngIf",i.options.closeButton),me(1),xe("ngIf",i.title),me(1),xe("ngIf",i.message&&i.options.enableHtml),me(1),xe("ngIf",i.message&&!i.options.enableHtml),me(1),xe("ngIf",i.options.progressBar))},dependencies:[Wa],encapsulation:2,data:{animation:[IQ("flyInOut",[mb("inactive",Ag({opacity:0})),mb("active",Ag({opacity:1})),mb("removed",Ag({opacity:0})),AV("inactive => active",bV("{{ easeTime }}ms {{ easing }}")),AV("active => removed",bV("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},$Q=(n={})=>_p([{provide:MV,useValue:{default:jQ,config:n}}]);let HQ=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[$Q(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lr({type:n});static \u0275inj=Rn({})}return n})(),zQ=(()=>{class n{constructor(t){this.http=t,this.apiUrl=co_WS_PATH+"/clientes"}saveCliente(t){return this.http.post(co_WS_PATH+"/clientes",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kd))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qQ=(()=>{class n{constructor(t,r,i){this.toastr=t,this.clienteService=r,this.router=i,this.cliente=new vQ}crear(){this.clienteService.saveCliente(this.cliente).subscribe(t=>{console.log("Cliente registrado con \xe9xito",t),window.alert("Cliente registrado con \xe9xito"),this.router.navigate(["pages/login"])},t=>{console.error("Error al registrar el cliente",t),window.alert("Error al registrar el cliente")})}static#e=this.\u0275fac=function(r){return new(r||n)(G(yb),G(zQ),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-crearuser"]],decls:41,vars:6,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"form-container"],[1,"form-header"],[3,"ngSubmit"],["miForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","email@email.com","required","",3,"ngModel","ngModelChange"],["for","nombre"],["type","text","id","nombre","name","nombre","placeholder","Nombre","required","",3,"ngModel","ngModelChange"],["for","dni"],["type","text","id","dni","name","dni","placeholder","1111111111","required","",3,"ngModel","ngModelChange"],["type","text","id","direccion","name","direccion","placeholder","Ciudad","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"]],template:function(r,i){if(1&r&&(L(0,"head"),it(1,"meta",0)(2,"meta",1),L(3,"title"),Y(4,"Formulario de Identificaci\xf3n"),V()(),L(5,"head"),it(6,"meta",0)(7,"meta",1),L(8,"title"),Y(9,"Formulario de Identificaci\xf3n"),V()(),L(10,"body")(11,"div",2)(12,"div",3)(13,"h2"),Y(14,"1 Identificaci\xf3n"),V(),L(15,"p"),Y(16,"Solicitamos \xfanicamente la informaci\xf3n esencial para poder crear la cuenta."),V()(),L(17,"form",4,5),Qe("ngSubmit",function(){return i.crear()}),L(19,"div",6)(20,"label",7),Y(21,"Correo"),V(),L(22,"input",8),Qe("ngModelChange",function(o){return i.cliente.correo=o}),V()(),L(23,"div",6)(24,"label",9),Y(25,"Nombre"),V(),L(26,"input",10),Qe("ngModelChange",function(o){return i.cliente.nombre=o}),V()(),L(27,"div",6)(28,"label",11),Y(29,"C\xe9dula"),V(),L(30,"input",12),Qe("ngModelChange",function(o){return i.cliente.dni=o}),V()(),L(31,"div",6)(32,"label",11),Y(33,"Direcci\xf3n"),V(),L(34,"input",13),Qe("ngModelChange",function(o){return i.cliente.direccion=o}),V()(),L(35,"div",6)(36,"label",14),Y(37,"Contrase\xf1a"),V(),L(38,"input",15),Qe("ngModelChange",function(o){return i.cliente.clave=o}),V()(),L(39,"button",16),Y(40,"Crear usuario"),V()()()()),2&r){const s=function rx(n){return Ci(function bw(){return Ve.lFrame.contextLView}(),lt+n)}(18);me(22),xe("ngModel",i.cliente.correo),me(4),xe("ngModel",i.cliente.nombre),me(4),xe("ngModel",i.cliente.dni),me(4),xe("ngModel",i.cliente.direccion),me(4),xe("ngModel",i.cliente.clave),me(1),xe("disabled",s.invalid)}},dependencies:[Xd,Xo,ru,Qd,Dg,Jd,Cg],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Helvetica Neue,Arial,sans-serif;background:#eaeaea;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0}.form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:20px;padding:30px;border:none;border-radius:10px;background:#fff;box-shadow:0 5px 25px #0003;transition:transform .3s ease,box-shadow .3s ease}.form-container[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #00000040}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:#333;text-align:center;margin-bottom:30px;font-weight:700}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#333;text-align:center;margin-bottom:30px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}label[_ngcontent-%COMP%]{align-self:flex-start;margin-bottom:10px;font-weight:700;color:#333}input[type=email][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], input[type=tel][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:15px;margin-bottom:20px;border:2px solid #d3d3d3;border-radius:8px;font-size:1rem;box-shadow:inset 0 2px 5px #0000001a;transition:border-color .3s}input[type=email][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus, input[type=tel][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}button[_ngcontent-%COMP%]{padding:15px 20px;background-color:#007bff;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:background-color .3s,transform .3s}button[_ngcontent-%COMP%]:hover{background-color:#555}@media (min-width: 768px){.form-container[_ngcontent-%COMP%]{margin:auto;padding:40px}}']})}return n})();function GQ(n,e){if(1&n){const t=ro();L(0,"div",1)(1,"h2"),Y(2,"Detalles del Producto"),V(),L(3,"div",2),it(4,"img",3),L(5,"div",4)(6,"h3"),Y(7),V(),L(8,"p"),Y(9),V(),L(10,"p"),Y(11),V(),L(12,"div"),Y(13),V(),L(14,"button",5),Qe("click",function(){return hr(t),zn(Et().aumentarCantidad())}),Y(15,"+"),V(),L(16,"button",5),Qe("click",function(){return hr(t),zn(Et().disminuirCantidad())}),Y(17,"-"),V(),L(18,"div",6)(19,"label",7),Y(20,"Talla:"),V(),L(21,"select",8),Qe("ngModelChange",function(i){return hr(t),zn(Et().talla=i)}),L(22,"option",9),Y(23,"XS"),V(),L(24,"option",10),Y(25,"S"),V(),L(26,"option",11),Y(27,"M"),V(),L(28,"option",12),Y(29,"L"),V(),L(30,"option",13),Y(31,"XL"),V()()(),L(32,"div",14)(33,"button",5),Qe("click",function(){hr(t);const i=Et();return zn(i.agregarAlCarrito(i.producto,i.cantidad,i.talla))}),Y(34,"A\xf1adir al Carrito"),V()()()()()}if(2&n){const t=Et();me(4),xe("src",t.producto.imagen,cd),me(3),yc(t.producto.nombre),me(2),on("Precio: $",t.producto.precio,""),me(2),on("Descripcion: ",t.producto.descripcion,""),me(1),ps(t.cantidadClase),me(1),yc(t.cantidad),me(8),xe("ngModel",t.talla)}}const WQ=[{path:"pages/login",component:sQ},{path:"pages/inicio",component:uQ},{path:"carrito",component:cQ,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.getAuthStatus()||(this.router.navigate(["/login"]),!1)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Zd),ee(On))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"pages/carrito2",component:mQ},{path:"pages/carrito3",component:CV},{path:"pages/pago",component:yQ},{path:"pages/crearuser",component:qQ},{path:"pages/carrito3",component:CV},{path:"pages/inicio/:codigo",component:(()=>{class n{constructor(t,r,i,s,o){this.route=t,this.productosService=r,this.cartService=i,this.authService=s,this.router=o,this.cantidad=1,this.cantidadClase="cantidad",this.codigoProducto=0,this.talla="M"}ngOnInit(){this.route.paramMap.subscribe(t=>{const r=t.get("codigo");null!==r&&(this.codigoProducto=+r,this.productosService.getProductoPorCodigoYNombre(this.codigoProducto,"").subscribe(i=>{this.producto=i}))})}agregarAlCarrito(t,r,i){r<=0?window.alert("La cantidad debe ser mayor a 0"):0==this.authService.getAuthStatus()?(this.router.navigate(["/pages/login"]),window.alert("Por favor, inicia sesi\xf3n para agregar productos al carrito")):(this.cartService.agregarAlCarrito(t,r,i),window.alert("Producto agregado al carrito con talla: "+i),this.router.navigate(["/pages/inicio"]))}aumentarCantidad(){this.cantidad++,this.cantidadClase="cantidad cantidad-aumenta",setTimeout(()=>{this.cantidadClase="cantidad"},500)}disminuirCantidad(){this.cantidad--,this.cantidadClase="cantidad cantidad-aumenta",setTimeout(()=>{this.cantidadClase="cantidad"},500)}static#e=this.\u0275fac=function(r){return new(r||n)(G(Dc),G(wV),G(_g),G(Zd),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-view-producto"]],decls:1,vars:1,consts:[["class","detalle-producto-container",4,"ngIf"],[1,"detalle-producto-container"],[1,"producto"],["alt","Imagen del Producto",1,"imagen-detalle-producto",3,"src"],[1,"detalles-producto"],[3,"click"],[1,"selector-talla"],["for","talla"],[3,"ngModel","ngModelChange"],["value","XS"],["value","S"],["value","M"],["value","L"],["value","XL"],[1,"container"]],template:function(r,i){1&r&&xt(0,GQ,35,8,"div",0),2&r&&xe("ngIf",i.producto)},dependencies:[Wa,aV,cV,bg,ru,Jd],styles:['@charset "UTF-8";.detalle-producto-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:20px;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 4px #0000001a;background-color:#8aa2c2}.producto[_ngcontent-%COMP%]{text-align:center}.imagen-detalle-producto[_ngcontent-%COMP%]{width:300px;height:auto;object-fit:cover;border-radius:10px;margin-bottom:20px;transition:transform .3s ease;background-color:#fff;box-shadow:0 4px 8px #0000001a;border:1px solid #ddd}.producto[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}.producto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#fff}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .3s;align-self:center}button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-5px)}.imagen-detalle-producto[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.no-producto[_ngcontent-%COMP%]{text-align:center;margin:20px;font-size:18px;color:#666}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.cantidad[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;font-size:16px;color:#fff;background-color:#007bff;padding:3px 8px;border-radius:12px;margin:5px 0;box-shadow:0 1px 3px #0003;font-weight:700;transition:transform .2s ease}h2[_ngcontent-%COMP%]{color:#bcb8b8;font-family:Arial,sans-serif;text-align:center;margin-bottom:20px}h2[_ngcontent-%COMP%]{font-size:24px;text-shadow:2px 2px 4px rgba(255,255,255,.2)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}h2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown 1s ease forwards}.selector-talla[_ngcontent-%COMP%]{display:flex;align-items:center}.selector-talla[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700;font-size:1rem;color:#fff}.selector-talla[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border-radius:5px;border:1px solid #ccc;background-color:#fff;font-size:1rem;color:#333;cursor:pointer}.selector-talla[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#445783;box-shadow:0 0 0 2px #44578333}@media (max-width: 768px){.selector-talla[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.selector-talla[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px}.selector-talla[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}}.detalle-producto-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:20px;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 4px #0000001a}.detalle-producto-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.producto[_ngcontent-%COMP%]{display:flex;align-items:flex-start;text-align:left;gap:20px}.imagen-detalle-producto[_ngcontent-%COMP%]{width:300px;height:auto;object-fit:cover;border-radius:10px}.detalles-producto[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.producto[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .producto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .selector-talla[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{color:#fff}button[_ngcontent-%COMP%], .selector-talla[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 20px;margin-top:10px}']})}return n})()}];let KQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({imports:[eF.forRoot(WQ),eF]})}return n})();function ZQ(n,e){if(1&n){const t=ro();L(0,"div",1)(1,"button",2),Qe("click",function(){return hr(t),zn(Et().closeCart())}),Y(2,"Cerrar"),V()()}}let QQ=(()=>{class n{constructor(t){this.cartService=t,this.cartOpen=!1}ngOnInit(){this.cartService.cartVisible.subscribe(t=>{this.cartOpen=t})}closeCart(){this.cartService.toggleCart()}toggleCart(){this.cartService.toggleCart()}static#e=this.\u0275fac=function(r){return new(r||n)(G(_g))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-cart-sidebar"]],decls:1,vars:1,consts:[["class","cart-sidebar",4,"ngIf"],[1,"cart-sidebar"],[3,"click"]],template:function(r,i){1&r&&xt(0,ZQ,3,0,"div",0),2&r&&xe("ngIf",i.cartOpen)},dependencies:[Wa],styles:['@charset "UTF-8";.cart-sidebar[_ngcontent-%COMP%]{position:fixed;right:0;top:0;width:350px;height:100%;background-color:#fff;box-shadow:-2px 0 8px #0000001a;z-index:100;display:flex;flex-direction:column;transform:translate(100%);transition:transform .3s ease-in-out;font-family:Arial,sans-serif;background:linear-gradient(to right,#f0f0f0,#e0e0e0);border-left:1px solid #ccc;border-top-left-radius:10px;border-bottom-left-radius:10px}.cart-sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.cart-sidebar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{font-size:1.5em;cursor:pointer;margin:1em;align-self:flex-start;color:#333}.cart-sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2em;margin-top:.5em;margin-bottom:1em}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]{flex-grow:1;padding:1em;text-align:center;overflow-y:auto}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:2em;color:gray;font-size:1em}.cart-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .cart-sidebar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 15px;border:none;border-radius:5px;text-decoration:none;display:inline-block;margin:5px;transition:background-color .3s ease}.cart-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .cart-sidebar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}']})}return n})();function YQ(n,e){if(1&n&&(L(0,"a",20),it(1,"i"),Y(2),V()),2&n){const t=Et().$implicit;xe("routerLink",t.path),me(1),ps(t.icon),me(1),on(" ",t.titulo," ")}}function JQ(n,e){if(1&n){const t=ro();L(0,"a",14),Qe("click",function(){hr(t);const i=Et().$implicit,s=Et();return zn("Carrito"===i.titulo&&s.toggleCart())}),it(1,"i"),Y(2),V()}if(2&n){const t=Et().$implicit;me(1),ps(t.icon),me(1),on(" ",t.titulo," ")}}function XQ(n,e){if(1&n&&(L(0,"li"),xt(1,YQ,3,5,"a",17),L(2,"div",18),xt(3,JQ,3,4,"a",19),V()()),2&n){const t=e.$implicit;me(1),xe("ngIf",t.path),me(2),xe("ngIf",!t.path)}}function eY(n,e){if(1&n){const t=ro();L(0,"div",23),it(1,"img",24),L(2,"div",25)(3,"h3"),Y(4),V(),L(5,"p"),Y(6),V(),L(7,"p"),Y(8),V(),L(9,"p"),Y(10),V(),L(11,"p"),Y(12),V(),L(13,"button",14),Qe("click",function(){const s=hr(t).$implicit;return zn(Et(2).eliminarDetalle(null==s?null:s.codigo))}),Y(14,"Eliminar"),V()()()}if(2&n){const t=e.$implicit;me(1),xe("src",null==t||null==t.producto?null:t.producto.imagen,cd),me(3),yc(null==t||null==t.producto?null:t.producto.nombre),me(2),on("Cantidad: ",null==t?null:t.cantidad,""),me(2),on("Precio: $",null==t||null==t.producto?null:t.producto.precio,""),me(2),on("Talla: ",null==t?null:t.talla,""),me(2),on("Codigo: ",null==t?null:t.codigo,"")}}function tY(n,e){if(1&n&&(L(0,"div",21),xt(1,eY,15,6,"div",22),V()),2&n){const t=Et();me(1),xe("ngForOf",t.detalles)}}function nY(n,e){1&n&&(L(0,"div")(1,"div",26)(2,"p"),Y(3,"Tu carrito est\xe1 vac\xedo."),V()()())}function rY(n,e){1&n&&(L(0,"div",27)(1,"p"),Y(2,"Tu Shopping Bag est\xe1 vac\xedo."),V()())}let iY=(()=>{class n{constructor(t,r,i){this.cartService=t,this.authService=r,this.router=i,this.title="ProyectoFinal",this.detalles=[],this.isCartOpen=!1,this.filtroNombre="",this.detallesFiltrados=[],this.pages=[{titulo:"Inicio",path:"pages/inicio",icon:"fas fa-home"},{titulo:"Carrito",icon:"fas fa-shopping-cart"},{titulo:"Login",path:"pages/login",icon:"fas fa-user"}]}ngOnInit(){this.subscribeToCartUpdates(),this.navigateToHomeIfLoggedIn(),this.filtrarDetalles()}subscribeToCartUpdates(){this.cartService.carritoActualizado$.subscribe(t=>{t&&(this.detalles=t.detalles||[])})}navigateToHomeIfLoggedIn(){if(this.authService.getAuthStatus()){const t=this.authService.getCodigoCliente();t&&this.cartService.obtenerCarritoCliente(t).subscribe(r=>{this.cartService.actualizarCarrito(r)},r=>{console.error("Error al recuperar el carrito: ",r)})}this.router.navigate(["pages/inicio"])}toggleCart(){this.cartService.toggleCart(),this.isCartOpen=!this.isCartOpen}redirectToCheckout(){this.router.navigate(["pages/carrito2"]),this.isCartOpen=!1}eliminarDetalle(t){this.cartService.eliminarDetalleCarrito(t)}filtrarDetalles(){this.detallesFiltrados=this.filtroNombre?this.detalles.filter(t=>t.producto.nombre.toLowerCase().includes(this.filtroNombre.toLowerCase())):this.detalles}static#e=this.\u0275fac=function(r){return new(r||n)(G(_g),G(Zd),G(On))};static#t=this.\u0275cmp=Tr({type:n,selectors:[["app-root"]],decls:73,vars:5,consts:[["href","https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap","rel","stylesheet"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"],[1,"app-header"],["src","assets\\rg-removebg-preview.png","alt","Logo Tienda de Ropa Gallito",1,"logo"],[1,"header-content"],[4,"ngFor","ngForOf"],["href","https://wa.link/hs4li1","target","_blank","title","Habla con nosotros por WhatsApp",1,"whatsapp-float"],[1,"fab","fa-whatsapp"],[1,"cart-sidebar"],[1,"close-btn",3,"click"],["class","cart-content",4,"ngIf"],[4,"ngIf"],["emptyCart",""],[1,"fixed-button-container"],[3,"click"],[1,"content"],[1,"app-footer"],[3,"routerLink",4,"ngIf"],[1,"sidebar"],[3,"click",4,"ngIf"],[3,"routerLink"],[1,"cart-content"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],["alt","Imagen del Producto",1,"cart-item-image",3,"src"],[1,"cart-item-details"],[1,"contenedor-centrado"],[1,"contenedor"]],template:function(r,i){1&r&&(it(0,"link",0),L(1,"body")(2,"head"),it(3,"link",1),V(),L(4,"header",2),it(5,"img",3),L(6,"div",4)(7,"h1")(8,"span"),Y(9,"T"),V(),L(10,"span"),Y(11,"i"),V(),L(12,"span"),Y(13,"e"),V(),L(14,"span"),Y(15,"n"),V(),L(16,"span"),Y(17,"d"),V(),L(18,"span"),Y(19,"a"),V(),Y(20,"\xa0 "),L(21,"span"),Y(22,"d"),V(),L(23,"span"),Y(24,"e"),V(),Y(25,"\xa0 "),L(26,"span"),Y(27,"r"),V(),L(28,"span"),Y(29,"o"),V(),L(30,"span"),Y(31,"p"),V(),L(32,"span"),Y(33,"a"),V(),Y(34,"\xa0 "),L(35,"span"),Y(36,"G"),V(),L(37,"span"),Y(38,"a"),V(),L(39,"span"),Y(40,"l"),V(),L(41,"span"),Y(42,"l"),V(),L(43,"span"),Y(44,"i"),V(),L(45,"span"),Y(46,"t"),V(),L(47,"span"),Y(48,"o"),V()()()(),L(49,"nav")(50,"ul"),xt(51,XQ,4,2,"li",5),V(),L(52,"a",6),it(53,"i",7),V(),L(54,"div",8)(55,"div",9),Qe("click",function(){return i.toggleCart()}),Y(56,"\xd7"),V(),L(57,"h2"),Y(58,"Shopping Bag"),V(),xt(59,tY,2,1,"div",10),xt(60,nY,4,0,"div",11),xt(61,rY,3,0,"ng-template",null,12,iO),L(63,"div",13)(64,"button",14),Qe("click",function(){return i.redirectToCheckout()}),Y(65,"Ir a la p\xe1gina de pago"),V()()()(),it(66,"app-cart-sidebar"),L(67,"div",15)(68,"main"),it(69,"router-outlet"),V()(),L(70,"footer",16)(71,"p"),Y(72,"Samu y Alex \xa9 2023"),V()()()),2&r&&(me(51),xe("ngForOf",i.pages),me(3),Rd("open",i.isCartOpen),me(5),xe("ngIf",i.detalles.length>0),me(1),xe("ngIf",0===i.detalles.length))},dependencies:[wv,Wa,BT,pg,QQ],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap";@charset "UTF-8";[_ngcontent-%COMP%]:root{--primary-color: #d32f2f;--secondary-color: #5c6bc0;--hover-color: #ff9900;--background-color: #f7f7f7;--text-color: #333;--footer-background: #333;--link-color: white;--hover-link-color: var(--hover-color)}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-in-out}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%;height:100%;font-family:Roboto,sans-serif}body[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Montserrat,sans-serif;background-image:url(/assets/s.jpg);background-size:cover;background-position:center center;background-repeat:no-repeat;background-attachment:scroll}.content[_ngcontent-%COMP%]{flex:1;padding:20px}footer[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:10px;text-align:center}.app-header[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;padding:1rem 0;text-align:center}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Georgia,serif;display:inline-block;margin-right:.2em;animation:_ngcontent-%COMP%_jump .6s ease-in-out infinite}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{margin-right:0}@keyframes _ngcontent-%COMP%_jump{0%,to{transform:translateY(0)}50%{transform:translateY(-12px)}}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;font-family:Montserrat,sans-serif;display:inline-block;animation:_ngcontent-%COMP%_jump 1.5s ease-in-out infinite}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){animation-delay:.4s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){animation-delay:.5s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){animation-delay:.6s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(8){animation-delay:.7s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(9){animation-delay:.8s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(10){animation-delay:.9s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(11){animation-delay:1s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(12){animation-delay:1.1s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(13){animation-delay:1.2s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(14){animation-delay:1.3s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(15){animation-delay:1.4s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(16){animation-delay:1.5s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(17){animation-delay:1.6s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(18){animation-delay:1.7s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(19){animation-delay:1.8s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(20){animation-delay:1.9s}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(21){animation-delay:2s}.navigation-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%;margin-top:1rem}.login-link[_ngcontent-%COMP%], .cart-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-left:1rem}.app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;text-align:center;padding:1rem;width:100%;flex-shrink:0;margin-top:auto}.main-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.main-content[_ngcontent-%COMP%]{flex:1;padding:1rem}.top-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem;background-color:#d32f2f;color:#fff}.top-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:1rem;text-decoration:none}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:80px;padding:0;background-color:#84212c}header[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--link-color)}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:32px;margin:0}nav[_ngcontent-%COMP%]{background-color:#333;height:40px;display:flex;align-items:center;justify-content:flex-end}nav[_ngcontent-%COMP%]{background-color:#333;display:flex;align-items:center;justify-content:flex-end}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:18px;font-family:Roboto,sans-serif}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:18px;transition:color .3s ease-in-out,transform .3s ease-in-out}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f90;color:var(--hover-link-color);transform:translateY(-2px)}main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;background-color:#fff}to{opacity:1;background-color:transparent}}footer[_ngcontent-%COMP%]{margin-top:auto;flex-shrink:0}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px}img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;padding:10px;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 4px #0000001a;width:auto;max-width:100%;height:auto}.div-center[_ngcontent-%COMP%]{margin:0 auto;width:50%}.cart-sidebar[_ngcontent-%COMP%]{position:fixed;right:0;top:0;width:350px;height:100%;background-color:#fff;box-shadow:-2px 0 8px #0000001a;z-index:100;transform:translate(100%);transition:transform .3s ease-in-out;max-height:100vh;overflow-y:auto;display:flex;flex-direction:column}.cart-sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.cart-sidebar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{font-size:1.5em;cursor:pointer;margin:1em;align-self:flex-start}.cart-sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2em;margin-top:.5em}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]{padding:1em;text-align:center;max-height:calc(100vh - 100px);overflow-y:auto;flex-grow:1}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:2em;color:gray;font-size:1em}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#5c6bc0;color:#fff;border:none;padding:10px 20px;font-size:1em;font-weight:700;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .1s;margin-top:20px;box-shadow:0 2px 4px #0003}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ef0b31;transform:scale(1.05)}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.product-section[_ngcontent-%COMP%]{background-color:var(--background-color)}.product[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0003;transform:scale(1.03)}footer[_ngcontent-%COMP%]{background-color:var(--footer-background);color:var(--text-color)}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.cart-sidebar[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ef0b31}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.cart-item-image[_ngcontent-%COMP%]{width:80px;height:auto;margin-right:10px}.cart-item-details[_ngcontent-%COMP%]{flex-grow:1}.cart-item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .cart-item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#67a6e4;color:#000;border:none;border-radius:5px;cursor:pointer;transition:all .3s ease;font-size:1em;box-shadow:0 2px 4px #0003}button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000004d;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 1px 2px #0003}.fixed-button-container[_ngcontent-%COMP%]{position:relative;width:100%;text-align:center;z-index:1000;padding:20px 10px}.fixed-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#67a6e4;color:#000;border:none;border-radius:5px;cursor:pointer;font-size:1em;box-shadow:0 2px 4px #0003}.fixed-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000004d;transform:translateY(-2px)}.fixed-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 1px 2px #0003}.full-screen-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;width:100%}.full-screen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;text-align:center}.whatsapp-float[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;bottom:40px;left:40px;background-color:#25d366;color:#fff;border-radius:50px;text-align:center;font-size:30px;line-height:60px;z-index:100}.whatsapp-float[_ngcontent-%COMP%]:hover{background-color:#128c7e}.logo[_ngcontent-%COMP%]{margin-right:0;height:auto;width:120px;border:none;object-fit:contain}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_pulseBackground{0%{background-color:#ff8a00;background-size:100% 100%}50%{background-color:#ffa931;background-size:110% 110%}to{background-color:#ff8a00;background-size:100% 100%}}.app-header[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#ff0000,#dc8d32,#ffa931);animation:_ngcontent-%COMP%_pulseBackground 10s ease-in-out infinite;color:#fff;padding:1rem 0;text-align:center}.contenedor-centrado[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.contenedor-centrado[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}']})}return n})();const sY=["addListener","removeListener"],oY=["addEventListener","removeEventListener"],aY=["on","off"];function lE(n,e,t,r){if(I(t)&&(r=t,t=void 0),r)return lE(n,e,t).pipe(CT(r));const[i,s]=function lY(n){return I(n.addEventListener)&&I(n.removeEventListener)}(n)?oY.map(o=>a=>n[o](e,a,t)):function uY(n){return I(n.addListener)&&I(n.removeListener)}(n)?sY.map(xV(n,e)):function cY(n){return I(n.on)&&I(n.off)}(n)?aY.map(xV(n,e)):[];if(!i&&gt(n))return Bt(o=>lE(o,e,t))(hn(n));if(!i)throw new TypeError("Invalid event target");return new nt(o=>{const a=(...u)=>o.next(1<u.length?u:u[0]);return i(a),()=>s(a)})}function xV(n,e){return t=>r=>n[t](e,r)}const su=new nt(Te),hY={connector:()=>new j};function NV(n,e=hY){const{connector:t}=e;return H((r,i)=>{const s=t();hn(n(function dY(n){return new nt(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}class gY extends It{constructor(e,t){super()}schedule(e,t=0){return this}}const dE={setInterval(n,e,...t){const{delegate:r}=dE;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dE;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class OV extends gY{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return dE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&dE.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Le(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const vb={now:()=>(vb.delegate||Date).now(),delegate:void 0};class Pg{constructor(e,t=Pg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Pg.now=vb.now;class kV extends Pg{constructor(e,t=Pg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const hE=new kV(OV),mY=hE;function FV(n,e){return e?t=>Yp(e.pipe(Pi(1),function _Y(){return H((n,e)=>{n.subscribe(_e(e,Te))})}()),t.pipe(FV(n))):Bt((t,r)=>hn(n(t,r)).pipe(Pi(1),X1(t)))}const Rg="Service workers are disabled or not supported by this browser";class fE{constructor(e){if(this.serviceWorker=e,e){const r=lE(e,"controllerchange").pipe(ve(()=>e.controller)),s=Yp(Sv(()=>q(e.controller)),r);this.worker=s.pipe(fr(f=>!!f)),this.registration=this.worker.pipe(dt(()=>e.getRegistration()));const l=lE(e,"message").pipe(ve(f=>f.data)).pipe(fr(f=>f&&f.type)).pipe(function pY(n){return n?e=>NV(n)(e):e=>function fY(n,e){const t=I(n)?n:()=>n;return I(e)?NV(e,{connector:t}):r=>new DT(r,t)}(new j)(e)}());l.connect(),this.events=l}else this.worker=this.events=this.registration=function IY(n){return Sv(()=>Cc(new Error(n)))}(Rg)}postMessage(e,t){return this.worker.pipe(Pi(1),Wn(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(fr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Pi(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(fr(t=>t.nonce===e),Pi(1),ve(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let VV=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new j,!t.isEnabled)return this.messages=su,this.notificationClicks=su,void(this.subscription=su);this.messages=this.sw.eventsOfType("PUSH").pipe(ve(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ve(i=>i.data)),this.pushManager=this.sw.registration.pipe(ve(i=>i.pushManager));const r=this.pushManager.pipe(dt(i=>i.getSubscription()));this.subscription=K(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Rg));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(dt(o=>o.subscribe(r)),Pi(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Pi(1),dt(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Rg))}decodeBase64(t){return atob(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(fE))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),LV=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=su,this.available=su,this.activated=su,void(this.unrecoverable=su);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(fr(r=>"VERSION_READY"===r.type),ve(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Rg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Rg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(fE))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const UV=new ue("NGSW_REGISTER_SCRIPT");function wY(n,e,t,r){return()=>{if(!T1(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[o,...a]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=q(null);break;case"registerWithDelay":i=BV(+a[0]||0);break;case"registerWhenStable":i=a[0]?K(jV(n),BV(+a[0])):jV(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(vt).runOutsideAngular(()=>i.pipe(Pi(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function BV(n){return q(null).pipe(function EY(n,e=hE){const t=function vY(n=0,e,t=mY){let r=-1;return null!=e&&(ni(e)?t=e:r=e),new nt(i=>{let s=function yY(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return FV(()=>t)}(n))}function jV(n){return n.get(oo).isStable.pipe(fr(t=>t))}function CY(n,e){return new fE(T1(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class Eb{}function TY(n,e={}){return _p([VV,LV,{provide:UV,useValue:n},{provide:Eb,useValue:e},{provide:fE,useFactory:CY,deps:[Eb,Ss]},{provide:nv,useFactory:wY,deps:[Rr,UV,Eb,Ss],multi:!0}])}let bY=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[TY(t,r)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({providers:[VV,LV]})}return n})();function $V(n){return new N(3e3,!1)}function ou(n){switch(n.length){case 0:return new Sg;case 1:return n[0];default:return new SV(n)}}function HV(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(u=>{const l=u.get("offset"),f=l==o,g=f&&a||new Map;u.forEach((m,y)=>{let E=y,w=m;if("offset"!==y)switch(E=n.normalizePropertyName(E,i),w){case"!":w=t.get(y);break;case ea:w=r.get(y);break;default:w=n.normalizeStyleValue(y,E,w,i)}g.set(E,w)}),f||s.push(g),a=g,o=l}),i.length)throw function KY(n){return new N(3502,!1)}();return s}function Ib(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&wb(t,"start",n)));break;case"done":n.onDone(()=>r(t&&wb(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&wb(t,"destroy",n)))}}function wb(n,e,t){const s=Cb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Cb(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Wi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function zV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const oJ=(()=>typeof document>"u"?null:document.documentElement)();function Tb(n){const e=n.parentNode||n.host||null;return e===oJ?null:e}let Mc=null,qV=!1;function GV(n,e){for(;e;){if(e===n)return!0;e=Tb(e)}return!1}function WV(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let KV=(()=>{class n{validateStyleProperty(t){return function uJ(n){Mc||(Mc=function cJ(){return typeof document<"u"?document.body:null}()||{},qV=!!Mc.style&&"WebkitAppearance"in Mc.style);let e=!0;return Mc.style&&!function aJ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Mc.style,!e&&qV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Mc.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return GV(t,r)}getParentElement(t){return Tb(t)}query(t,r,i){return WV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],u){return new Sg(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),bb=(()=>{class n{static#e=this.NOOP=new KV}return n})();const lJ=1e3,Db="ng-enter",pE="ng-leave",gE="ng-trigger",mE=".ng-trigger",QV="ng-animating",Ab=".ng-animating";function ta(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Sb(parseFloat(e[1]),e[2])}function Sb(n,e){return"s"===e?n*lJ:n}function _E(n,e,t){return n.hasOwnProperty("duration")?n:function hJ(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push($V()),{duration:0,delay:0,easing:""};i=Sb(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=Sb(parseFloat(u),a[4]));const l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(function DY(){return new N(3100,!1)}()),a=!0),s<0&&(e.push(function AY(){return new N(3101,!1)}()),a=!0),a&&e.splice(u,0,$V())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Mg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function YV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function au(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function po(n,e,t){e.forEach((r,i)=>{const s=Rb(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function xc(n,e){e.forEach((t,r)=>{const i=Rb(r);n.style[i]=""})}function xg(n){return Array.isArray(n)?1==n.length?n[0]:DV(n):n}const Pb=new RegExp("{{\\s*(.+?)\\s*}}","g");function XV(n){let e=[];if("string"==typeof n){let t;for(;t=Pb.exec(n);)e.push(t[1]);Pb.lastIndex=0}return e}function Ng(n,e,t){const r=n.toString(),i=r.replace(Pb,(s,o)=>{let a=e[o];return null==a&&(t.push(function PY(n){return new N(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function yE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const gJ=/-+([a-z0-9])/g;function Rb(n){return n.replace(gJ,(...e)=>e[1].toUpperCase())}function Ki(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function RY(n){return new N(3004,!1)}()}}function eL(n,e){return window.getComputedStyle(n)[e]}const vE="*";function yJ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function vJ(n,e,t){if(":"==n[0]){const u=function EJ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function zY(n){return new N(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function HY(n){return new N(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(tL(i,o));"<"==s[0]&&!(i==vE&&o==vE)&&e.push(tL(o,i))}(r,t,e)):t.push(n),t}const EE=new Set(["true","1"]),IE=new Set(["false","0"]);function tL(n,e){const t=EE.has(n)||IE.has(n),r=EE.has(e)||IE.has(e);return(i,s)=>{let o=n==vE||n==i,a=e==vE||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?EE.has(n):IE.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?EE.has(e):IE.has(e)),o&&a}}const IJ=new RegExp("s*:selfs*,?","g");function Mb(n,e,t,r){return new wJ(n).build(e,t,r)}class wJ{constructor(e){this._driver=e}build(e,t,r){const i=new bJ(t);return this._resetContextStyleTimingState(i),Ki(this,xg(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function xY(){return new N(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const u=a,l=u.name;l.toString().split(/\s*,\s*/).forEach(f=>{u.name=f,s.push(this.visitState(u,t))}),u.name=l}else if(1==a.type){const u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function NY(){return new N(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{XV(u).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(yE(s.values()),t.errors.push(function OY(n,e){return new N(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ki(this,xg(e.animation),t);return{type:1,matchers:yJ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Nc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ki(this,r,t)),options:Nc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ki(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Nc(e.options)}}visitAnimate(e,t){const r=function AJ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return xb(_E(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=xb(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=_E(t,e);return xb(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ag({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=Ag(l)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ea?r.push(a):t.errors.push(new N(3002,!1)):r.push(YV(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const l=t.collectedStyles.get(t.currentQuerySelector),f=l.get(u);let g=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function FY(n,e,t,r,i){return new N(3010,!1)}()),g=!1),s=f.startTime),g&&l.set(u,{startTime:s,endTime:i}),t.options&&function pJ(n,e,t){const r=e.params||{},i=XV(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function SY(n){return new N(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function VY(){return new N(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,l=0;const f=e.steps.map(R=>{const P=this._makeStyleAst(R,t);let O=null!=P.offset?P.offset:function DJ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(P.styles),W=0;return null!=O&&(s++,W=P.offset=O),u=u||W<0||W>1,a=a||W<l,l=W,o.push(W),P});u&&t.errors.push(function LY(){return new N(3012,!1)}()),a&&t.errors.push(function UY(){return new N(3200,!1)}());const g=e.steps.length;let m=0;s>0&&s<g?t.errors.push(function BY(){return new N(3202,!1)}()):0==s&&(m=1/(g-1));const y=g-1,E=t.currentTime,w=t.currentAnimateTimings,C=w.duration;return f.forEach((R,P)=>{const O=m>0?P==y?1:m*P:o[P],W=O*C;t.currentTime=E+w.delay+W,w.duration=W,this._validateStyleAst(R,t),R.offset=O,r.styles.push(R)}),r}visitReference(e,t){return{type:8,animation:Ki(this,xg(e.animation),t),options:Nc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Nc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Nc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function CJ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(IJ,"")),n=n.replace(/@\*/g,mE).replace(/@\w+/g,t=>mE+"-"+t.slice(1)).replace(/:animating/g,Ab),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Wi(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ki(this,xg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Nc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jY(){return new N(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:_E(e.timings,t.errors,!0);return{type:12,animation:Ki(this,xg(e.animation),t),timings:r,options:null}}}class bJ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Nc(n){return n?(n=Mg(n)).params&&(n.params=function TJ(n){return n?Mg(n):null}(n.params)):n={},n}function xb(n,e,t){return{duration:n,delay:e,easing:t}}function Nb(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class wE{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const RJ=new RegExp(":enter","g"),xJ=new RegExp(":leave","g");function Ob(n,e,t,r,i,s=new Map,o=new Map,a,u,l=[]){return(new NJ).buildKeyframes(n,e,t,r,i,s,o,a,u,l)}class NJ{buildKeyframes(e,t,r,i,s,o,a,u,l,f=[]){l=l||new wE;const g=new kb(e,t,l,i,s,f,[]);g.options=u;const m=u.delay?ta(u.delay):0;g.currentTimeline.delayNextStep(m),g.currentTimeline.setStyles([o],null,g.errors,u),Ki(this,r,g);const y=g.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let w=y.length-1;w>=0;w--){const C=y[w];if(C.element===t){E=C;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,g.errors,u)}return y.length?y.map(E=>E.buildKeyframes()):[Nb(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ta(Ng(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ta(r.duration):null,a=null!=r.delay?ta(r.delay):null;return 0!==o&&e.forEach(u=>{const l=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ki(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=CE);const o=ta(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ki(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ta(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ki(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return _E(t.params?Ng(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ta(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=CE);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((l,f)=>{t.currentQueryIndex=f;const g=t.createSubContext(e.options,l);s&&g.delayNextStep(s),l===t.element&&(u=g.currentTimeline),Ki(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const f=t.currentTimeline;u&&f.delayNextStep(u);const g=f.currentTime;Ki(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const CE={};class kb{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=CE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new TE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ta(r.duration)),null!=r.delay&&(i.delay=ta(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ng(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new kb(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=CE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new OJ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(RJ,"."+this._enterClassName)).replace(xJ,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function $Y(n){return new N(3014,!1)}()),a}}class TE{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new TE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ea),this._currentKeyframe.set(t,ea);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function kJ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ea)}else au(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,u]of o){const l=Ng(u,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ea),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const l=au(a,new Map,this._backFill);l.forEach((f,g)=>{"!"===f?e.add(g):f===ea&&t.add(g)}),r||l.set("offset",u/this.duration),i.push(l)});const s=e.size?yE(e.values()):[],o=t.size?yE(t.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return Nb(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class OJ extends TE{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,u=au(e[0]);u.set("offset",0),s.push(u);const l=au(e[0]);l.set("offset",iL(a)),s.push(l);const f=e.length-1;for(let g=1;g<=f;g++){let m=au(e[g]);const y=m.get("offset");m.set("offset",iL((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return Nb(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function iL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Fb{}const FJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class VJ extends Fb{normalizePropertyName(e,t){return Rb(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(FJ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function MY(n,e){return new N(3005,!1)}())}return o+s}}function sL(n,e,t,r,i,s,o,a,u,l,f,g,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:f,totalTime:g,errors:m}}const Vb={};class oL{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function LJ(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,l,f){const g=[],m=this.ast.options&&this.ast.options.params||Vb,E=this.buildStyles(r,a&&a.params||Vb,g),w=u&&u.params||Vb,C=this.buildStyles(i,w,g),R=new Set,P=new Map,O=new Map,W="void"===i,ce={params:UJ(w,m),delay:this.ast.options?.delay},Re=f?[]:Ob(e,t,this.ast.animation,s,o,E,C,ce,l,g);let $e=0;if(Re.forEach(_i=>{$e=Math.max(_i.duration+_i.delay,$e)}),g.length)return sL(t,this._triggerName,r,i,W,E,C,[],[],P,O,$e,g);Re.forEach(_i=>{const Ni=_i.element,YI=Wi(P,Ni,new Set);_i.preStyleProps.forEach(ol=>YI.add(ol));const Wm=Wi(O,Ni,new Set);_i.postStyleProps.forEach(ol=>Wm.add(ol)),Ni!==t&&R.add(Ni)});const Nt=yE(R.values());return sL(t,this._triggerName,r,i,W,E,C,Re,Nt,P,O,$e)}}function UJ(n,e){const t=Mg(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class BJ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Mg(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ng(o,i,t));const u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}}class $J{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new BJ(i.style,i.options&&i.options.params||{},r))}),aL(this.states,"true","1"),aL(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new oL(e,i,this.states))}),this.fallbackTransition=function HJ(n,e,t){return new oL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function aL(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const zJ=new wE;class qJ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=Mb(this._driver,t,r,[]);if(r.length)throw function ZY(n){return new N(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=HV(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=Ob(this._driver,t,s,Db,pE,new Map,new Map,r,zJ,i),o.forEach(f=>{const g=Wi(a,f.element,new Map);f.postStyleProps.forEach(m=>g.set(m,null))})):(i.push(function QY(){return new N(3300,!1)}()),o=[]),i.length)throw function YY(n){return new N(3504,!1)}();a.forEach((f,g)=>{f.forEach((m,y)=>{f.set(y,this._driver.computeStyle(g,y,ea))})});const l=ou(o.map(f=>{const g=a.get(f.element);return this._buildPlayer(f,new Map,g)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function JY(n){return new N(3301,!1)}();return t}listen(e,t,r,i){const s=Cb(t,"","","");return Ib(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const uL="ng-animate-queued",Lb="ng-animate-disabled",QJ=[],cL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},YJ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ks="__ng_removed";class Ub{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function tX(n){return n??null}(r?e.value:e),r){const s=Mg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Og="void",Bb=new Ub(Og);class JJ{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,_s(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function XY(n,e){return new N(3302,!1)}();if(null==r||0==r.length)throw function eJ(n){return new N(3303,!1)}();if(!function nX(n){return"start"==n||"done"==n}(r))throw function tJ(n,e){return new N(3400,!1)}();const s=Wi(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Wi(this._engine.statesByElement,e,new Map);return a.has(t)||(_s(e,gE),_s(e,gE+"-"+t),a.set(t,Bb)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function nJ(n){return new N(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new jb(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(_s(e,gE),_s(e,gE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t);const l=new Ub(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),a.set(t,l),u||(u=Bb),l.value!==Og&&u.value===l.value){if(!function sX(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,l.params)){const w=[],C=s.matchStyles(u.value,u.params,w),R=s.matchStyles(l.value,l.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{xc(e,C),po(e,R)})}return}const m=Wi(this._engine.playersByElement,e,[]);m.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let y=s.matchTransition(u.value,l.value,e,l.params),E=!1;if(!y){if(!i)return;y=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:u,toState:l,player:o,isFallbackTransition:E}),E||(_s(e,uL),o.onStart(()=>{th(e,uL)})),o.onDone(()=>{let w=this.players.indexOf(o);w>=0&&this.players.splice(w,1);const C=this._engine.playersByElement.get(e);if(C){let R=C.indexOf(o);R>=0&&C.splice(R,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,mE,!0);r.forEach(i=>{if(i[ks])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,l)=>{if(o.set(l,u.value),this._triggers.has(l)){const f=this.trigger(e,l,Og,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&ou(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,l=r.get(o)||Bb,f=new Ub(Og),g=new jb(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:l,toState:f,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ks];(!s||s===cL)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){_s(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=Cb(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,Ib(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class XJ{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new JJ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const u=i.get(a);if(u){const l=r.indexOf(u);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(bE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bE(t))return;const s=t[ks];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),_s(e,Lb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),th(e,Lb))}removeNode(e,t,r){if(bE(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ks]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return bE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,mE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ab,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ou(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ks];if(t&&t.setForRemoval){if(e[ks]=cL,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Lb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)_s(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ou(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function rJ(n){return new N(3402,!1)}()}_flushAnimations(e,t){const r=new wE,i=[],s=new Map,o=[],a=new Map,u=new Map,l=new Map,f=new Set;this.disabledNodes.forEach(Se=>{f.add(Se);const Ne=this.driver.query(Se,".ng-animate-queued",!0);for(let Be=0;Be<Ne.length;Be++)f.add(Ne[Be])});const g=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=hL(m,this.collectedEnterElements),E=new Map;let w=0;y.forEach((Se,Ne)=>{const Be=Db+w++;E.set(Ne,Be),Se.forEach(Dt=>_s(Dt,Be))});const C=[],R=new Set,P=new Set;for(let Se=0;Se<this.collectedLeaveElements.length;Se++){const Ne=this.collectedLeaveElements[Se],Be=Ne[ks];Be&&Be.setForRemoval&&(C.push(Ne),R.add(Ne),Be.hasAnimation?this.driver.query(Ne,".ng-star-inserted",!0).forEach(Dt=>R.add(Dt)):P.add(Ne))}const O=new Map,W=hL(m,Array.from(R));W.forEach((Se,Ne)=>{const Be=pE+w++;O.set(Ne,Be),Se.forEach(Dt=>_s(Dt,Be))}),e.push(()=>{y.forEach((Se,Ne)=>{const Be=E.get(Ne);Se.forEach(Dt=>th(Dt,Be))}),W.forEach((Se,Ne)=>{const Be=O.get(Ne);Se.forEach(Dt=>th(Dt,Be))}),C.forEach(Se=>{this.processLeaveNode(Se)})});const ce=[],Re=[];for(let Se=this._namespaceList.length-1;Se>=0;Se--)this._namespaceList[Se].drainQueuedTransitions(t).forEach(Be=>{const Dt=Be.player,Er=Be.element;if(ce.push(Dt),this.collectedEnterElements.length){const ei=Er[ks];if(ei&&ei.setForMove){if(ei.previousTriggersValues&&ei.previousTriggersValues.has(Be.triggerName)){const al=ei.previousTriggersValues.get(Be.triggerName),Is=this.statesByElement.get(Be.element);if(Is&&Is.has(Be.triggerName)){const JI=Is.get(Be.triggerName);JI.value=al,Is.set(Be.triggerName,JI)}}return void Dt.destroy()}}const bo=!g||!this.driver.containsElement(g,Er),Xi=O.get(Er),Ru=E.get(Er),In=this._buildInstruction(Be,r,Ru,Xi,bo);if(In.errors&&In.errors.length)return void Re.push(In);if(bo)return Dt.onStart(()=>xc(Er,In.fromStyles)),Dt.onDestroy(()=>po(Er,In.toStyles)),void i.push(Dt);if(Be.isFallbackTransition)return Dt.onStart(()=>xc(Er,In.fromStyles)),Dt.onDestroy(()=>po(Er,In.toStyles)),void i.push(Dt);const $j=[];In.timelines.forEach(ei=>{ei.stretchStartingKeyframe=!0,this.disabledNodes.has(ei.element)||$j.push(ei)}),In.timelines=$j,r.append(Er,In.timelines),o.push({instruction:In,player:Dt,element:Er}),In.queriedElements.forEach(ei=>Wi(a,ei,[]).push(Dt)),In.preStyleProps.forEach((ei,al)=>{if(ei.size){let Is=u.get(al);Is||u.set(al,Is=new Set),ei.forEach((JI,rP)=>Is.add(rP))}}),In.postStyleProps.forEach((ei,al)=>{let Is=l.get(al);Is||l.set(al,Is=new Set),ei.forEach((JI,rP)=>Is.add(rP))})});if(Re.length){const Se=[];Re.forEach(Ne=>{Se.push(function iJ(n,e){return new N(3505,!1)}())}),ce.forEach(Ne=>Ne.destroy()),this.reportError(Se)}const $e=new Map,Nt=new Map;o.forEach(Se=>{const Ne=Se.element;r.has(Ne)&&(Nt.set(Ne,Ne),this._beforeAnimationBuild(Se.player.namespaceId,Se.instruction,$e))}),i.forEach(Se=>{const Ne=Se.element;this._getPreviousPlayers(Ne,!1,Se.namespaceId,Se.triggerName,null).forEach(Dt=>{Wi($e,Ne,[]).push(Dt),Dt.destroy()})});const _i=C.filter(Se=>pL(Se,u,l)),Ni=new Map;dL(Ni,this.driver,P,l,ea).forEach(Se=>{pL(Se,u,l)&&_i.push(Se)});const Wm=new Map;y.forEach((Se,Ne)=>{dL(Wm,this.driver,new Set(Se),u,"!")}),_i.forEach(Se=>{const Ne=Ni.get(Se),Be=Wm.get(Se);Ni.set(Se,new Map([...Ne?.entries()??[],...Be?.entries()??[]]))});const ol=[],Bj=[],jj={};o.forEach(Se=>{const{element:Ne,player:Be,instruction:Dt}=Se;if(r.has(Ne)){if(f.has(Ne))return Be.onDestroy(()=>po(Ne,Dt.toStyles)),Be.disabled=!0,Be.overrideTotalTime(Dt.totalTime),void i.push(Be);let Er=jj;if(Nt.size>1){let Xi=Ne;const Ru=[];for(;Xi=Xi.parentNode;){const In=Nt.get(Xi);if(In){Er=In;break}Ru.push(Xi)}Ru.forEach(In=>Nt.set(In,Er))}const bo=this._buildAnimation(Be.namespaceId,Dt,$e,s,Wm,Ni);if(Be.setRealPlayer(bo),Er===jj)ol.push(Be);else{const Xi=this.playersByElement.get(Er);Xi&&Xi.length&&(Be.parentPlayer=ou(Xi)),i.push(Be)}}else xc(Ne,Dt.fromStyles),Be.onDestroy(()=>po(Ne,Dt.toStyles)),Bj.push(Be),f.has(Ne)&&i.push(Be)}),Bj.forEach(Se=>{const Ne=s.get(Se.element);if(Ne&&Ne.length){const Be=ou(Ne);Se.setRealPlayer(Be)}}),i.forEach(Se=>{Se.parentPlayer?Se.syncPlayerEvents(Se.parentPlayer):Se.destroy()});for(let Se=0;Se<C.length;Se++){const Ne=C[Se],Be=Ne[ks];if(th(Ne,pE),Be&&Be.hasAnimation)continue;let Dt=[];if(a.size){let bo=a.get(Ne);bo&&bo.length&&Dt.push(...bo);let Xi=this.driver.query(Ne,Ab,!0);for(let Ru=0;Ru<Xi.length;Ru++){let In=a.get(Xi[Ru]);In&&In.length&&Dt.push(...In)}}const Er=Dt.filter(bo=>!bo.destroyed);Er.length?rX(this,Ne,Er):this.processLeaveNode(Ne)}return C.length=0,ol.forEach(Se=>{this.players.push(Se),Se.onDone(()=>{Se.destroy();const Ne=this.players.indexOf(Se);this.players.splice(Ne,1)}),Se.play()}),ol}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==Og;a.forEach(l=>{l.queued||!u&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const l=u.element,f=l!==s,g=Wi(r,l,[]);this._getPreviousPlayers(l,f,o,a,t.toState).forEach(y=>{const E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),g.push(y)})}xc(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,u=t.element,l=[],f=new Set,g=new Set,m=t.timelines.map(E=>{const w=E.element;f.add(w);const C=w[ks];if(C&&C.removedBeforeQueried)return new Sg(E.duration,E.delay);const R=w!==u,P=function iX(n){const e=[];return fL(n,e),e}((r.get(w)||QJ).map($e=>$e.getRealPlayer())).filter($e=>!!$e.element&&$e.element===w),O=s.get(w),W=o.get(w),ce=HV(this._normalizer,E.keyframes,O,W),Re=this._buildPlayer(E,ce,P);if(E.subTimeline&&i&&g.add(w),R){const $e=new jb(e,a,w);$e.setRealPlayer(Re),l.push($e)}return Re});l.forEach(E=>{Wi(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function eX(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,E.element,E))}),f.forEach(E=>_s(E,QV));const y=ou(m);return y.onDestroy(()=>{f.forEach(E=>th(E,QV)),po(u,t.toStyles)}),g.forEach(E=>{Wi(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Sg(e.duration,e.delay)}}class jb{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Sg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Ib(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Wi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bE(n){return n&&1===n.nodeType}function lL(n,e){const t=n.style.display;return n.style.display=e??"none",t}function dL(n,e,t,r,i){const s=[];t.forEach(u=>s.push(lL(u)));const o=[];r.forEach((u,l)=>{const f=new Map;u.forEach(g=>{const m=e.computeStyle(l,g,i);f.set(g,m),(!m||0==m.length)&&(l[ks]=YJ,o.push(l))}),n.set(l,f)});let a=0;return t.forEach(u=>lL(u,s[a++])),o}function hL(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let u=s.get(a);if(u)return u;const l=a.parentNode;return u=t.has(l)?l:i.has(l)?1:o(l),s.set(a,u),u}return e.forEach(a=>{const u=o(a);1!==u&&t.get(u).push(a)}),t}function _s(n,e){n.classList?.add(e)}function th(n,e){n.classList?.remove(e)}function rX(n,e,t){ou(t).onDone(()=>n.processLeaveNode(e))}function fL(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof SV?fL(r.players,e):e.push(r)}}function pL(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class DE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new XJ(e,t,r),this._timelineEngine=new qJ(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],f=Mb(this._driver,s,u,[]);if(u.length)throw function WY(n,e){return new N(3404,!1)}();a=function jJ(n,e,t){return new $J(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=zV(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=zV(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let aX=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&po(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(po(this._element,this._initialStyles),this._endStyles&&(po(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(xc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xc(this._element,this._endStyles),this._endStyles=null),po(this._element,this._initialStyles),this._state=3)}}return n})();function $b(n){let e=null;return n.forEach((t,r)=>{(function uX(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class gL{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:eL(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cX{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return GV(e,t)}getParentElement(e){return Tb(e)}query(e,t,r){return WV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const l=new Map,f=o.filter(y=>y instanceof gL);(function mJ(n,e){return 0===n||0===e})(r,i)&&f.forEach(y=>{y.currentSnapshot.forEach((E,w)=>l.set(w,E))});let g=function fJ(n){return n.length?n[0]instanceof Map?n:n.map(e=>YV(e)):[]}(t).map(y=>au(y));g=function _J(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,eL(n,a)))}}return e}(e,g,l);const m=function oX(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$b(e[0]),e.length>1&&(r=$b(e[e.length-1]))):e instanceof Map&&(t=$b(e)),t||r?new aX(n,t,r):null}(e,g);return new gL(e,g,u,m)}}let lX=(()=>{class n extends TV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:wn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?DV(t):t;return mL(this._renderer,null,r,"register",[i]),new dX(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Ip),ee(sr))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class dX extends EQ{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hX(this._id,e,t||{},this._renderer)}}class hX{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return mL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mL(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const _L="@.disabled";let fX=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new yL("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const u=f=>{Array.isArray(f)?f.forEach(u):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(u),new pX(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Ip),ee(DE),ee(vt))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class yL{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==_L?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class pX extends yL{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==_L?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function gX(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function mX(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let _X=(()=>{class n extends DE{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(sr),ee(bb),ee(Fb),ee(oo))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const vL=[{provide:TV,useClass:lX},{provide:Fb,useFactory:function yX(){return new VJ}},{provide:DE,useClass:_X},{provide:Ip,useFactory:function vX(n,e,t){return new fX(n,e,t)},deps:[vT,DE,vt]}],Hb=[{provide:bb,useFactory:()=>new cX},{provide:LR,useValue:"BrowserAnimations"},...vL],EL=[{provide:bb,useClass:KV},{provide:LR,useValue:"NoopAnimations"},...vL];let EX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?EL:Hb}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n});static#n=this.\u0275inj=Rn({providers:Hb,imports:[$1]})}return n})();var nh=We(534);(0,nh.registerVersion)("firebase","10.8.0","app");const bX=new class TX extends kV{}(class CX extends OV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),DX=new gd("ANGULARFIRE2_VERSION");class IL{constructor(){return((n,e)=>{const t=(0,nh.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(SX)}}const SX="app-check";function rh(){}class wL{zone;delegate;constructor(e,t=bX){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class PX{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rh,{},rh,rh)),t.pipe(Wn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let CL=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new wL(Zone.current)),this.insideAngular=t.run(()=>new wL(Zone.current,hE)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ee(vt))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zi(n){return function MX(n){return function(t){return(t=t.lift(new PX(n.ngZone))).pipe(Ur(n.outsideAngular),wr(n.insideAngular))}}(function ih(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var kg=We(106);kg.Z.registerVersion("firebase","10.8.0","app-compat");const kX=["ngOnDestroy"];class TL{constructor(e){return e}}const zb=new ue("angularfire2.app.options"),qb=new ue("angularfire2.app.name");function Gb(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=kg.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>kg.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;LX("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new TL(o)}const LX=(n,...e)=>{};function bL(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function UX(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(DL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${BX?" You may need to reload as Firebase is not HMR aware.":""}`),DL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const BX=typeof module<"u"&&!!module.hot,DL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],We(999);class jX extends j{constructor(e=1/0,t=1/0,r=vb){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function AL(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Ue({connector:()=>new jX(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function SL(n,e){return I(e)?dt(()=>n,e):dt(()=>n)}const PL=new ue("angularfire2.auth.use-emulator"),RL=new ue("angularfire2.auth.settings"),ML=new ue("angularfire2.auth.tenant-id"),xL=new ue("angularfire2.auth.langugage-code"),NL=new ue("angularfire2.auth.use-device-language"),OL=new ue("angularfire.auth.persistence"),kL=(n,e,t,r,i,s,o,a)=>bL(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let FL=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,f,g,m,y){const E=new j,w=q(void 0).pipe(wr(o.outsideAngular),dt(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,999)))),ve(()=>Gb(t,s,r)),ve(C=>kL(C,s,a,l,f,g,u,m)),AL({bufferSize:1,refCount:!1}));if(Cv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=q(null);else{w.pipe(Za()).subscribe();const C=w.pipe(dt(O=>O.getRedirectResult().then(W=>W,()=>null)),Zi,AL({bufferSize:1,refCount:!1})),R=w.pipe(dt(O=>new nt(W=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(ce=>W.next(ce),ce=>W.error(ce),()=>W.complete()))})))),P=w.pipe(dt(O=>new nt(W=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(ce=>W.next(ce),ce=>W.error(ce),()=>W.complete()))}))));this.authState=C.pipe(SL(R),Ur(o.outsideAngular),wr(o.insideAngular)),this.user=C.pipe(SL(P),Ur(o.outsideAngular),wr(o.insideAngular)),this.idToken=this.user.pipe(dt(O=>O?A(O.getIdToken()):q(null))),this.idTokenResult=this.user.pipe(dt(O=>O?A(O.getIdTokenResult()):q(null))),this.credential=K(C,E,this.authState.pipe(fr(O=>!O))).pipe(ve(O=>O?.user?O:null),Ur(o.outsideAngular),wr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(kX.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(f=>{const g=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,w,s,{spy:{apply:(C,R,P)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&P.then(O=>E.next(O))}}})}static \u0275fac=function(r){return new(r||n)(ee(zb),ee(qb,8),ee(Ss),ee(vt),ee(CL),ee(PL,8),ee(RL,8),ee(ML,8),ee(xL,8),ee(NL,8),ee(OL,8),ee(IL,8))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Wb(){return H((n,e)=>{let t,r=!1;n.subscribe(_e(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ye,J=We(861),VL=We(537),go=We(879),Pt=We(58),HX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={},Kb=Kb||{},Ke=HX||self;function SE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zb="closure_uid_"+(1e9*Math.random()>>>0),qX=0;function GX(n,e,t){return n.call.apply(n.bind,arguments)}function WX(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?GX:WX).apply(null,arguments)}function PE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function uu(){this.s=this.s,this.o=this.o}uu.prototype.s=!1,uu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zX(n){Object.prototype.hasOwnProperty.call(n,Zb)&&n[Zb]||(n[Zb]=++qX)}(this)},uu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const LL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Qb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function UL(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(SE(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qr.prototype.h=function(){this.defaultPrevented=!0};var ZX=function(){if(!Ke.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Ke.addEventListener("test",t,e),Ke.removeEventListener("test",t,e)}catch{}return n}();function Vg(n){return/^[\s\xa0]*$/.test(n)}function RE(){var n=Ke.navigator;return n&&(n=n.userAgent)?n:""}function mo(n){return-1!=RE().indexOf(n)}function Yb(n){return Yb[" "](n),n}Yb[" "]=function(){};var Xb,n,YX=mo("Opera"),sh=mo("Trident")||mo("MSIE"),BL=mo("Edge"),Jb=BL||sh,jL=mo("Gecko")&&!(-1!=RE().toLowerCase().indexOf("webkit")&&!mo("Edge"))&&!(mo("Trident")||mo("MSIE"))&&!mo("Edge"),JX=-1!=RE().toLowerCase().indexOf("webkit")&&!mo("Edge");function $L(){var n=Ke.document;return n?n.documentMode:void 0}e:{var eD="",tD=(n=RE(),jL?/rv:([^\);]+)(\)|;)/.exec(n):BL?/Edge\/([\d\.]+)/.exec(n):sh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):JX?/WebKit\/(\S+)/.exec(n):YX?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(tD&&(eD=tD?tD[1]:""),sh){var nD=$L();if(null!=nD&&nD>parseFloat(eD)){Xb=String(nD);break e}}Xb=eD}var XX=Ke.document&&sh&&($L()||parseInt(Xb,10))||void 0;function Lg(n,e){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jL){e:{try{Yb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eee[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Lg.$.h.call(this)}}gr(Lg,Qr);var eee={2:"touch",3:"pen",4:"mouse"};Lg.prototype.h=function(){Lg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ug="closure_listenable_"+(1e6*Math.random()|0),tee=0;function nee(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++tee,this.fa=this.ia=!1}function ME(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function iD(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zL(n){const e={};for(const t in n)e[t]=n[t];return e}const qL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<qL.length;s++)t=qL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xE(n){this.src=n,this.g={},this.h=0}function sD(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=LL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ME(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function oD(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}xE.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=oD(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new nee(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var aD="closure_lm_"+(1e6*Math.random()|0),uD={};function WL(n,e,t,r,i){if(r&&r.once)return ZL(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)WL(n,e[s],t,r,i);return null}return t=hD(t),n&&n[Ug]?n.O(e,t,Fg(r)?!!r.capture:!!r,i):KL(n,e,t,!1,r,i)}function KL(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Fg(i)?!!i.capture:!!i,a=lD(n);if(a||(n[aD]=a=new xE(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function iee(){const e=see;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ZX||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZL(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZL(n,e[s],t,r,i);return null}return t=hD(t),n&&n[Ug]?n.P(e,t,Fg(r)?!!r.capture:!!r,i):KL(n,e,t,!0,r,i)}function QL(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)QL(n,e[s],t,r,i);else r=Fg(r)?!!r.capture:!!r,t=hD(t),n&&n[Ug]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=oD(s=n.g[e],t,r,i))&&(ME(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=lD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=oD(e,t,r,i)),(t=-1<n?e[n]:null)&&cD(t))}function cD(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ug])sD(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lD(e))?(sD(t,n),0==t.h&&(t.src=null,e[aD]=null)):ME(n)}}}function YL(n){return n in uD?uD[n]:uD[n]="on"+n}function see(n,e){if(n.fa)n=!0;else{e=new Lg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&cD(n),n=t.call(r,e)}return n}function lD(n){return(n=n[aD])instanceof xE?n:null}var dD="__closure_events_fn_"+(1e9*Math.random()>>>0);function hD(n){return"function"==typeof n?n:(n[dD]||(n[dD]=function(e){return n.handleEvent(e)}),n[dD])}function mr(){uu.call(this),this.i=new xE(this),this.S=this,this.J=null}function Mr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Qr(e,n);else if(e instanceof Qr)e.target=e.target||n;else{var i=e;GL(e=new Qr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=NE(o,r,!0,e)&&i}if(i=NE(o=e.g=n,r,!0,e)&&i,i=NE(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=NE(o=e.g=t[s],r,!1,e)&&i}function NE(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,u=o.la||o.src;o.ia&&sD(n.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}gr(mr,uu),mr.prototype[Ug]=!0,mr.prototype.removeEventListener=function(n,e,t,r){QL(this,n,e,t,r)},mr.prototype.N=function(){if(mr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ME(t[r]);delete n.g[e],n.h--}}this.J=null},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var fD=Ke.JSON.stringify;function aee(){var n=pD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var JL=new class oee{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new cee,n=>n.reset());class cee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lee(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function dee(n){Ke.setTimeout(()=>{throw n},0)}let Bg,jg=!1,pD=new class uee{constructor(){this.h=this.g=null}add(e,t){const r=JL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},XL=()=>{const n=Ke.Promise.resolve(void 0);Bg=()=>{n.then(hee)}};var hee=()=>{for(var n;n=aee();){try{n.h.call(n.g)}catch(t){dee(t)}var e=JL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jg=!1};function OE(n,e){mr.call(this),this.h=n||1,this.g=e||Ke,this.j=Zr(this.qb,this),this.l=Date.now()}function gD(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function mD(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ke.setTimeout(n,e||0)}function e2(n){n.g=mD(()=>{n.g=null,n.i&&(n.i=!1,e2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gr(OE,mr),(ye=OE.prototype).ga=!1,ye.T=null,ye.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mr(this,"tick"),this.ga&&(gD(this),this.start()))}},ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ye.N=function(){OE.$.N.call(this),gD(this),delete this.g};class fee extends uu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:e2(this)}N(){super.N(),this.g&&(Ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $g(n){uu.call(this),this.h=n,this.g={}}gr($g,uu);var t2=[];function n2(n,e,t,r){Array.isArray(t)||(t&&(t2[0]=t.toString()),t=t2);for(var i=0;i<t.length;i++){var s=WL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function r2(n){iD(n.g,function(e,t){this.g.hasOwnProperty(t)&&cD(e)},n),n.g={}}function kE(){this.g=!0}function oh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _ee(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return fD(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$g.prototype.N=function(){$g.$.N.call(this),r2(this)},$g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kE.prototype.Ea=function(){this.g=!1},kE.prototype.info=function(){};var kc={},i2=null;function FE(){return i2=i2||new mr}function s2(n){Qr.call(this,kc.Ta,n)}function Hg(n){const e=FE();Mr(e,new s2(e))}function o2(n,e){Qr.call(this,kc.STAT_EVENT,n),this.stat=e}function fi(n){const e=FE();Mr(e,new o2(e,n))}function a2(n,e){Qr.call(this,kc.Ua,n),this.size=e}function zg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ke.setTimeout(function(){n()},e)}kc.Ta="serverreachability",gr(s2,Qr),kc.STAT_EVENT="statevent",gr(o2,Qr),kc.Ua="timingevent",gr(a2,Qr);var VE={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},u2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _D(){}function l2(){}_D.prototype.h=null;var ED,qg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yD(){Qr.call(this,"d")}function vD(){Qr.call(this,"c")}function LE(){}function Gg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $g(this),this.P=yee,this.V=new OE(n=Jb?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new d2}function d2(){this.i=null,this.g="",this.h=!1}gr(yD,Qr),gr(vD,Qr),gr(LE,_D),LE.prototype.g=function(){return new XMLHttpRequest},LE.prototype.i=function(){return{}},ED=new LE;var yee=45e3,h2={},ID={};function wD(n,e,t){n.L=1,n.A=$E(na(e)),n.u=t,n.S=!0,f2(n,null)}function f2(n,e){n.G=Date.now(),Wg(n),n.B=na(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),C2(t.i,"t",r),n.o=0,t=n.l.J,n.h=new d2,n.g=W2(n.l,t?e:null,!n.u),0<n.O&&(n.M=new fee(Zr(n.Pa,n,n.g),n.O)),n2(n.U,n.g,"readystatechange",n.nb),e=n.I?zL(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Hg(),function pee(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var f=l[0];l=l[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+l+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function p2(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function g2(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=vee(n,t),i==ID){4==e&&(n.s=4,fi(14),r=!1),oh(n.j,n.m,null,"[Incomplete Response]");break}if(i==h2){n.s=4,fi(15),oh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}oh(n.j,n.m,i,null),CD(n,i)}p2(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),RD(e),e.M=!0,fi(11))):(oh(n.j,n.m,t,"[Invalid Chunked Response]"),Fc(n),Kg(n))}function vee(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?ID:(t=Number(e.substring(t,r)),isNaN(t)?h2:(r+=1)+t>e.length?ID:(e=e.slice(r,r+t),n.o=r+t,e))}function Wg(n){n.Y=Date.now()+n.P,m2(n,n.P)}function m2(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=zg(Zr(n.lb,n),e)}function UE(n){n.C&&(Ke.clearTimeout(n.C),n.C=null)}function Kg(n){0==n.l.H||n.J||H2(n.l,n)}function Fc(n){UE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,gD(n.V),r2(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function CD(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||TD(t.i,n)))if(!n.K&&TD(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;KE(t),GE(t)}PD(t),fi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=zg(Zr(t.ib,t),6e3));if(1>=D2(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Lc(t,11)}else if((n.K||t.g==n)&&KE(t),!Vg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.V=l[0],l=l[1],2==t.H)if("c"==l[0]){t.K=l[1],t.pa=l[2];const f=l[3];null!=f&&(t.ra=f,t.l.info("VER="+t.ra));const g=l[4];null!=g&&(t.Ga=g,t.l.info("SVER="+t.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(t.L=r=1.5*m,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(bD(s,s.h),s.h=null))}if(r.F){const w=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,an(r.I,r.F,w))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=G2(r,r.J?r.pa:null,r.Y),o.K){A2(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(UE(a),Wg(a)),r.g=o}else j2(r);0<t.j.length&&WE(t)}else"stop"!=l[0]&&"close"!=l[0]||Lc(t,7);else 3==t.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Lc(t,7):SD(t):"noop"!=l[0]&&t.h&&t.h.Aa(l),t.A=0)}Hg()}catch{}}function _2(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(SE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Iee(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(SE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Eee(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(SE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ye=Gg.prototype).setTimeout=function(n){this.P=n},ye.nb=function(n){n=n.target;const e=this.M;e&&3==_o(n)?e.l():this.Pa(n)},ye.Pa=function(n){try{if(n==this.g)e:{const f=_o(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||Jb||this.g&&(this.h.h||this.g.ja()||k2(this.g)))){this.J||4!=f||7==e||Hg(),UE(this);var t=this.g.da();this.ca=t;t:if(p2(this)){var r=k2(this.g);n="";var i=r.length,s=4==_o(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fc(this),Kg(this);var o="";break t}this.h.i=new Ke.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function gee(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,f,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vg(a)){var l=a;break t}}l=null}if(!(t=l)){this.i=!1,this.s=3,fi(12),Fc(this),Kg(this);break e}oh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,CD(this,t)}this.S?(g2(this,f,o),Jb&&this.i&&3==f&&(n2(this.U,this.V,"tick",this.mb),this.V.start())):(oh(this.j,this.m,o,null),CD(this,o)),4==f&&Fc(this),this.i&&!this.J&&(4==f?H2(this.l,this):(this.i=!1,Wg(this)))}else(function Uee(n){const e={};n=(n.g&&2<=_o(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Vg(n[r]))continue;var t=lee(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function ree(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,fi(12)):(this.s=0,fi(13)),Fc(this),Kg(this)}}}catch{}},ye.mb=function(){if(this.g){var n=_o(this.g),e=this.g.ja();this.o<e.length&&(UE(this),g2(this,n,e),this.i&&4!=n&&Wg(this))}},ye.cancel=function(){this.J=!0,Fc(this)},ye.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function mee(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Hg(),fi(17)),Fc(this),this.s=2,Kg(this)):m2(this,this.Y-n)};var y2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Vc){this.h=n.h,BE(this,n.j),this.s=n.s,this.g=n.g,jE(this,n.m),this.l=n.l;var e=n.i,t=new Yg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),v2(this,t),this.o=n.o}else n&&(e=String(n).match(y2))?(this.h=!1,BE(this,e[1]||"",!0),this.s=Zg(e[2]||""),this.g=Zg(e[3]||"",!0),jE(this,e[4]),this.l=Zg(e[5]||"",!0),v2(this,e[6]||"",!0),this.o=Zg(e[7]||"")):(this.h=!1,this.i=new Yg(null,this.h))}function na(n){return new Vc(n)}function BE(n,e,t){n.j=t?Zg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function v2(n,e,t){e instanceof Yg?(n.i=e,function See(n,e){e&&!n.j&&(cu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(I2(this,r),C2(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qg(e,Dee)),n.i=new Yg(e,n.h))}function an(n,e,t){n.i.set(e,t)}function $E(n){return an(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cee),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cee(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qg(e,E2,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qg(e,E2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qg(t,"/"==t.charAt(0)?bee:Tee,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qg(t,Aee)),n.join("")};var E2=/[#\/\?@]/g,Tee=/[#\?:]/g,bee=/[#\?]/g,Dee=/[#\?@]/g,Aee=/#/g;function Yg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cu(n){n.g||(n.g=new Map,n.h=0,n.i&&function wee(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function I2(n,e){cu(n),e=ah(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function w2(n,e){return cu(n),e=ah(n,e),n.g.has(e)}function C2(n,e,t){I2(n,e),0<t.length&&(n.i=null,n.g.set(ah(n,e),Qb(t)),n.h+=t.length)}function ah(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function T2(n){this.l=n||Ree,n=Ke.PerformanceNavigationTiming?0<(n=Ke.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ke.g&&Ke.g.Ka&&Ke.g.Ka()&&Ke.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ye=Yg.prototype).add=function(n,e){cu(this),this.i=null,n=ah(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ye.forEach=function(n,e){cu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ye.ta=function(){cu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ye.Z=function(n){cu(this);let e=[];if("string"==typeof n)w2(this,n)&&(e=e.concat(this.g.get(ah(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ye.set=function(n,e){return cu(this),this.i=null,w2(this,n=ah(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ye.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Ree=10;function b2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function D2(n){return n.h?1:n.g?n.g.size:0}function TD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bD(n,e){n.g?n.g.add(e):n.h=e}function A2(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function S2(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Qb(n.i)}T2.prototype.cancel=function(){if(this.i=S2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Mee=class{stringify(n){return Ke.JSON.stringify(n,void 0)}parse(n){return Ke.JSON.parse(n,void 0)}};function xee(){this.g=new Mee}function Nee(n,e,t){const r=t||"";try{_2(n,function(i,s){let o=i;Fg(i)&&(o=fD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function HE(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jg(n){this.l=n.ec||null,this.j=n.ob||!1}function zE(n,e){mr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=DD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gr(Jg,_D),Jg.prototype.g=function(){return new zE(this.l,this.j)},Jg.prototype.i=function(n){return function(){return n}}({}),gr(zE,mr);var DD=0;function P2(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Xg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,em(n)}function em(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ye=zE.prototype).open=function(n,e){if(this.readyState!=DD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,em(this)},ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ke).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xg(this)),this.readyState=DD},ye.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,em(this)),this.g&&(this.readyState=3,em(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ke.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;P2(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ye.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xg(this):em(this),3==this.readyState&&P2(this)}},ye.Za=function(n){this.g&&(this.response=this.responseText=n,Xg(this))},ye.Ya=function(n){this.g&&(this.response=n,Xg(this))},ye.ka=function(){this.g&&Xg(this)},ye.setRequestHeader=function(n,e){this.v.append(n,e)},ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kee=Ke.JSON.parse;function Dn(n){mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=R2,this.L=this.M=!1}gr(Dn,mr);var R2="",Fee=/^https?$/i,Vee=["POST","PUT"];function M2(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,x2(n),qE(n)}function x2(n){n.F||(n.F=!0,Mr(n,"complete"),Mr(n,"error"))}function N2(n){if(n.h&&typeof Kb<"u"&&(!n.C[1]||4!=_o(n)||2!=n.da()))if(n.v&&4==_o(n))mD(n.La,0,n);else if(Mr(n,"readystatechange"),4==_o(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(y2)[1]||null;!i&&Ke.self&&Ke.self.location&&(i=Ke.self.location.protocol.slice(0,-1)),r=!Fee.test(i?i.toLowerCase():"")}t=r}if(t)Mr(n,"complete"),Mr(n,"success");else{n.m=6;try{var s=2<_o(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",x2(n)}}finally{qE(n)}}}function qE(n,e){if(n.g){O2(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Mr(n,"ready");try{t.onreadystatechange=r}catch{}}}function O2(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ke.clearTimeout(n.A),n.A=null)}function _o(n){return n.g?n.g.readyState:0}function k2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case R2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function F2(n){let e="";return iD(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function AD(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=F2(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):an(n,e,t))}function tm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function V2(n){this.Ga=0,this.j=[],this.l=new kE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tm("baseRetryDelayMs",5e3,n),this.hb=tm("retryDelaySeedMs",1e4,n),this.eb=tm("forwardChannelMaxRetries",2,n),this.xa=tm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new T2(n&&n.concurrentRequestLimit),this.Ja=new xee,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function SD(n){if(L2(n),3==n.H){var e=n.W++,t=na(n.I);if(an(t,"SID",n.K),an(t,"RID",e),an(t,"TYPE","terminate"),nm(n,t),(e=new Gg(n,n.l,e)).L=2,e.A=$E(na(t)),t=!1,Ke.navigator&&Ke.navigator.sendBeacon)try{t=Ke.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Ke.Image&&((new Image).src=e.A,t=!0),t||(e.g=W2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Wg(e)}q2(n)}function GE(n){n.g&&(RD(n),n.g.cancel(),n.g=null)}function L2(n){GE(n),n.u&&(Ke.clearTimeout(n.u),n.u=null),KE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ke.clearTimeout(n.m),n.m=null)}function WE(n){if(!b2(n.i)&&!n.m){n.m=!0;var e=n.Na;Bg||XL(),jg||(Bg(),jg=!0),pD.add(e,n),n.C=0}}function U2(n,e){var t;t=e?e.m:n.W++;const r=na(n.I);an(r,"SID",n.K),an(r,"RID",t),an(r,"AID",n.V),nm(n,r),n.o&&n.s&&AD(r,n.o,n.s),t=new Gg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=B2(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),bD(n.i,t),wD(t,r,e)}function nm(n,e){n.na&&iD(n.na,function(t,r){an(e,r,t)}),n.h&&_2({},function(t,r){an(e,r,t)})}function B2(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Zr(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<t;u++){let l=i[u].g;const f=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{Nee(f,o,"req"+l+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function j2(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Bg||XL(),jg||(Bg(),jg=!0),pD.add(e,n),n.A=0}}function PD(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=zg(Zr(n.Ma,n),z2(n,n.A)),n.A++,0))}function RD(n){null!=n.B&&(Ke.clearTimeout(n.B),n.B=null)}function $2(n){n.g=new Gg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=na(n.wa);an(e,"RID","rpc"),an(e,"SID",n.K),an(e,"AID",n.V),an(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&an(e,"TO",n.qa),an(e,"TYPE","xmlhttp"),nm(n,e),n.o&&n.s&&AD(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=$E(na(e)),t.u=null,t.S=!0,f2(t,n)}function KE(n){null!=n.v&&(Ke.clearTimeout(n.v),n.v=null)}function H2(n,e){var t=null;if(n.g==e){KE(n),RD(n),n.g=null;var r=2}else{if(!TD(n.i,e))return;t=e.F,A2(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Mr(r=FE(),new a2(r,t)),WE(n)}else j2(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function Bee(n,e){return!(D2(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=zg(Zr(n.Na,n,e),z2(n,n.C)),n.C++,0)))}(n,e)||2==r&&PD(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Lc(n,5);break;case 4:Lc(n,10);break;case 3:Lc(n,6);break;default:Lc(n,2)}}function z2(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Lc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Zr(n.pb,n);t||(t=new Vc("//www.google.com/images/cleardot.gif"),Ke.location&&"http"==Ke.location.protocol||BE(t,"https"),$E(t)),function Oee(n,e){const t=new kE;if(Ke.Image){const r=new Image;r.onload=PE(HE,t,r,"TestLoadImage: loaded",!0,e),r.onerror=PE(HE,t,r,"TestLoadImage: error",!1,e),r.onabort=PE(HE,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=PE(HE,t,r,"TestLoadImage: timeout",!1,e),Ke.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fi(2);n.H=0,n.h&&n.h.za(e),q2(n),L2(n)}function q2(n){if(n.H=0,n.ma=[],n.h){const e=S2(n.i);(0!=e.length||0!=n.j.length)&&(UL(n.ma,e),UL(n.ma,n.j),n.i.i.length=0,Qb(n.j),n.j.length=0),n.h.ya()}}function G2(n,e,t){var r=t instanceof Vc?na(t):new Vc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),jE(r,r.m);else{var i=Ke.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Vc(null);r&&BE(s,r),e&&(s.g=e),i&&jE(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&an(r,t,e),an(r,"VER",n.ra),nm(n,r),r}function W2(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dn(n.Ha&&!n.va?new Jg({ob:t}):n.va)).Oa(n.J),e}function K2(){}function ZE(){if(sh&&!(10<=Number(XX)))throw Error("Environmental error: no available transport.")}function Qi(n,e){mr.call(this),this.g=new V2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Vg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new uh(this)}function Z2(n){yD.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Q2(){vD.call(this),this.status=1}function uh(n){this.g=n}function Vs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function MD(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Vt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ye=Dn.prototype).Oa=function(n){this.M=n},ye.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ED.g(),this.C=function c2(n){return n.h||(n.h=n.i())}(this.u?this.u:ED),this.g.onreadystatechange=Zr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void M2(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ke.FormData&&n instanceof Ke.FormData,!(0<=LL(Vee,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{O2(this),0<this.B&&((this.L=function Lee(n){return sh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.ua,this)):this.A=mD(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){M2(this,s)}},ye.ua=function(){typeof Kb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mr(this,"timeout"),this.abort(8))},ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mr(this,"complete"),Mr(this,"abort"),qE(this))},ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qE(this,!0)),Dn.$.N.call(this)},ye.La=function(){this.s||(this.G||this.v||this.l?N2(this):this.kb())},ye.kb=function(){N2(this)},ye.isActive=function(){return!!this.g},ye.da=function(){try{return 2<_o(this)?this.g.status:-1}catch{return-1}},ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ye.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kee(e)}},ye.Ia=function(){return this.m},ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ye=V2.prototype).ra=8,ye.H=1,ye.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Gg(this,this.l,n);let s=this.s;if(this.U&&(s?(s=zL(s),GL(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=B2(this,i,e),an(t=na(this.I),"RID",n),an(t,"CVER",22),this.F&&an(t,"X-HTTP-Session-Id",this.F),nm(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(F2(s)))+"&"+e:this.o&&AD(t,this.o,s)),bD(this.i,i),this.bb&&an(t,"TYPE","init"),this.P?(an(t,"$req",e),an(t,"SID","null"),i.aa=!0,wD(i,t,null)):wD(i,t,e),this.H=2}}else 3==this.H&&(n?U2(this,n):0==this.j.length||b2(this.i)||U2(this))},ye.Ma=function(){if(this.u=null,$2(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=zg(Zr(this.jb,this),n)}},ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fi(10),GE(this),$2(this))},ye.ib=function(){null!=this.v&&(this.v=null,GE(this),PD(this),fi(19))},ye.pb=function(n){n?(this.l.info("Successfully pinged google.com"),fi(2)):(this.l.info("Failed to ping google.com"),fi(1))},ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(ye=K2.prototype).Ba=function(){},ye.Aa=function(){},ye.za=function(){},ye.ya=function(){},ye.isActive=function(){return!0},ye.Va=function(){},ZE.prototype.g=function(n,e){return new Qi(n,e)},gr(Qi,mr),Qi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;fi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=G2(n,null,n.Y),WE(n)},Qi.prototype.close=function(){SD(this.g)},Qi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=fD(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&WE(e)},Qi.prototype.N=function(){this.g.h=null,delete this.j,SD(this.g),delete this.g,Qi.$.N.call(this)},gr(Z2,yD),gr(Q2,vD),gr(uh,K2),uh.prototype.Ba=function(){Mr(this.g,"a")},uh.prototype.Aa=function(n){Mr(this.g,new Z2(n))},uh.prototype.za=function(n){Mr(this.g,new Q2)},uh.prototype.ya=function(){Mr(this.g,"b")},gr(Vs,function jee(){this.blockSize=-1}),Vs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)MD(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){MD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){MD(this,r),i=0;break}}this.h=i,this.i+=e},Vs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var $ee={};function xD(n){return-128<=n&&128>n?function QX(n,e){var t=$ee;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vt([0|e],0>e?-1:0)}):new Vt([0|n],0>n?-1:0)}function yo(n){if(isNaN(n)||!isFinite(n))return ch;if(0>n)return xr(yo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ND;return new Vt(e,0)}var ND=4294967296,ch=xD(0),OD=xD(1),J2=xD(16777216);function ra(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ys(n){return-1==n.h}function xr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vt(t,~n.h).add(OD)}function QE(n,e){return n.add(xr(e))}function YE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function rm(n,e){this.g=n,this.h=e}function JE(n,e){if(ra(e))throw Error("division by zero");if(ra(n))return new rm(ch,ch);if(ys(n))return e=JE(xr(n),e),new rm(xr(e.g),xr(e.h));if(ys(e))return e=JE(n,xr(e)),new rm(xr(e.g),e.h);if(30<n.g.length){if(ys(n)||ys(e))throw Error("slowDivide_ only works with positive integers.");for(var t=OD,r=e;0>=r.X(n);)t=X2(t),r=X2(r);var i=lh(t,1),s=lh(r,1);for(r=lh(r,2),t=lh(t,2);!ra(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=lh(r,1),t=lh(t,1)}return e=QE(n,i.R(e)),new rm(i,e)}for(i=ch;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=yo(t)).R(e);ys(o)||0<o.X(n);)o=(s=yo(t-=r)).R(e);ra(s)&&(s=OD),i=i.add(s),n=QE(n,o)}return new rm(i,n)}function X2(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vt(t,n.h)}function lh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Vt(i,n.h)}(ye=Vt.prototype).ea=function(){if(ys(this))return-xr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ND+r)*e,e*=ND}return n},ye.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ra(this))return"0";if(ys(this))return"-"+xr(this).toString(n);for(var e=yo(Math.pow(n,6)),t=this,r="";;){var i=JE(t,e).g,s=((0<(t=QE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ra(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ye.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ye.X=function(n){return ys(n=QE(this,n))?-1:ra(n)?0:1},ye.abs=function(){return ys(this)?xr(this):this},ye.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Vt(t,-2147483648&t[t.length-1]?-1:0)},ye.R=function(n){if(ra(this)||ra(n))return ch;if(ys(this))return ys(n)?xr(this).R(xr(n)):xr(xr(this).R(n));if(ys(n))return xr(this.R(xr(n)));if(0>this.X(J2)&&0>n.X(J2))return yo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=o*u,YE(t,2*r+2*i),t[2*r+2*i+1]+=s*u,YE(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,YE(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,YE(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vt(t,0)},ye.gb=function(n){return JE(this,n).h},ye.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vt(t,this.h&n.h)},ye.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vt(t,this.h|n.h)},ye.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vt(t,this.h^n.h)},ZE.prototype.createWebChannel=ZE.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,VE.NO_ERROR=0,VE.TIMEOUT=8,VE.HTTP_ERROR=6,u2.COMPLETE="complete",l2.EventType=qg,qg.OPEN="a",qg.CLOSE="b",qg.ERROR="c",qg.MESSAGE="d",mr.prototype.listen=mr.prototype.O,Dn.prototype.listenOnce=Dn.prototype.P,Dn.prototype.getLastError=Dn.prototype.Sa,Dn.prototype.getLastErrorCode=Dn.prototype.Ia,Dn.prototype.getStatus=Dn.prototype.da,Dn.prototype.getResponseJson=Dn.prototype.Wa,Dn.prototype.getResponseText=Dn.prototype.ja,Dn.prototype.send=Dn.prototype.ha,Dn.prototype.setWithCredentials=Dn.prototype.Oa,Vs.prototype.digest=Vs.prototype.l,Vs.prototype.reset=Vs.prototype.reset,Vs.prototype.update=Vs.prototype.j,Vt.prototype.add=Vt.prototype.add,Vt.prototype.multiply=Vt.prototype.R,Vt.prototype.modulo=Vt.prototype.gb,Vt.prototype.compare=Vt.prototype.X,Vt.prototype.toNumber=Vt.prototype.ea,Vt.prototype.toString=Vt.prototype.toString,Vt.prototype.getBits=Vt.prototype.D,Vt.fromNumber=yo,Vt.fromString=function Y2(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return xr(Y2(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=yo(Math.pow(e,8)),r=ch,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=yo(Math.pow(e,s)),r=r.R(s).add(yo(o))):r=(r=r.R(t)).add(yo(o))}return r};var Hee=Fs.createWebChannelTransport=function(){return new ZE},zee=Fs.getStatEventTarget=function(){return FE()},kD=Fs.ErrorCode=VE,qee=Fs.EventType=u2,Gee=Fs.Event=kc,e3=Fs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XE=(Fs.FetchXmlHttpFactory=Jg,Fs.WebChannel=l2),Wee=Fs.XhrIo=Dn,Kee=Fs.Md5=Vs,dh=Fs.Integer=Vt;const t3="@firebase/firestore";class _r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let hh="10.8.0";const lu=new go.Yd("@firebase/firestore");function fh(){return lu.logLevel}function oe(n,...e){if(lu.logLevel<=go.in.DEBUG){const t=e.map(FD);lu.debug(`Firestore (${hh}): ${n}`,...t)}}function kn(n,...e){if(lu.logLevel<=go.in.ERROR){const t=e.map(FD);lu.error(`Firestore (${hh}): ${n}`,...t)}}function Ri(n,...e){if(lu.logLevel<=go.in.WARN){const t=e.map(FD);lu.warn(`Firestore (${hh}): ${n}`,...t)}}function FD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ce(n="Unexpected state"){const e=`FIRESTORE (${hh}) INTERNAL ASSERTION FAILED: `+n;throw kn(e),new Error(e)}function Pe(n,e){n||Ce()}function le(n,e){return n}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class n3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_r.UNAUTHENTICATED))}shutdown(){}}class Jee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xee{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new or,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,J.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new or)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe("string"==typeof r.accessToken),new n3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pe(null===e||"string"==typeof e),new _r(e)}}class ete{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tte{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ete(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe("string"==typeof t.token),this.R=t.token,new r3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rte(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class i3{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=rte(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function ph(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function s3(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new gn(0,0))}static max(){return new Me(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class im{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ce(),void 0===r?r=e.length-t:r>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===im.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof im?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _t extends im{construct(e,t,r){return new _t(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _t(t)}static emptyPath(){return new _t([])}}const ite=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends im{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return ite.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new se(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new se(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new se(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}class fe{constructor(e){this.path=e}static fromPath(e){return new fe(_t.fromString(e))}static fromName(e){return new fe(_t.fromString(e).popFirst(5))}static empty(){return new fe(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new _t(e.slice()))}}class gh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function VD(n){return n.fields.find(e=>2===e.kind)}function Uc(n){return n.fields.filter(e=>2!==e.kind)}gh.UNKNOWN_ID=-1;class Bc{constructor(e,t){this.fieldPath=e,this.kind=t}}class mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mh(0,Yi.min())}}function o3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new Yi(i,fe.empty(),e)}function a3(n){return new Yi(n.readTime,n.key,-1)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(Me.min(),fe.empty(),-1)}static max(){return new Yi(Me.max(),fe.empty(),-1)}}function LD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=fe.comparator(n.documentKey,e.documentKey),0!==t?t:Ge(n.largestBatchId,e.largestBatchId))}const u3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function du(n){return UD.apply(this,arguments)}function UD(){return UD=(0,J.Z)(function*(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==u3)throw n;oe("LocalStore","Unexpectedly lost primary lease")}),UD.apply(this,arguments)}class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof k?t:k.resolve(t)}catch(t){return k.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):k.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):k.reject(t)}static resolve(e){return new k((t,r)=>{t(e)})}static reject(e){return new k((t,r)=>{r(e)})}static waitFor(e){return new k((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=k.resolve(!1);for(const r of e)t=t.next(i=>i?k.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new k((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new k((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class eI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new or,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new sm(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=BD(r.target.error);this.V.reject(new sm(e,i))}}static open(e,t,r,i){try{return new eI(t,e.transaction(i,r))}catch(s){throw new sm(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ute(t)}}class vs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===vs.S((0,Pt.z$)())&&kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),jc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Pt.hl)())return!1;if(vs.C())return!0;const e=(0,Pt.z$)(),t=vs.S(e),r=0<t&&t<10,i=vs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,J.Z)(function*(){return t.db||(oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new sm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new se(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new se(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new sm(e,a))},s.onupgradeneeded=o=>{oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,J.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=eI.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),k.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(oe("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ate{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return jc(this.k.delete())}}class sm extends se{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hu(n){return"IndexedDbTransactionError"===n.name}class ute{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jc(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),jc(this.store.add(e))}get(e){return jc(this.store.get(e)).next(t=>(void 0===t&&(t=null),oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),jc(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),jc(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new k((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new k((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new k((r,i)=>{t.onerror=s=>{const o=BD(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new k((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new ate(a),l=t(a.primaryKey,a.value,u);if(l instanceof k){const f=l.catch(g=>(u.done(),k.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>k.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jc(n){return new k((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=BD(r.target.error);t(i)}})}let l3=!1;function BD(n){const e=vs.S((0,Pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l3||(l3=!0,setTimeout(()=>{throw r},0)),r}}return n}class cte{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,J.Z)(function*(){t.task=null;try{oe("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){hu(r)?oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield du(r)}yield t.ee(6e4)}))}}class lte{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,J.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return k.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return oe("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(oe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=a3(s);LD(o,r)>0&&(r=o)}),new Yi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function om(n){return null==n}function am(n){return 0===n&&1/n==-1/0}function d3(n){return"number"==typeof n&&Number.isInteger(n)&&!am(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=h3(e)),e=dte(n.get(t),e);return h3(e)}function dte(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function h3(n){return n+"\x01\x01"}function vo(n){const e=n.length;if(Pe(e>=2),2===e)return Pe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_t.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ce(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ce()}s=o+2}return new _t(r)}const f3=["userId","batchId"];function tI(n,e){return[n,Yr(e)]}function p3(n,e,t){return[n,Yr(e),t]}const hte={},fte=["prefixPath","collectionGroup","readTime","documentId"],pte=["prefixPath","collectionGroup","documentId"],gte=["collectionGroup","readTime","prefixPath","documentId"],mte=["canonicalId","targetId"],_te=["targetId","path"],yte=["path","targetId"],vte=["collectionId","parent"],Ete=["indexId","uid"],Ite=["uid","sequenceNumber"],wte=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cte=["indexId","uid","orderedDocumentKey"],Tte=["userId","collectionPath","documentId"],bte=["userId","collectionPath","largestBatchId"],Dte=["userId","collectionGroup","largestBatchId"],g3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ate=[...g3,"documentOverlays"],m3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_3=m3,Ste=[..._3,"indexConfiguration","indexState","indexEntries"];class jD extends c3{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function yr(n,e){const t=le(n);return vs.M(t.ae,e)}function y3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function v3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yt{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nI(this.root,e,this.comparator,!1)}getReverseIterator(){return new nI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nI(this.root,e,this.comparator,!0)}}class nI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nr.RED,this.left=i??Nr.EMPTY,this.right=s??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E3(this.data.getIterator())}getIteratorFrom(e){return new E3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class E3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _h(n){return n.hasNext()?n.getNext():void 0}class Mi{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new jt(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ph(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class I3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new I3("Invalid base64 string: "+s):s}}(e);return new ar(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const Rte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(n){if(Pe(!!n),"string"==typeof n){let e=0;const t=Rte.exec(n);if(Pe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ia(n){return"string"==typeof n?ar.fromBase64String(n):ar.fromUint8Array(n)}function rI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iI(n){const e=n.mapValue.fields.__previous_value__;return rI(e)?iI(e):e}function um(n){const e=pu(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class Mte{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class gu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sI={nullValue:"NULL_VALUE"};function _u(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rI(n)?4:b3(n)?9007199254740991:10:Ce()}function Eo(n,e){if(n===e)return!0;const t=_u(n);if(t!==_u(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return um(n).isEqual(um(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pu(i.timestampValue),a=pu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ia(n.bytesValue).isEqual(ia(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return An(i.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return An(i.integerValue)===An(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=An(i.doubleValue),a=An(s.doubleValue);return o===a?am(o)===am(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ph(n.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(y3(o)!==y3(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Eo(o[u],a[u])))return!1;return!0}(n,e);default:return Ce()}var s}function cm(n,e){return void 0!==(n.values||[]).find(t=>Eo(t,e))}function yu(n,e){if(n===e)return 0;const t=_u(n),r=_u(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=An(s.integerValue||s.doubleValue),u=An(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return w3(n.timestampValue,e.timestampValue);case 4:return w3(um(n),um(e));case 5:return Ge(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ia(s),u=ia(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=Ge(a[l],u[l]);if(0!==f)return f}return Ge(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ge(An(s.latitude),An(o.latitude));return 0!==a?a:Ge(An(s.longitude),An(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const f=yu(a[l],u[l]);if(f)return f}return Ge(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===mu.mapValue&&o===mu.mapValue)return 0;if(s===mu.mapValue)return 1;if(o===mu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const m=Ge(u[g],f[g]);if(0!==m)return m;const y=yu(a[u[g]],l[f[g]]);if(0!==y)return y}return Ge(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function w3(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ge(n,e);const t=pu(n),r=pu(e),i=Ge(t.seconds,r.seconds);return 0!==i?i:Ge(t.nanos,r.nanos)}function yh(n){return $D(n)}function $D(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=pu(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ia(n.bytesValue).toBase64():"referenceValue"in n?fe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=$D(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$D(t.fields[o])}`;return i+"}"}(n.mapValue):Ce()}function $c(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HD(n){return!!n&&"integerValue"in n}function lm(n){return!!n&&"arrayValue"in n}function C3(n){return!!n&&"nullValue"in n}function T3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function aI(n){return!!n&&"mapValue"in n}function dm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function b3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xte(n){return"nullValue"in n?sI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$c(gu.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ce()}function Nte(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$c(gu.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mu:Ce()}function D3(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function A3(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Or{constructor(e){this.value=e}static empty(){return new Or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!aI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(t)}setAll(e){let t=un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=dm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());aI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];aI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Or(dm(this.value))}}function S3(n){const e=[];return fu(n.fields,(t,r)=>{const i=new un([t]);if(aI(r)){const s=S3(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Mi(e)}class cn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Me.min(),Me.min(),Me.min(),Or.empty(),0)}static newFoundDocument(e,t,r,i){return new cn(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new cn(e,2,t,Me.min(),Me.min(),Or.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Me.min(),Me.min(),Or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vu{constructor(e,t){this.position=e,this.inclusive=t}}function P3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?fe.comparator(fe.fromName(o.referenceValue),t.key):yu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function R3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Eo(n.position[t],e.position[t]))return!1;return!0}class hm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ote(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class M3{}class yt extends M3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kte(e,t,r):"array-contains"===t?new Lte(e,r):"in"===t?new V3(e,r):"not-in"===t?new Ute(e,r):"array-contains-any"===t?new Bte(e,r):new yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Fte(e,r):new Vte(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yu(t,this.value)):null!==t&&_u(this.value)===_u(t)&&this.matchesComparison(yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lt extends M3{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Lt(e,t)}matches(e){return vh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vh(n){return"and"===n.op}function zD(n){return"or"===n.op}function qD(n){return x3(n)&&vh(n)}function x3(n){for(const e of n.filters)if(e instanceof Lt)return!1;return!0}function GD(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+yh(n.value);if(qD(n))return n.filters.map(e=>GD(e)).join(",");{const e=n.filters.map(t=>GD(t)).join(",");return`${n.op}(${e})`}}function N3(n,e){return n instanceof yt?(r=n,(i=e)instanceof yt&&r.op===i.op&&r.field.isEqual(i.field)&&Eo(r.value,i.value)):n instanceof Lt?function(r,i){return i instanceof Lt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&N3(o,i.filters[a]),!0)}(n,e):void Ce();var r,i}function O3(n,e){const t=n.filters.concat(e);return Lt.create(t,n.op)}function k3(n){return n instanceof yt?`${(t=n).field.canonicalString()} ${t.op} ${yh(t.value)}`:n instanceof Lt?function(t){return t.op.toString()+" {"+t.getFilters().map(k3).join(" ,")+"}"}(n):"Filter";var t}class kte extends yt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fte extends yt{constructor(e,t){super(e,"in",t),this.keys=F3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vte extends yt{constructor(e,t){super(e,"not-in",t),this.keys=F3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function F3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}class Lte extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lm(t)&&cm(t.arrayValue,this.value)}}class V3 extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cm(this.value.arrayValue,t)}}class Ute extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cm(this.value.arrayValue,t)}}class Bte extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cm(this.value.arrayValue,r))}}class jte{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function WD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new jte(n,e,t,r,i,s,o)}function Hc(n){const e=le(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>GD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yh(r)).join(",")),e.ce=t}return e.ce}function fm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ote(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!N3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!R3(n.startAt,e.startAt)&&R3(n.endAt,e.endAt)}function uI(n){return fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cI(n,e){return n.filters.filter(t=>t instanceof yt&&t.field.isEqual(e))}function L3(n,e,t){let r=sI,i=!0;for(const s of cI(n,e)){let o=sI,a=!0;switch(s.op){case"<":case"<=":o=xte(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=sI}D3({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];D3({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function U3(n,e,t){let r=mu,i=!0;for(const s of cI(n,e)){let o=mu,a=!0;switch(s.op){case">=":case">":o=Nte(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=mu}A3({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];A3({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class sa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function B3(n,e,t,r,i,s,o,a){return new sa(n,e,t,r,i,s,o,a)}function Eh(n){return new sa(n)}function j3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function KD(n){return null!==n.collectionGroup}function Ih(n){const e=le(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(un.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new hm(s,r))}),t.has(un.keyField().canonicalString())||e.le.push(new hm(un.keyField(),r))}return e.le}function pi(n){const e=le(n);return e.he||(e.he=function $3(n,e){if("F"===n.limitType)return WD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new hm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new vu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vu(n.startAt.position,n.startAt.inclusive):null;return WD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Ih(n))),e.he}function ZD(n,e){const t=n.filters.concat([e]);return new sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lI(n,e,t){return new sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pm(n,e){return fm(pi(n),pi(e))&&n.limitType===e.limitType}function H3(n){return`${Hc(pi(n))}|lt:${n.limitType}`}function wh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>k3(i)).join(", ")}]`),om(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>yh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>yh(i)).join(",")),`Target(${r})`}(pi(n))}; limitType=${n.limitType})`}function gm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ih(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=P3(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ih(r),i)||r.endAt&&!function(o,a,u){const l=P3(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ih(r),i)));var r,i}function z3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q3(n){return(e,t)=>{let r=!1;for(const i of Ih(n)){const s=$te(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function $te(n,e,t){const r=n.field.isKeyField()?fe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?yu(u,l):Ce()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}class oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return v3(this.inner)}size(){return this.innerSize}}const Hte=new Yt(fe.comparator);function xi(){return Hte}const G3=new Yt(fe.comparator);function mm(...n){let e=G3;for(const t of n)e=e.insert(t.key,t);return e}function W3(n){let e=G3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Io(){return _m()}function K3(){return _m()}function _m(){return new oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const zte=new Yt(fe.comparator),qte=new jt(fe.comparator);function tt(...n){let e=qte;for(const t of n)e=e.add(t);return e}const Gte=new jt(Ge);function QD(){return Gte}function Z3(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:am(e)?"-0":e}}function Q3(n){return{integerValue:""+n}}function Y3(n,e){return d3(e)?Q3(e):Z3(n,e)}class dI{constructor(){this._=void 0}}function Wte(n,e,t){return n instanceof Ch?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rI(s)&&(s=iI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof zc?X3(n,e):n instanceof qc?eU(n,e):function(i,s){const o=J3(i,s),a=tU(o)+tU(i.Ie);return HD(o)&&HD(i.Ie)?Q3(a):Z3(i.serializer,a)}(n,e)}function Kte(n,e,t){return n instanceof zc?X3(n,e):n instanceof qc?eU(n,e):t}function J3(n,e){return n instanceof Th?HD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Ch extends dI{}class zc extends dI{constructor(e){super(),this.elements=e}}function X3(n,e){const t=nU(e);for(const r of n.elements)t.some(i=>Eo(i,r))||t.push(r);return{arrayValue:{values:t}}}class qc extends dI{constructor(e){super(),this.elements=e}}function eU(n,e){let t=nU(e);for(const r of n.elements)t=t.filter(i=>!Eo(i,r));return{arrayValue:{values:t}}}class Th extends dI{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function tU(n){return An(n.integerValue||n.doubleValue)}function nU(n){return lm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ym{constructor(e,t){this.field=e,this.transform=t}}class Qte{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fI{}function rU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dh(n.key,mn.none()):new bh(n.key,n.data,mn.none());{const t=n.data,r=Or.empty();let i=new jt(un.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new aa(n.key,r,new Mi(i.toArray()),mn.none())}}function Yte(n,e,t){n instanceof bh?function(i,s,o){const a=i.value.clone(),u=oU(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof aa?function(i,s,o){if(!hI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=oU(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(sU(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vm(n,e,t,r){return n instanceof bh?function(s,o,a,u){if(!hI(s.precondition,o))return a;const l=s.value.clone(),f=aU(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof aa?function(s,o,a,u){if(!hI(s.precondition,o))return a;const l=aU(s.fieldTransforms,u,o),f=o.data;return f.setAll(sU(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,hI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Jte(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=J3(r.transform,i||null);null!=s&&(null===t&&(t=Or.empty()),t.set(r.field,s))}return t||null}function iU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&ph(r,i,(s,o)=>function Zte(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof zc&&i instanceof zc||r instanceof qc&&i instanceof qc?ph(r.elements,i.elements,Eo):r instanceof Th&&i instanceof Th?Eo(r.Ie,i.Ie):r instanceof Ch&&i instanceof Ch);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class bh extends fI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class aa extends fI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function oU(n,e,t){const r=new Map;Pe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Kte(o,a,t[i]))}return r}function aU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Wte(s,o,e))}return r}class Dh extends fI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YD extends fI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Yte(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K3();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=rU(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tt())}isEqual(e){return this.batchId===e.batchId&&ph(this.mutations,e.mutations,(t,r)=>iU(t,r))&&ph(this.baseMutations,e.baseMutations,(t,r)=>iU(t,r))}}class XD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length);let i=zte;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XD(e,t,r,i)}}class eA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ene{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kn,Ct;function uU(n){switch(n){default:return Ce();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function cU(n){if(void 0===n)return kn("GRPC error has no .code"),B.UNKNOWN;switch(n){case Kn.OK:return B.OK;case Kn.CANCELLED:return B.CANCELLED;case Kn.UNKNOWN:return B.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return B.INTERNAL;case Kn.UNAVAILABLE:return B.UNAVAILABLE;case Kn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Kn.NOT_FOUND:return B.NOT_FOUND;case Kn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Kn.ABORTED:return B.ABORTED;case Kn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Kn.DATA_LOSS:return B.DATA_LOSS;default:return Ce()}}(Ct=Kn||(Kn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";function lU(){return new TextEncoder}const tne=new dh([4294967295,4294967295],0);function dU(n){const e=lU().encode(n),t=new Kee;return t.update(e),new Uint8Array(t.digest())}function hU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new dh([t,r],0),new dh([i,s],0)]}class tA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Em(`Invalid padding: ${t}`);if(r<0)throw new Em(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Em(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Em(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=dh.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(dh.fromNumber(r)));return 1===i.compare(tne)&&(i=new dh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=dU(e),[r,i]=hU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tA(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=dU(e),[r,i]=hU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Em extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Im{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Im(Me.min(),i,new Yt(Ge),xi(),tt())}}class wm{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wm(r,t,tt(),tt(),tt())}}class gI{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class fU{constructor(e,t){this.targetId=e,this.fe=t}}class pU{constructor(e,t,r=ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gU{constructor(){this.ge=0,this.pe=_U(),this.ye=ar.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=tt(),t=tt(),r=tt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ce()}}),new wm(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=_U()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Pe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class nne{constructor(e){this.Le=e,this.ke=new Map,this.qe=xi(),this.Qe=mU(),this.Ke=new Yt(Ge)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(uI(s))if(0===r){const o=new fe(s.path);this.We(t,o,cn.newNoDocument(o,Me.min()))}else Pe(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ia(r).toUint8Array()}catch(u){if(u instanceof I3)return Ri("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new tA(o,i,s)}catch(u){return Ri(u instanceof Em?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&uI(a.target)){const u=new fe(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,cn.newNoDocument(u,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=tt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Im(e,t,this.Ke,this.qe,r);return this.qe=xi(),this.Qe=mU(),this.Ke=new Yt(Ge),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new gU,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new jt(Ge),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new gU),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mU(){return new Yt(fe.comparator)}function _U(){return new Yt(fe.comparator)}const rne={asc:"ASCENDING",desc:"DESCENDING"},ine={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sne={and:"AND",or:"OR"};class one{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nA(n,e){return n.useProto3Json||om(e)?e:{value:e}}function Ah(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ane(n,e){return Ah(n,e.toTimestamp())}function Fn(n){return Pe(!!n),Me.fromTimestamp(function(t){const r=pu(t);return new gn(r.seconds,r.nanos)}(n))}function rA(n,e){return iA(n,e).canonicalString()}function iA(n,e){const t=(i=n,new _t(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function vU(n){const e=_t.fromString(n);return Pe(PU(e)),e}function Cm(n,e){return rA(n.databaseId,e.path)}function wo(n,e){const t=vU(e);if(t.get(1)!==n.databaseId.projectId)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(wU(t))}function EU(n,e){return rA(n.databaseId,e)}function IU(n){const e=vU(n);return 4===e.length?_t.emptyPath():wU(e)}function sA(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wU(n){return Pe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CU(n,e,t){return{name:Cm(n,e),fields:t.value.mapValue.fields}}function TU(n,e,t){const r=wo(n,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):Me.min(),o=new Or({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Tm(n,e){let t;if(e instanceof bh)t={update:CU(n,e.key,e.value)};else if(e instanceof Dh)t={delete:Cm(n,e.key)};else if(e instanceof aa)t={update:CU(n,e.key,e.data),updateMask:gne(e.fieldMask)};else{if(!(e instanceof YD))return Ce();t={verify:Cm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Th)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ce()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:ane(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ce()),t;var s}function oA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?mn.updateTime(Fn(s.updateTime)):void 0!==s.exists?mn.exists(s.exists):mn.none():mn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Pe("REQUEST_TIME"===a.setToServerValue),u=new Ch):"appendMissingElements"in a?u=new zc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new qc(a.removeAllFromArray.values||[]):"increment"in a?u=new Th(o,a.increment):Ce();const l=un.fromServerFormat(a.fieldPath);return new ym(l,u)}(n,i)):[];var s;if(e.update){const i=wo(n,e.update.name),s=new Or({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Mi((e.updateMask.fieldPaths||[]).map(f=>un.fromServerFormat(f)));return new aa(i,s,o,t,r)}return new bh(i,s,t,r)}if(e.delete){const i=wo(n,e.delete);return new Dh(i,t)}if(e.verify){const i=wo(n,e.verify);return new YD(i,t)}return Ce()}function bU(n,e){return{documents:[EU(n,e.path)]}}function aA(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=EU(n,i);const s=function(l){if(0!==l.length)return SU(Lt.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:Eu((m=f).field),direction:hne(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=nA(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:t,parent:i};var l}function DU(n){let e=IU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pe(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){const m=AU(g);return m instanceof Lt&&qD(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new hm(Sh((E=m).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,om(m)?null:m}(t.limit));let u=null;var g;t.startAt&&(u=new vu((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new vu(g.values||[],!g.before)}(t.endAt)),B3(e,i,o,s,a,"F",u,l)}function AU(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sh(t.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sh(t.unaryFilter.field);return yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sh(t.unaryFilter.field);return yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sh(t.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):void 0!==n.fieldFilter?yt.create(Sh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Lt.create(t.compositeFilter.filters.map(r=>AU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce();var t}function hne(n){return rne[n]}function fne(n){return ine[n]}function pne(n){return sne[n]}function Eu(n){return{fieldPath:n.canonicalString()}}function Sh(n){return un.fromServerFormat(n.fieldPath)}function SU(n){return n instanceof yt?function(t){if("=="===t.op){if(T3(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NAN"}};if(C3(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(T3(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NAN"}};if(C3(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eu(t.field),op:fne(t.op),value:t.value}}}(n):n instanceof Lt?function(t){const r=t.getFilters().map(i=>SU(i));return 1===r.length?r[0]:{compositeFilter:{op:pne(t.op),filters:r}}}(n):Ce()}function gne(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ua{constructor(e,t,r,i,s=Me.min(),o=Me.min(),a=ar.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class RU{constructor(e){this.ct=e}}function MU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Cm(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ah(s,o.version.toTimestamp()),createTime:Ah(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gc(e.version)};else{if(!e.isUnknownDocument())return Ce();r.unknownDocument={path:t.path.toArray(),version:Gc(e.version)}}var s,o;return r}function mI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wc(n){const e=new gn(n.seconds,n.nanoseconds);return Me.fromTimestamp(e)}function Kc(n,e){const t=(e.baseMutations||[]).map(s=>oA(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>oA(n.ct,s)),i=gn.fromMillis(e.localWriteTimeMs);return new JD(e.batchId,i,t,r)}function bm(n){const e=Wc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wc(n.lastLimboFreeSnapshotVersion):Me.min();let r;return r=void 0!==n.query.documents?(Pe(1===(s=n.query).documents.length),pi(Eh(IU(s.documents[0])))):function(s){return pi(DU(s))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ar.fromBase64String(n.resumeToken));var s}function xU(n,e){const t=Gc(e.snapshotVersion),r=Gc(e.lastLimboFreeSnapshotVersion);let i;i=uI(e.target)?bU(n.ct,e.target):aA(n.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uA(n){const e=DU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lI(e,e.limit,"L"):e}function cA(n,e){return new eA(e.largestBatchId,oA(n.ct,e.overlayMutation))}function NU(n,e){const t=e.path.lastSegment();return[n,Yr(e.path.popLast()),t]}function OU(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Gc(r.readTime),documentKey:Yr(r.documentKey.path),largestBatchId:r.largestBatchId}}class _ne{getBundleMetadata(e,t){return kU(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Wc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return kU(e).put({bundleId:(i=t).id,createTime:Gc(Fn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return FU(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:uA(s.bundledQuery),readTime:Wc(s.readTime)};var s})}saveNamedQuery(e,t){return FU(e).put({name:(i=t).name,readTime:Gc(Fn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function kU(n){return yr(n,"bundles")}function FU(n){return yr(n,"namedQueries")}class _I{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new _I(e,t.uid||"")}getOverlay(e,t){return Dm(e).get(NU(this.userId,t)).next(r=>r?cA(this.serializer,r):null)}getOverlays(e,t){const r=Io();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new eA(t,o);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Yr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Dm(e).H("collectionPathOverlayIndex",a))}),k.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Io(),s=Yr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dm(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=cA(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Io();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dm(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const g=cA(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Dm(e).put(function(i,s,o){const[a,u,l]=NU(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Tm(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Dm(n){return yr(n,"documentOverlays")}class Zc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),am(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ia(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?b3(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ce()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),fe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function yne(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function VU(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=yne(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Zc.bt=new Zc;class vne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const t=this.Lt(e),r=VU(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Lt(e),r=VU(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ene{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Ine{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Am{constructor(){this.Gt=new vne,this.zt=new Ene(this.Gt),this.jt=new Ine(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Qc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qc(this.indexId,this.documentKey,this.arrayValue,r)}}function Iu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=LU(n.arrayValue,e.arrayValue),0!==t?t:(t=LU(n.directionalValue,e.directionalValue),0!==t?t:fe.comparator(n.documentKey,e.documentKey)))}function LU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UU{constructor(e){this.Yt=new jt((t,r)=>un.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Pe(e.collectionGroup===this.collectionId),this.en)return!1;const t=VD(e);if(void 0!==t&&!this.nn(t))return!1;const r=Uc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new jt(un.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Bc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Bc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Bc(r.field,"asc"===r.dir?0:1)));return new gh(gh.UNKNOWN_ID,this.collectionId,t,mh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function BU(n){var e,t;if(Pe(n instanceof yt||n instanceof Lt),n instanceof yt){if(n instanceof V3){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>yt.create(n.field,"==",s)))||[];return Lt.create(i,"or")}return n}const r=n.filters.map(i=>BU(i));return Lt.create(r,n.op)}function wne(n){if(0===n.getFilters().length)return[];const e=hA(BU(n));return Pe(jU(e)),lA(e)||dA(e)?[e]:e.getFilters()}function lA(n){return n instanceof yt}function dA(n){return n instanceof Lt&&qD(n)}function jU(n){return lA(n)||dA(n)||function(t){if(t instanceof Lt&&zD(t)){for(const r of t.getFilters())if(!lA(r)&&!dA(r))return!1;return!0}return!1}(n)}function hA(n){if(Pe(n instanceof yt||n instanceof Lt),n instanceof yt)return n;if(1===n.filters.length)return hA(n.filters[0]);const e=n.filters.map(r=>hA(r));let t=Lt.create(e,n.op);return t=yI(t),jU(t)?t:(Pe(t instanceof Lt),Pe(vh(t)),Pe(t.filters.length>1),t.filters.reduce((r,i)=>fA(r,i)))}function fA(n,e){let t;return Pe(n instanceof yt||n instanceof Lt),Pe(e instanceof yt||e instanceof Lt),t=n instanceof yt?e instanceof yt?Lt.create([n,e],"and"):$U(n,e):e instanceof yt?$U(e,n):function(i,s){if(Pe(i.filters.length>0&&s.filters.length>0),vh(i)&&vh(s))return O3(i,s.getFilters());const o=zD(i)?i:s,a=zD(i)?s:i,u=o.filters.map(l=>fA(l,a));return Lt.create(u,"or")}(n,e),yI(t)}function $U(n,e){if(vh(e))return O3(e,n.getFilters());{const t=e.filters.map(r=>fA(n,r));return Lt.create(t,"or")}}function yI(n){if(Pe(n instanceof yt||n instanceof Lt),n instanceof yt)return n;const e=n.getFilters();if(1===e.length)return yI(e[0]);if(x3(n))return n;const t=e.map(i=>yI(i)),r=[];return t.forEach(i=>{i instanceof yt?r.push(i):i instanceof Lt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Lt.create(r,n.op)}class Cne{constructor(){this._n=new pA}addToCollectionParentIndex(e,t){return this._n.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Yi.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}}class pA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(_t.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(_t.comparator)).toArray()}}const vI=new Uint8Array(0);class Tne{constructor(e,t){this.databaseId=t,this.an=new pA,this.un=new oa(r=>Hc(r),(r,i)=>fm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Yr(i)};return HU(e).put(s)}return k.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[s3(t),""],!1,!0);return HU(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(vo(o.parent))}return r})}addFieldIndex(e,t){const r=Sm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Rh(e);return s.next(a=>{o.put(OU(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Sm(e),i=Rh(e),s=Ph(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Sm(e),r=Ph(e),i=Rh(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return k.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new UU(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ph(e);let i=!0;const s=new Map;return k.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=tt();const a=[];return k.forEach(s,(u,l)=>{var O;oe("IndexedDbIndexManager",`Using index ${O=u,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`} to execute ${Hc(t)}`);const f=function(O,W){const ce=VD(W);if(void 0===ce)return null;for(const Re of cI(O,ce.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(l,u),g=function(O,W){const ce=new Map;for(const Re of Uc(W))for(const $e of cI(O,Re.fieldPath))switch($e.op){case"==":case"in":ce.set(Re.fieldPath.canonicalString(),$e.value);break;case"not-in":case"!=":return ce.set(Re.fieldPath.canonicalString(),$e.value),Array.from(ce.values())}return null}(l,u),m=function(O,W){const ce=[];let Re=!0;for(const $e of Uc(W)){const Nt=0===$e.kind?L3(O,$e.fieldPath,O.startAt):U3(O,$e.fieldPath,O.startAt);ce.push(Nt.value),Re&&(Re=Nt.inclusive)}return new vu(ce,Re)}(l,u),y=function(O,W){const ce=[];let Re=!0;for(const $e of Uc(W)){const Nt=0===$e.kind?U3(O,$e.fieldPath,O.endAt):L3(O,$e.fieldPath,O.endAt);ce.push(Nt.value),Re&&(Re=Nt.inclusive)}return new vu(ce,Re)}(l,u),E=this.hn(u,l,m),w=this.hn(u,l,y),C=this.Pn(u,l,g),R=this.In(u.indexId,f,E,m.inclusive,w,y.inclusive,C);return k.forEach(R,P=>r.j(P,t.limit).next(O=>{O.forEach(W=>{const ce=fe.fromSegments(W.documentKey);o.has(ce)||(o=o.add(ce),a.push(ce))})}))}).next(()=>a)}return k.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wne(Lt.create(e.filters,"and")).map(r=>WD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),f=[];for(let g=0;g<u;++g){const m=t?this.Tn(t[g/l]):vI,y=this.En(e,m,r[g%l],i),E=this.dn(e,m,s[g%l],o),w=a.map(C=>this.En(e,m,C,!0));f.push(...this.createRange(y,E,w))}return f}En(e,t,r,i){const s=new Qc(e,fe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Qc(e,fe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new UU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return k.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new jt(un.comparator),f=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?f=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Am;for(const i of Uc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Zc.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Am;return Zc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Am;return Zc.bt.Pt($c(this.databaseId,t),r.Ht(function(s){const o=Uc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Am);let s=0;for(const o of Uc(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&lm(a))i=this.mn(i,o,a);else{const l=u.Ht(o.kind);Zc.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Am;u.seed(a.Wt()),Zc.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Sm(e),i=Rh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return k.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const m=g?new mh(g.sequenceNumber,new Yi(Wc(g.readTime),new fe(vo(g.documentKey)),g.largestBatchId)):mh.empty(),y=f.fields.map(([E,w])=>new Bc(un.fromServerFormat(E),w));return new gh(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sm(e),s=Rh(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>k.forEach(a,u=>s.put(OU(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return k.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?k.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,u=>this.pn(e,i,u).next(l=>{const f=this.yn(s,u);return l.isEqual(f)?k.resolve():this.wn(e,s,u,l,f)}))))})}Sn(e,t,r,i){return Ph(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Ph(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Ph(e);let s=new jt(Iu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Qc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new jt(Iu);const i=this.An(t,e);if(null==i)return r;const s=VD(t);if(null!=s){const o=e.data.field(s.fieldPath);if(lm(o))for(const a of o.arrayValue.values||[])r=r.add(new Qc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Qc(t.indexId,e.key,vI,i));return r}wn(e,t,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,f,g,m){const y=u.getIterator(),E=l.getIterator();let w=_h(y),C=_h(E);for(;w||C;){let R=!1,P=!1;if(w&&C){const O=f(w,C);O<0?P=!0:O>0&&(R=!0)}else null!=w?P=!0:R=!0;R?(g(C),C=_h(E)):P?(m(w),w=_h(y)):(w=_h(y),C=_h(E))}}(i,s,Iu,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),k.waitFor(o)}gn(e){let t=1;return Rh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Iu(o,a)).filter((o,a,u)=>!a||0!==Iu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Iu(o,e),u=Iu(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,vI,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,vI,[]]))}return s}Dn(e,t){return Iu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zU)}getMinOffset(e,t){return k.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ce())).next(zU)}}function HU(n){return yr(n,"collectionParents")}function Ph(n){return yr(n,"indexEntries")}function Sm(n){return yr(n,"indexConfiguration")}function Rh(n){return yr(n,"indexState")}function zU(n){Pe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;LD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Yi(e.readTime,e.documentKey,t)}const qU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Jr(e,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.Y({range:o},(f,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Pe(1===a)}));const l=[];for(const f of t.mutations){const g=p3(e,f.key.path,t.batchId);s.push(i.delete(g)),l.push(f.key)}return k.waitFor(s).next(()=>l)}function EI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ce();e=n.noDocument}return JSON.stringify(e).length}Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(41943040,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);class II{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Pe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new II(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Mh(e),o=wu(e);return o.add({}).next(a=>{Pe("number"==typeof a);const u=new JD(a,t,r,i),l=function(y,E,w){const C=w.baseMutations.map(P=>Tm(y.ct,P)),R=w.mutations.map(P=>Tm(y.ct,P));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:C,mutations:R}}(this.serializer,this.userId,u),f=[];let g=new jt((m,y)=>Ge(m.canonicalString(),y.canonicalString()));for(const m of i){const y=p3(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),f.push(o.put(l)),f.push(s.put(y,hte))}return g.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),k.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return wu(e).get(t).next(r=>r?(Pe(r.userId===this.userId),Kc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?k.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return wu(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Pe(a.batchId>=r),s=Kc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wu(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Kc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Mh(e).Y({range:i},(o,a,u)=>{const[l,f,g]=o,m=vo(f);if(l===this.userId&&t.path.isEqual(m))return wu(e).get(g).next(y=>{if(!y)throw Ce();Pe(y.userId===this.userId),s.push(Kc(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ge);const i=[];return t.forEach(s=>{const o=tI(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Mh(e).Y({range:a},(l,f,g)=>{const[m,y,E]=l,w=vo(y);m===this.userId&&s.path.isEqual(w)?r=r.add(E):g.done()});i.push(u)}),k.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=tI(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new jt(Ge);return Mh(e).Y({range:o},(u,l,f)=>{const[g,m,y]=u,E=vo(m);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(wu(e).get(s).next(o=>{if(null===o)throw Ce();Pe(o.userId===this.userId),r.push(Kc(this.serializer,o))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return GU(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Mh(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=vo(s[1]);i.push(u)}else a.done()}).next(()=>{Pe(0===i.length)})})}containsKey(e,t){return WU(e,this.userId,t)}xn(e){return KU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WU(n,e,t){const r=tI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Mh(n).Y({range:s,J:!0},(a,u,l)=>{const[f,g,m]=a;f===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function wu(n){return yr(n,"mutations")}function Mh(n){return yr(n,"documentMutations")}function KU(n){return yr(n,"mutationQueues")}class Yc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Yc(0)}static Bn(){return new Yc(-1)}}class bne{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const r=new Yc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Me.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xh(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(Pe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return xh(e).Y((o,a)=>{const u=bm(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>k.waitFor(s)).next(()=>i)}forEachTarget(e,t){return xh(e).Y((r,i)=>{const s=bm(i);t(s)})}Ln(e){return ZU(e).get("targetGlobalKey").next(t=>(Pe(null!==t),t))}kn(e,t){return ZU(e).put("targetGlobalKey",t)}qn(e,t){return xh(e).put(xU(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return xh(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=bm(a);fm(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Cu(e);return t.forEach(o=>{const a=Yr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),k.waitFor(i)}removeMatchingKeys(e,t,r){const i=Cu(e);return k.forEach(t,s=>{const o=Yr(s.path);return k.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Cu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Cu(e);let s=tt();return i.Y({range:r,J:!0},(o,a,u)=>{const l=vo(o[1]),f=new fe(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=Yr(t.path),i=IDBKeyRange.bound([r],[s3(r)],!1,!0);let s=0;return Cu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,t){return xh(e).get(t).next(r=>r?bm(r):null)}}function xh(n){return yr(n,"targets")}function ZU(n){return yr(n,"targetGlobal")}function Cu(n){return yr(n,"targetDocuments")}function QU([n,e],[t,r]){const i=Ge(n,t);return 0===i?Ge(e,r):i}class Dne{constructor(e){this.Kn=e,this.buffer=new jt(QU),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();QU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,J.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){hu(r)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield du(r)}yield t.zn(3e5)}))}}class Ane{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return k.resolve(Ji._e);const r=new Dne(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(qU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qU):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),fh()<=go.in.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Sne{constructor(e,t){this.db=e,this.garbageCollector=function JU(n,e){return new Ane(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return wI(e,r)}removeReference(e,t,r){return wI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wI(e,t)}er(e,t){return function(i,s){let o=!1;return KU(i).Z(a=>WU(i,a,s).next(u=>(u&&(o=!0),k.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Me.min()),Cu(e).delete([0,Yr(o.path)])))});i.push(u)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wI(e,t)}Xn(e,t){const r=Cu(e);let i,s=Ji._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Ji._e&&t(new fe(vo(i)),s),s=l,i=u):s=Ji._e}).next(()=>{s!==Ji._e&&t(new fe(vo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wI(n,e){return Cu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Yr(e.path),sequenceNumber:i}));var i}class XU{constructor(){this.changes=new oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jc(e).put(r)}removeEntry(e,t,r){return Jc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mI(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=cn.newInvalidDocument(t);return Jc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pm(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:cn.newInvalidDocument(t)};return Jc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pm(t))},(i,s)=>{r={document:this.nr(t,s),size:EI(s)}}).next(()=>r)}getEntries(e,t){let r=xi();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=xi(),i=new Yt(fe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,EI(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return k.resolve();let i=new jt(rB);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Pm(i.first()),Pm(i.last())),o=i.getIterator();let a=o.getNext();return Jc(e).Y({index:"documentKeyIndex",range:s},(u,l,f)=>{const g=fe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rB(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.U(Pm(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),mI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jc(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=xi();for(const g of l){const m=this.nr(fe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(gm(t,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=xi();const o=nB(t,r),a=nB(t,Yi.max());return Jc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,f)=>{const g=this.nr(fe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new Rne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tB(e).get("remoteDocumentGlobalKey").next(t=>(Pe(!!t),t))}tr(e,t){return tB(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function mne(n,e){let t;if(e.document)t=TU(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),i=Wc(e.noDocument.readTime);t=cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce();{const r=fe.fromSegments(e.unknownDocument.path),i=Wc(e.unknownDocument.version);t=cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new gn(i[0],i[1]);return Me.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Me.min()))return r}return cn.newInvalidDocument(e)}}function eB(n){return new Pne(n)}class Rne extends XU{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new oa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jt((s,o)=>Ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=MU(this.ar.serializer,o);i=i.add(s.path.popLast());const l=EI(u);r+=l-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=MU(this.ar.serializer,o.convertToNoDocument(Me.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function tB(n){return yr(n,"remoteDocumentGlobal")}function Jc(n){return yr(n,"remoteDocumentsV14")}function Pm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nB(n,e){const t=e.documentKey.path.toArray();return[n,mI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ge(t[s],r[s]),i)return i;return i=Ge(t.length,r.length),i||(i=Ge(t[t.length-2],r[r.length-2]),i||Ge(t[t.length-1],r[r.length-1]))}class Mne{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&vm(r.mutation,i,Mi.empty(),gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tt()){const i=Io();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=mm();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Io();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=xi();const o=_m(),a=_m();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof aa)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),vm(f.mutation,l,f.mutation.getFieldMask(),gn.now())):o.set(l.key,Mi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var g;return a.set(l,new Mne(f,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=_m();let i=new Yt((o,a)=>o-a),s=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||Mi.empty();f=a.applyToLocalView(l,f),r.set(u,f);const g=(i.get(a.batchId)||tt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,g=K3();f.forEach(m=>{if(!s.has(m)){const y=rU(t.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return fe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):KD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(Io());let a=-1,u=s;return o.next(l=>k.forEach(l,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,tt())).next(f=>({batchId:a,changes:W3(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=mm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=mm();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,u=>{const l=(g=t,m=u.child(s),new sa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,cn.newInvalidDocument(f)))});let a=mm();return o.forEach((u,l)=>{const f=s.get(u);void 0!==f&&vm(f.mutation,l,Mi.empty(),gn.now()),gm(t,l)&&(a=a.insert(u,l))}),a})}}class xne{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return k.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Fn(i.createTime)}),k.resolve();var i}getNamedQuery(e,t){return k.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:uA(i.bundledQuery),readTime:Fn(i.readTime)}),k.resolve();var i}}class Nne{constructor(){this.overlays=new Yt(fe.comparator),this.hr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Io();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){const i=Io(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Yt((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=Io(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=Io(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return k.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eA(t,r));let s=this.hr.get(t);void 0===s&&(s=tt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class gA{constructor(){this.Pr=new jt(vr.Ir),this.Tr=new jt(vr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new vr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new vr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new fe(new _t([])),r=new vr(t,e),i=new vr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new fe(new _t([])),r=new vr(t,e),i=new vr(t,e+1);let s=tt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new vr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return fe.comparator(e.key,t.key)||Ge(e.pr,t.pr)}static Er(e,t){return Ge(e.pr,t.pr)||fe.comparator(e.key,t.key)}}class One{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new jt(vr.Ir)}checkEmpty(e){return k.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new JD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new vr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vr(t,0),i=new vr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ge);return t.forEach(i=>{const s=new vr(i,0),o=new vr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),k.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new vr(new fe(s),0);let a=new jt(Ge);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),k.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pe(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return k.forEach(t.mutations,i=>{const s=new vr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new vr(t,0),i=this.wr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return k.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kne{constructor(e){this.vr=e,this.docs=new Yt(fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=xi();const o=t.path,a=new fe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||LD(a3(f),r)<=0||(i.has(f.key)||gm(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ce()}Fr(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Fne(this)}getSize(e){return k.resolve(this.size)}}class Fne extends XU{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Vne{constructor(e){this.persistence=e,this.Mr=new oa(t=>Hc(t),fm),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gA,this.targetCount=0,this.Br=Yc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),k.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.qn(t),k.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),k.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Nr.containsKey(t))}}class mA{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ji(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Vne(this),this.indexManager=new Cne,this.remoteDocumentCache=new kne(r=>this.referenceDelegate.Kr(r)),this.serializer=new RU(t),this.$r=new xne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nne,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new One(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new Lne(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return k.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class Lne extends c3{constructor(e){super(),this.currentSequenceNumber=e}}class CI{constructor(e){this.persistence=e,this.zr=new gA,this.jr=null}static Hr(e){return new CI(e)}get Jr(){if(this.jr)return this.jr;throw Ce()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),k.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,r=>{const i=fe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Me.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return k.or([()=>k.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Une{constructor(e){this.serializer=e}N(e,t,r,i){const s=new eI("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",f3,{unique:!0}),u.createObjectStore("documentMutations"),sB(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=k.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sB(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",f3,{unique:!0});const g=l.store("mutations"),m=f.map(y=>g.put(y));return k.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:Tte});l.createIndex("collectionPathOverlayIndex",bte,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Dte,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:fte});l.createIndex("documentKeyIndex",pte),l.createIndex("collectionGroupIndex",gte)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Ete}).createIndex("sequenceNumberIndex",Ite,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:wte}).createIndex("documentKeyIndex",Cte,{unique:!1})}(e))),o}ei(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=EI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>k.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>k.forEach(a,u=>{Pe(u.userId===s.userId);const l=Kc(this.serializer,u);return GU(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new _t(o),l=[0,Yr(u)];s.push(t.get(l).next(f=>f?k.resolve():t.put({targetId:0,path:Yr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>k.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:vte});const r=t.store("collectionParents"),i=new pA,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Yr(u)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new _t(o);return s(u.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const f=vo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,i)=>{const s=bm(i),o=xU(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(g=o,g.document?new fe(_t.fromString(g.document.name).popFirst(5)):g.noDocument?fe.fromSegments(g.noDocument.path):g.unknownDocument?fe.fromSegments(g.unknownDocument.path):Ce()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>k.waitFor(i))}si(e,t){const r=t.store("mutations"),i=eB(this.serializer),s=new mA(CI.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:tt();Kc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),k.forEach(a,(u,l)=>{const f=new _r(l),g=_I.lt(this.serializer,f),m=s.getIndexManager(f),y=II.lt(f,this.serializer,m,s.referenceDelegate);return new iB(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new jD(t,Ji._e),u).next()})})}}function sB(n){n.createObjectStore("targetDocuments",{keyPath:_te}).createIndex("documentTargetsIndex",yte,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mte,{unique:!0}),n.createObjectStore("targetGlobal")}const _A="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yA{constructor(e,t,r,i,s,o,a,u,l,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=f,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!yA.D())throw new se(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sne(this,i),this.Ti=t+"main",this.serializer=new RU(u),this.Ei=new vs(this.Ti,this.ui,new Une(this.serializer)),this.Qr=new bne(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eB(this.serializer),this.$r=new _ne,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(B.FAILED_PRECONDITION,_A);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ji(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,J.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,J.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,J.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(hu(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Rm(e).get("owner").next(t=>k.resolve(this.Si(t)))}bi(e){return bI(e).delete(this.clientId)}Di(){var e=this;return(0,J.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=yr(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return k.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?k.resolve(!0):Rm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new se(B.FAILED_PRECONDITION,_A);return!1}}return!(!this.networkEnabled||!this.inForeground)||bI(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,J.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jD(t,Ji._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>bI(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return II.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return _I.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.ui)?Ste:14===u?_3:13===u?m3:12===u?Ate:11===u?g3:void Ce();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new jD(a,this.kr?this.kr.next():Ji._e),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new se(B.FAILED_PRECONDITION,u3);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Rm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(B.FAILED_PRECONDITION,_A)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rm(e).put("owner",t)}static D(){return vs.D()}yi(e){const t=Rm(e);return t.get("owner").next(r=>this.Si(r)?(oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):k.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Pt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){kn("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rm(n){return yr(n,"owner")}function bI(n){return yr(n,"clientMetadata")}function vA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=tt(),i=tt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new EA(e,t.fromCache,r,i)}}class Bne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oB{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Pt.G6)()?8:vs.v((0,Pt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Bne;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(fh()<=go.in.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",wh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(fh()<=go.in.DEBUG&&oe("QueryEngine","Query:",wh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(fh()<=go.in.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",wh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):k.resolve())}ji(e,t){if(j3(t))return k.resolve(null);let r=pi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lI(t,null,"F"),r=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=tt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(t,a);return this.Xi(t,l,o,u.readTime)?this.ji(e,lI(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return j3(t)||i.isEqual(Me.min())?k.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?k.resolve(null):(fh()<=go.in.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wh(t)),this.es(e,o,t,o3(i,-1)).next(a=>a))})}Zi(e,t){let r=new jt(q3(e));return t.forEach((i,s)=>{gm(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return fh()<=go.in.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",wh(t)),this.zi.getDocumentsMatchingQuery(e,t,Yi.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class jne{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Yt(Ge),this.rs=new oa(s=>Hc(s),fm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iB(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function aB(n,e,t,r){return new jne(n,e,t,r)}function uB(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,J.Z)(function*(n,e){const t=le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=tt();for(const l of i){o.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}),IA.apply(this,arguments)}function cB(n){const e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function lB(n,e,t){let r=tt(),i=tt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=xi();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Me.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function zne(n,e){const t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nh(n,e){const t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new ua(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Oh(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,J.Z)(function*(n,e,t){const r=le(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!hu(o))throw o;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),wA.apply(this,arguments)}function DI(n,e,t){const r=le(n);let i=Me.min(),s=tt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){const g=le(u),m=g.rs.get(f);return void 0!==m?k.resolve(g.ns.get(m)):g.Qr.getTargetData(l,f)}(r,o,pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Me.min(),t?s:tt())).next(a=>(fB(r,z3(e),a),{documents:a,hs:s})))}function dB(n,e){const t=le(n),r=le(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function hB(n,e){const t=le(n),r=t.ss.get(e)||Me.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,o3(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fB(t,e,i),i))}function fB(n,e,t){let r=n.ss.get(e)||Me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function CA(){return CA=(0,J.Z)(function*(n,e,t,r){const i=le(n);let s=tt(),o=xi();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(s=s.add(f));const g=e.Is(l);g.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(f,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Nh(i,(f=r,pi(Eh(_t.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>lB(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))}),CA.apply(this,arguments)}function Gne(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,J.Z)(function*(n,e,t=tt()){const r=yield Nh(n,pi(uA(e.bundledQuery))),i=le(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Fn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(ar.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),TA.apply(this,arguments)}function pB(n,e){return`firestore_clients_${n}_${e}`}function gB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bA(n,e){return`firestore_targets_${n}_${e}`}class AI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new se(i.error.code,i.error.message))),o?new AI(e,t,i.state,s):(kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new se(r.error.code,r.error.message))),s?new Mm(e,r.state,i):(kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=QD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=d3(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new SI(e,s):(kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DA{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DA(t.clientId,t.onlineState):(kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AA{constructor(){this.activeTargetIds=QD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SA{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Yt(Ge),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=pB(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new AA),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,J.Z)(function*(){const t=yield e.syncEngine.Li();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(pB(e.persistenceKey,i));if(s){const o=SI.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,r){this.Bs(e,t,r),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bA(this.persistenceKey,e));if(r){const i=Mm.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bA(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe("SharedClientState","READ",e,t),t}setItem(e,t){oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,J.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Ji._e;if(null!=o)try{const u=JSON.parse(o);Pe("number"==typeof u),a=u}catch(u){kn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ji._e&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,r){const i=new AI(this.currentUser,e,t,r),s=gB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const t=gB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=bA(this.persistenceKey,e),s=new Mm(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return SI.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return AI.Es(new _r(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Mm.Es(i,t)}xs(e){return DA.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,J.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=QD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class mB{constructor(){this.no=new AA,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new AA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wne{io(e){}shutdown(){}}class _B{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let PI=null;function PA(){return null===PI?PI=268435456+Math.round(2147483648*Math.random()):PI++,"0x"+PI.toString(16)}const Kne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zne{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Xr="WebChannelConnection";class Qne extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){const a=PA(),u=this.bo(t,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(t,u,l,i).then(f=>(oe("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Ri("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+hh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){return`${this.fo}/v1/${r}:${Kne[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=PA();return new Promise((o,a)=>{const u=new Wee;u.setWithCredentials(!0),u.listenOnce(qee.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case kD.NO_ERROR:const f=u.getResponseJson();oe(Xr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case kD.TIMEOUT:oe(Xr,`RPC '${e}' ${s} timed out`),a(new se(B.DEADLINE_EXCEEDED,"Request time out"));break;case kD.HTTP_ERROR:const g=u.getStatus();if(oe(Xr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const E=function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(R)>=0?R:B.UNKNOWN}(y.status);a(new se(E,y.message))}else a(new se(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new se(B.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{oe(Xr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);oe(Xr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Fo(e,t,r){const i=PA(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hee(),a=zee(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");oe(Xr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let m=!1,y=!1;const E=new Zne({lo:C=>{y?oe(Xr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||(oe(Xr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),oe(Xr,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},ho:()=>g.close()}),w=(C,R,P)=>{C.listen(R,O=>{try{P(O)}catch(W){setTimeout(()=>{throw W},0)}})};return w(g,XE.EventType.OPEN,()=>{y||oe(Xr,`RPC '${e}' stream ${i} transport opened.`)}),w(g,XE.EventType.CLOSE,()=>{y||(y=!0,oe(Xr,`RPC '${e}' stream ${i} transport closed`),E.Vo())}),w(g,XE.EventType.ERROR,C=>{y||(y=!0,Ri(Xr,`RPC '${e}' stream ${i} transport errored:`,C),E.Vo(new se(B.UNAVAILABLE,"The operation could not be completed")))}),w(g,XE.EventType.MESSAGE,C=>{var R;if(!y){const P=C.data[0];Pe(!!P);const W=P.error||(null===(R=P[0])||void 0===R?void 0:R.error);if(W){oe(Xr,`RPC '${e}' stream ${i} received error:`,W);const ce=W.status;let Re=function(_i){const Ni=Kn[_i];if(void 0!==Ni)return cU(Ni)}(ce),$e=W.message;void 0===Re&&(Re=B.INTERNAL,$e="Unknown error status: "+ce+" with message "+W.message),y=!0,E.Vo(new se(Re,$e)),g.close()}else oe(Xr,`RPC '${e}' stream ${i} received:`,P),E.mo(P)}}),w(a,Gee.STAT_EVENT,C=>{C.stat===e3.PROXY?oe(Xr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===e3.NOPROXY&&oe(Xr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}}function yB(){return typeof window<"u"?window:null}function RI(){return typeof document<"u"?document:null}function xm(n){return new one(n,!0)}class RA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class vB{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new RA(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,J.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,J.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,J.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new se(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,J.Z)(function*(){e.state=0,e.start()}))}__(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yne extends vB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function cne(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ce(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(Pe(void 0===f||"string"==typeof f),ar.fromBase64String(f||"")):(Pe(void 0===f||f instanceof Uint8Array),ar.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?B.UNKNOWN:cU(l.code);return new se(f,l.message||"")}(o);t=new pU(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=wo(n,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):Me.min(),a=new Or({mapValue:{fields:r.document.fields}}),u=cn.newFoundDocument(i,s,o,a);t=new gI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=wo(n,r.document),s=r.readTime?Fn(r.readTime):Me.min(),o=cn.newNoDocument(i,s);t=new gI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=wo(n,r.document);t=new gI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ce();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new ene(i,s);t=new fU(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?Fn(o.readTime):Me.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=sA(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=uI(u)?{documents:bU(s,u)}:{query:aA(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yU(s,o.resumeToken);const l=nA(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Ah(s,o.snapshotVersion.toTimestamp());const l=nA(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function dne(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=sA(this.serializer),t.removeTarget=e,this.t_(t)}}class Jne extends vB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function lne(n,e){return n&&n.length>0?(Pe(void 0!==e),n.map(t=>function(i,s){let o=Fn(i.updateTime?i.updateTime:s);return o.isEqual(Me.min())&&(o=Fn(s)),new Qte(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.T_(r,t)}return Pe(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=sA(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tm(this.serializer,r))};this.t_(t)}}class Xne extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,iA(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(B.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,iA(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(B.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class tre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(kn(t),this.g_=!1):oe("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class nre{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,J.Z)(function*(){var u;Tu(o)&&(oe("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,J.Z)(function*(f){const g=le(f);g.v_.add(4),yield kh(g),g.x_.set("Unknown"),g.v_.delete(4),yield Nm(g)}),function l(f){return u.apply(this,arguments)})(o))}))}),this.x_=new tre(r,i)}}function Nm(n){return xA.apply(this,arguments)}function xA(){return xA=(0,J.Z)(function*(n){if(Tu(n))for(const e of n.F_)yield e(!0)}),xA.apply(this,arguments)}function kh(n){return NA.apply(this,arguments)}function NA(){return NA=(0,J.Z)(function*(n){for(const e of n.F_)yield e(!1)}),NA.apply(this,arguments)}function MI(n,e){const t=le(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),FA(t)?kA(t):Vh(t).Jo()&&OA(t,e))}function Om(n,e){const t=le(n),r=Vh(t);t.C_.delete(e),r.Jo()&&EB(t,e),0===t.C_.size&&(r.Jo()?r.Xo():Tu(t)&&t.x_.set("Unknown"))}function OA(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vh(n).c_(e)}function EB(n,e){n.O_.Oe(e),Vh(n).l_(e)}function kA(n){n.O_=new nne({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Vh(n).start(),n.x_.p_()}function FA(n){return Tu(n)&&!Vh(n).Ho()&&n.C_.size>0}function Tu(n){return 0===le(n).v_.size}function IB(n){n.O_=void 0}function rre(n){return VA.apply(this,arguments)}function VA(){return VA=(0,J.Z)(function*(n){n.C_.forEach((e,t)=>{OA(n,e)})}),VA.apply(this,arguments)}function ire(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,J.Z)(function*(n,e){IB(n),FA(n)?(n.x_.S_(e),kA(n)):n.x_.set("Unknown")}),LA.apply(this,arguments)}function sre(n,e,t){return UA.apply(this,arguments)}function UA(){return UA=(0,J.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof pU&&2===e.state&&e.cause)try{yield(r=(0,J.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xI(n,r)}else if(e instanceof gI?n.O_.$e(e):e instanceof fU?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Me.min()))try{const r=yield cB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.C_.get(l);f&&s.C_.set(l,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const f=s.C_.get(u);if(!f)return;s.C_.set(u,f.withResumeToken(ar.EMPTY_BYTE_STRING,f.snapshotVersion)),EB(s,u);const g=new ua(f.target,u,l,f.sequenceNumber);OA(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),yield xI(n,r)}var r}),UA.apply(this,arguments)}function xI(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,J.Z)(function*(n,e,t){if(!hu(e))throw e;n.v_.add(1),yield kh(n),n.x_.set("Offline"),t||(t=()=>cB(n.localStore)),n.asyncQueue.enqueueRetryable((0,J.Z)(function*(){oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield Nm(n)}))}),BA.apply(this,arguments)}function wB(n,e){return e().catch(t=>xI(n,t,e))}function Fh(n){return jA.apply(this,arguments)}function jA(){return jA=(0,J.Z)(function*(n){const e=le(n),t=bu(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;ore(e);)try{const i=yield zne(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,are(e,i)}catch(i){yield xI(e,i)}CB(e)&&TB(e)}),jA.apply(this,arguments)}function ore(n){return Tu(n)&&n.D_.length<10}function are(n,e){n.D_.push(e);const t=bu(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function CB(n){return Tu(n)&&!bu(n).Ho()&&n.D_.length>0}function TB(n){bu(n).start()}function ure(n){return $A.apply(this,arguments)}function $A(){return $A=(0,J.Z)(function*(n){bu(n).d_()}),$A.apply(this,arguments)}function cre(n){return HA.apply(this,arguments)}function HA(){return HA=(0,J.Z)(function*(n){const e=bu(n);for(const t of n.D_)e.I_(t.mutations)}),HA.apply(this,arguments)}function lre(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,J.Z)(function*(n,e,t){const r=n.D_.shift(),i=XD.from(r,e,t);yield wB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fh(n)}),zA.apply(this,arguments)}function dre(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,J.Z)(function*(n,e){var t;e&&bu(n).P_&&(yield(t=(0,J.Z)(function*(i,s){if(uU(a=s.code)&&a!==B.ABORTED){const o=i.D_.shift();bu(i).Zo(),yield wB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Fh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),CB(n)&&TB(n)}),qA.apply(this,arguments)}function bB(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,J.Z)(function*(n,e){const t=le(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=Tu(t);t.v_.add(3),yield kh(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield Nm(t)}),GA.apply(this,arguments)}function WA(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,J.Z)(function*(n,e){const t=le(n);e?(t.v_.delete(2),yield Nm(t)):e||(t.v_.add(2),yield kh(t),t.x_.set("Unknown"))}),KA.apply(this,arguments)}function Vh(n){return n.N_||(n.N_=function(t,r,i){const s=le(t);return s.R_(),new Yne(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:rre.bind(null,n),To:ire.bind(null,n),u_:sre.bind(null,n)}),n.F_.push(function(){var e=(0,J.Z)(function*(t){t?(n.N_.Zo(),FA(n)?kA(n):n.x_.set("Unknown")):(yield n.N_.stop(),IB(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function bu(n){return n.B_||(n.B_=function(t,r,i){const s=le(t);return s.R_(),new Jne(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:ure.bind(null,n),To:dre.bind(null,n),E_:cre.bind(null,n),T_:lre.bind(null,n)}),n.F_.push(function(){var e=(0,J.Z)(function*(t){t?(n.B_.Zo(),yield Fh(n)):(yield n.B_.stop(),n.D_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class ZA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new ZA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new se(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(n,e){if(kn("AsyncQueue",`${e}: ${n}`),hu(n))return new se(B.UNAVAILABLE,`${e}: ${n}`);throw n}class Uh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=mm(),this.sortedSet=new Yt(this.comparator)}static emptySet(e){return new Uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DB{constructor(){this.L_=new Yt(fe.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ce():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bh{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Bh(e,t,Uh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class hre{constructor(){this.q_=void 0,this.Q_=[]}}class fre{constructor(){this.queries=new oa(e=>H3(e),pm),this.onlineState="Unknown",this.K_=new Set}}function QA(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,J.Z)(function*(n,e){const t=le(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new hre),i)try{s.q_=yield t.onListen(r)}catch(o){const a=Lh(o,`Initialization of query '${wh(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&eS(t)}),YA.apply(this,arguments)}function JA(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,J.Z)(function*(n,e){const t=le(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XA.apply(this,arguments)}function pre(n,e){const t=le(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&eS(t)}function gre(n,e,t){const r=le(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function eS(n){n.K_.forEach(e=>{e.next()})}class tS{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Bh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Bh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class mre{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class AB{constructor(e){this.serializer=e}Ps(e){return wo(this.serializer,e)}Is(e){return e.metadata.exists?TU(this.serializer,e.document,!1):cn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Fn(e)}}class _re{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SB(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=_t.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new AB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||tt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,J.Z)(function*(){const t=yield function qne(n,e,t,r){return CA.apply(this,arguments)}(e.localStore,new AB(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield Gne(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function SB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PB{constructor(e){this.key=e}}class RB{constructor(e){this.key=e}}class MB{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=tt(),this.mutatedKeys=tt(),this.ua=q3(e),this.ca=new Uh(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new DB,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const m=i.get(f),y=gm(this.query,g)?g:null,E=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?E!==w&&(r.track({type:3,doc:y}),C=!0):this.Ia(m,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.ua(y,u)>0||l&&this.ua(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),C=!0):m&&!y&&(r.track({type:1,doc:m}),C=!0,(u||l)&&(a=!0)),C&&(y?(o=o.add(y),s=w?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((f,g)=>function(y,E){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return w(y)-w(E)}(f.type,g.type)||this.ua(f.doc,g.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,l=u!==this._a;return this._a=u,0!==o.length||l?{snapshot:new Bh(this.query,e.ca,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new DB,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=tt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new RB(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new PB(r))}),t}Ra(e){this.oa=e.hs,this.aa=tt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Bh.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class yre{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vre{constructor(e){this.key=e,this.ma=!1}}class Ere{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new oa(a=>H3(a),pm),this.pa=new Map,this.ya=new Set,this.wa=new Yt(fe.comparator),this.Sa=new Map,this.ba=new gA,this.Da={},this.Ca=new Map,this.va=Yc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Ire(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,J.Z)(function*(n,e){const t=bS(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield Nh(t.localStore,pi(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield rS(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&MI(t.remoteStore,o)}return i}),nS.apply(this,arguments)}function rS(n,e,t,r,i){return iS.apply(this,arguments)}function iS(){return iS=(0,J.Z)(function*(n,e,t,r,i){n.Ma=(g,m,y)=>{return(E=(0,J.Z)(function*(C,R,P,O){let W=R.view.ha(P);W.Xi&&(W=yield DI(C.localStore,R.query,!1).then(({documents:Nt})=>R.view.ha(Nt,W)));const ce=O&&O.targetChanges.get(R.targetId),Re=O&&null!=O.targetMismatches.get(R.targetId),$e=R.view.applyChanges(W,C.isPrimaryClient,ce,Re);return pS(C,R.targetId,$e.da),$e.snapshot}),function w(C,R,P,O){return E.apply(this,arguments)})(n,g,m,y);var E};const s=yield DI(n.localStore,e,!0),o=new MB(e,s.hs),a=o.ha(s.documents),u=wm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);pS(n,t,l.da);const f=new yre(e,t,o);return n.ga.set(e,f),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),l.snapshot}),iS.apply(this,arguments)}function wre(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,J.Z)(function*(n,e){const t=le(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!pm(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Oh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Om(t.remoteStore,r.targetId),jh(t,r.targetId)}).catch(du))):(jh(t,r.targetId),yield Oh(t.localStore,r.targetId,!0))}),sS.apply(this,arguments)}function oS(){return oS=(0,J.Z)(function*(n,e,t){const r=DS(n);try{const i=yield function(o,a){const u=le(o),l=gn.now(),f=a.reduce((y,E)=>y.add(E.key),tt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=xi(),w=tt();return u.os.getEntries(y,f).next(C=>{E=C,E.forEach((R,P)=>{P.isValidDocument()||(w=w.add(R))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(C=>{g=C;const R=[];for(const P of a){const O=Jte(P,g.get(P.key).overlayedDocument);null!=O&&R.push(new aa(P.key,O,S3(O.value.mapValue),mn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,R,a)}).next(C=>{m=C;const R=C.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(y,C.batchId,R)})}).then(()=>({batchId:m.batchId,changes:W3(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Da[o.currentUser.toKey()];l||(l=new Yt(Ge)),l=l.insert(a,u),o.Da[o.currentUser.toKey()]=l}(r,i.batchId,t),yield ca(r,i.changes),yield Fh(r.remoteStore)}catch(i){const s=Lh(i,"Failed to persist write");t.reject(s)}}),oS.apply(this,arguments)}function xB(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,J.Z)(function*(n,e){const t=le(n);try{const r=yield function Hne(n,e){const t=le(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,g)=>{const m=i.get(g);if(!m)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var w,C,R;null!==e.targetMismatches.get(g)?y=y.withResumeToken(ar.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),C=y,R=f,(0===(w=m).resumeToken.approximateByteSize()||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,y))});let u=xi(),l=tt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(lB(s,o,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(Me.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(g=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Sa.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Pe(o.ma):i.removedDocuments.size>0&&(Pe(o.ma),o.ma=!1))}),yield ca(t,r,e)}catch(r){yield du(r)}}),aS.apply(this,arguments)}function NB(n,e,t){const r=le(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let l=!1;u.queries.forEach((f,g)=>{for(const m of g.Q_)m.U_(a)&&(l=!0)}),l&&eS(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Tre(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,J.Z)(function*(n,e,t){const r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Yt(fe.comparator);o=o.insert(s,cn.newNoDocument(s,Me.min()));const a=tt().add(s),u=new Im(Me.min(),new Map,new Yt(Ge),o,a);yield xB(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),gS(r)}else yield Oh(r.localStore,e,!1).then(()=>jh(r,e,t)).catch(du)}),uS.apply(this,arguments)}function bre(n,e){return cS.apply(this,arguments)}function cS(){return cS=(0,J.Z)(function*(n,e){const t=le(n),r=e.batch.batchId;try{const i=yield function $ne(n,e){const t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const g=l.batch,m=g.keys();let y=k.resolve();return m.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(w=>{const C=l.docVersions.get(E);Pe(null!==C),w.version.compareTo(C)<0&&(g.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),f.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=tt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);fS(t,r,null),hS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ca(t,i)}catch(i){yield du(i)}}),cS.apply(this,arguments)}function Dre(n,e,t){return lS.apply(this,arguments)}function lS(){return lS=(0,J.Z)(function*(n,e,t){const r=le(n);try{const i=yield function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Pe(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);fS(r,e,t),hS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ca(r,i)}catch(i){yield du(i)}}),lS.apply(this,arguments)}function dS(){return dS=(0,J.Z)(function*(n,e){const t=le(n);Tu(t.remoteStore)||oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=le(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ca.get(r)||[];i.push(e),t.Ca.set(r,i)}catch(r){const i=Lh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dS.apply(this,arguments)}function hS(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function fS(n,e,t){const r=le(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function jh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||OB(n,r)})}function OB(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(Om(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),gS(n))}function pS(n,e,t){for(const r of t)r instanceof PB?(n.ba.addReference(r.key,e),Sre(n,r)):r instanceof RB?(oe("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||OB(n,r.key)):Ce()}function Sre(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(oe("SyncEngine","New document in limbo: "+t),n.ya.add(r),gS(n))}function gS(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new fe(_t.fromString(e)),r=n.va.next();n.Sa.set(r,new vre(t)),n.wa=n.wa.insert(t,r),MI(n.remoteStore,new ua(pi(Eh(t.path)),r,"TargetPurposeLimboResolution",Ji._e))}}function ca(n,e,t){return mS.apply(this,arguments)}function mS(){return mS=(0,J.Z)(function*(n,e,t){const r=le(n),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const f=EA.Ki(u.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,J.Z)(function*(l,f){const g=le(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>k.forEach(f,y=>k.forEach(y.qi,E=>g.persistence.referenceDelegate.addReference(m,y.targetId,E)).next(()=>k.forEach(y.Qi,E=>g.persistence.referenceDelegate.removeReference(m,y.targetId,E)))))}catch(m){if(!hu(m))throw m;oe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const y=m.targetId;if(!m.fromCache){const E=g.ns.get(y),C=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ns=g.ns.insert(y,C)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,s))}),mS.apply(this,arguments)}function Pre(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,J.Z)(function*(n,e){const t=le(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=yield uB(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(a=>{a.forEach(u=>{u.reject(new se(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ca(t,r.us)}var s}),_S.apply(this,arguments)}function Rre(n,e){const t=le(n),r=t.Sa.get(e);if(r&&r.ma)return tt().add(r.key);{let i=tt();const s=t.pa.get(e);if(!s)return i;for(const o of s){const a=t.ga.get(o);i=i.unionWith(a.view.la)}return i}}function Mre(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,J.Z)(function*(n,e){const t=le(n),r=yield DI(t.localStore,e.query,!0),i=e.view.Ra(r);return t.isPrimaryClient&&pS(t,e.targetId,i.da),i}),yS.apply(this,arguments)}function xre(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,J.Z)(function*(n,e){const t=le(n);return hB(t.localStore,e).then(r=>ca(t,r))}),vS.apply(this,arguments)}function Nre(n,e,t,r){return ES.apply(this,arguments)}function ES(){return ES=(0,J.Z)(function*(n,e,t,r){const i=le(n),s=yield function(a,u){const l=le(a),f=le(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.vn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):k.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Fh(i.remoteStore):"acknowledged"===t||"rejected"===t?(fS(i,e,r||null),hS(i,e),u=e,le(le(i.localStore).mutationQueue).Mn(u)):Ce(),yield ca(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),ES.apply(this,arguments)}function IS(){return IS=(0,J.Z)(function*(n,e){const t=le(n);if(bS(t),DS(t),!0===e&&!0!==t.Fa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield kB(t,r.toArray());t.Fa=!0,yield WA(t.remoteStore,!0);for(const s of i)MI(t.remoteStore,s)}else if(!1===e&&!1!==t.Fa){const r=[];let i=Promise.resolve();t.pa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(jh(t,o),Oh(t.localStore,o,!0))),Om(t.remoteStore,o)}),yield i,yield kB(t,r),function(o){const a=le(o);a.Sa.forEach((u,l)=>{Om(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Yt(fe.comparator)}(t),t.Fa=!1,yield WA(t.remoteStore,!1)}}),IS.apply(this,arguments)}function kB(n,e,t){return wS.apply(this,arguments)}function wS(){return wS=(0,J.Z)(function*(n,e,t){const r=le(n),i=[],s=[];for(const o of e){let a;const u=r.pa.get(o);if(u&&0!==u.length){a=yield Nh(r.localStore,pi(u[0]));for(const l of u){const f=r.ga.get(l),g=yield Mre(r,f);g.snapshot&&s.push(g.snapshot)}}else{const l=yield dB(r.localStore,o);a=yield Nh(r.localStore,l),yield rS(r,FB(l),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),wS.apply(this,arguments)}function FB(n){return B3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kre(n){return t=le(n).localStore,le(le(t).persistence).Li();var t}function Fre(n,e,t,r){return CS.apply(this,arguments)}function CS(){return CS=(0,J.Z)(function*(n,e,t,r){const i=le(n);if(i.Fa)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield hB(i.localStore,z3(s[0])),a=Im.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ar.EMPTY_BYTE_STRING);yield ca(i,o,a);break}case"rejected":yield Oh(i.localStore,e,!0),jh(i,e,r);break;default:Ce()}}),CS.apply(this,arguments)}function Vre(n,e,t){return TS.apply(this,arguments)}function TS(){return TS=(0,J.Z)(function*(n,e,t){const r=bS(n);if(r.Fa){for(const i of e){if(r.pa.has(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=yield dB(r.localStore,i),o=yield Nh(r.localStore,s);yield rS(r,FB(s),o.targetId,!1,o.resumeToken),MI(r.remoteStore,o)}for(const i of t)r.pa.has(i)&&(yield Oh(r.localStore,i,!1).then(()=>{Om(r.remoteStore,i),jh(r,i)}).catch(du))}}),TS.apply(this,arguments)}function bS(n){const e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tre.bind(null,e),e.fa.u_=pre.bind(null,e.eventManager),e.fa.xa=gre.bind(null,e.eventManager),e}function DS(n){const e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dre.bind(null,e),e}class km{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,J.Z)(function*(){t.serializer=xm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return aB(this.persistence,new oB,e.initialUser,this.serializer)}createPersistence(e){return new mA(CI.Hr,this.serializer)}createSharedClientState(e){return new mB}terminate(){var e=this;return(0,J.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AS extends km{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield DS(r.Na.syncEngine),yield Fh(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return aB(this.persistence,new oB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new YU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new lte(t,this.persistence);return new cte(e.asyncQueue,r)}createPersistence(e){const t=vA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new yA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yB(),RI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mB}}class VB extends AS{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof SA&&(r.sharedClientState.syncEngine={Zs:Nre.bind(null,i),Xs:Fre.bind(null,i),eo:Vre.bind(null,i),Li:kre.bind(null,i),Ys:xre.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,J.Z)(function*(o){yield function Ore(n,e){return IS.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=yB();if(!SA.D(t))throw new se(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $h{initialize(e,t){var r=this;return(0,J.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>NB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Pre.bind(null,r.syncEngine),yield WA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fre}createDatastore(e){const t=xm(e.databaseInfo.databaseId),r=new Qne(e.databaseInfo);return new Xne(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>NB(this.syncEngine,t,0),a=_B.D()?new _B:new Wne,new nre(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,l,f){const g=new Ere(i,s,o,a,u,l);return f&&(g.Fa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,J.Z)(function*(){var t,r;yield(r=(0,J.Z)(function*(s){const o=le(s);oe("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield kh(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function LB(n,e=10240){let t=0;return{read:()=>(0,J.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,J.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class NI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bre{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new or,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,J.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,J.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,J.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new mre(JSON.parse(s),t.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,J.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,J.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,J.Z)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class jre{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,J.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new se(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,J.Z)(function*(o,a){const u=le(o),l={documents:a.map(y=>Cm(u.serializer,y))},f=yield u.vo("BatchGetDocuments",u.serializer.databaseId,_t.emptyPath(),l,a.length),g=new Map;f.forEach(y=>{const E=function une(n,e){return"found"in e?function(r,i){Pe(!!i.found);const s=wo(r,i.found.name),o=Fn(i.found.updateTime),a=i.found.createTime?Fn(i.found.createTime):Me.min(),u=new Or({mapValue:{fields:i.found.fields}});return cn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Pe(!!i.missing),Pe(!!i.readTime);const s=wo(r,i.missing),o=Fn(i.readTime);return cn.newNoDocument(s,o)}(n,e):Ce()}(u.serializer,y);g.set(E.key.toString(),E)});const m=[];return a.forEach(y=>{const E=g.get(y.toString());Pe(!!E),m.push(E)}),m}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,J.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=fe.fromPath(i);e.mutations.push(new YD(s,e.precondition(s)))}),yield(r=(0,J.Z)(function*(s,o){const a=le(s),u={writes:o.map(l=>Tm(a.serializer,l))};yield a.So("Commit",a.serializer.databaseId,_t.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce();t=Me.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new se(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Me.min())?mn.exists(!1):mn.updateTime(t):mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Me.min()))throw new se(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mn.updateTime(t)}return mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $re{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new RA(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,J.Z)(function*(){const t=new jre(e.datastore),r=e.Ja(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const t=this.updateFunction(e);return!om(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uU(t)}return!1}}class Hre{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_r.UNAUTHENTICATED,this.clientId=i3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,J.Z)(function*(a){oe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Lh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OI(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,J.Z)(function*(s){r.isEqual(s)||(yield uB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SS.apply(this,arguments)}function PS(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield MS(n);oe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>bB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>bB(e.remoteStore,i)),n._onlineComponents=e}),RS.apply(this,arguments)}function UB(n){return"FirebaseError"===n.name?n.code===B.FAILED_PRECONDITION||n.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function MS(n){return xS.apply(this,arguments)}function xS(){return xS=(0,J.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield OI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!UB(t))throw t;Ri("Error using user provided cache. Falling back to memory cache: "+t),yield OI(n,new km)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),yield OI(n,new km);return n._offlineComponents}),xS.apply(this,arguments)}function kI(n){return NS.apply(this,arguments)}function NS(){return NS=(0,J.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield PS(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),yield PS(n,new $h))),n._onlineComponents}),NS.apply(this,arguments)}function BB(n){return MS(n).then(e=>e.persistence)}function Hh(n){return MS(n).then(e=>e.localStore)}function jB(n){return kI(n).then(e=>e.remoteStore)}function OS(n){return kI(n).then(e=>e.syncEngine)}function zh(n){return kS.apply(this,arguments)}function kS(){return kS=(0,J.Z)(function*(n){const e=yield kI(n),t=e.eventManager;return t.onListen=Ire.bind(null,e.syncEngine),t.onUnlisten=wre.bind(null,e.syncEngine),t}),kS.apply(this,arguments)}function HB(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(s,o,a,u,l){const f=new NI({next:m=>{o.enqueueAndForget(()=>JA(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new se(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new se(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new tS(Eh(a.path),f,{includeMetadataChanges:!0,Z_:!0});return QA(s,g)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}function zB(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(s,o,a,u,l){const f=new NI({next:m=>{o.enqueueAndForget(()=>JA(s,g)),m.fromCache&&"server"===u.source?l.reject(new se(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new tS(a,f,{includeMetadataChanges:!0,Z_:!0});return QA(s,g)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}function qB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GB=new Map;function FS(n,e,t){if(!t)throw new se(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WB(n,e,t,r){if(!0===e&&!0===r)throw new se(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KB(n){if(!fe.isDocumentKey(n))throw new se(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZB(n){if(fe.isDocumentKey(n))throw new se(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ce()}function pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=FI(n);throw new se(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QB(n,e){if(e<=0)throw new se(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YB{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new se(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new se(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=qB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new se(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YB(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Yee;switch(r.type){case"firstParty":return new tte(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=GB.get(t);r&&(oe("ComponentProvider","Removing Datastore"),GB.delete(t),r.terminate())}(this),Promise.resolve()}}class kr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Co extends kr{constructor(e,t,r){super(e,t,Eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new fe(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function XB(n,e,...t){if(n=(0,Pt.m9)(n),FS("collection","path",e),n instanceof Fm){const r=_t.fromString(e,...t);return ZB(r),new Co(n,null,r)}{if(!(n instanceof ln||n instanceof Co))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_t.fromString(e,...t));return ZB(r),new Co(n.firestore,null,r)}}function VI(n,e,...t){if(n=(0,Pt.m9)(n),1===arguments.length&&(e=i3.newId()),FS("doc","path",e),n instanceof Fm){const r=_t.fromString(e,...t);return KB(r),new ln(n,null,new fe(r))}{if(!(n instanceof ln||n instanceof Co))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_t.fromString(e,...t));return KB(r),new ln(n.firestore,n instanceof Co?n.converter:null,new fe(r))}}function ej(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),(n instanceof ln||n instanceof Co)&&(e instanceof ln||e instanceof Co)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VS(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),n instanceof kr&&e instanceof kr&&n.firestore===e.firestore&&pm(n._query,e._query)&&n.converter===e.converter}class tie{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new RA(this,"async_queue_retry"),this._u=()=>{const t=RI();t&&oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=RI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=RI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new or;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,J.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!hu(t))throw t;oe("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,kn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=ZA.createAndSchedule(this,e,t,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&Ce()}verifyOperationInProgress(){}hu(){var e=this;return(0,J.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function LS(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class nie{constructor(){this._progressObserver={},this._taskCompletionResolver=new or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jt extends Fm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tie,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tj(this),this._firestoreClient.terminate()}}function Sn(n){return n._firestoreClient||tj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tj(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Mte(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qB(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new Hre(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nj(n,e,t){const r=new or;return n.asyncQueue.enqueue((0,J.Z)(function*(){try{yield OI(n,t),yield PS(n,e),r.resolve()}catch(i){const s=i;if(!UB(s))throw s;Ri("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function rj(n){if(n._initialized||n._terminated)throw new se(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(ar.fromBase64String(e))}catch(t){throw new se(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class la{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new se(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._methodName=e}}class LI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}const fie=/^__.*__$/;class pie{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new bh(e,this.data,t,this.fieldTransforms)}}class ij{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class UI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new UI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return $I(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(sj(this.du)&&fie.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class gie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xm(e)}Su(e,t,r,i=!1){return new UI({du:e,methodName:t,wu:r,path:un.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function el(n){const e=n._freezeSettings(),t=xm(n._databaseId);return new gie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BI(n,e,t,r,i,s={}){const o=n.Su(s.merge||s.mergeFields?2:0,e,t,i);qS("Data must be an object, but it was:",o,r);const a=uj(r,o);let u,l;if(s.merge)u=new Mi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const m=Um(e,g,t);if(!o.contains(m))throw new se(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lj(f,m)||f.push(m)}u=new Mi(f),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new pie(new Or(a),u,l)}class Lm extends Xc{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lm}}function oj(n,e,t){return new UI({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class US extends Xc{_toFieldTransform(e){return new ym(e.path,new Ch)}isEqual(e){return e instanceof US}}class BS extends Xc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=oj(this,e,!0),r=this.bu.map(s=>tl(s,t)),i=new zc(r);return new ym(e.path,i)}isEqual(e){return e instanceof BS&&(0,Pt.vZ)(this.bu,e.bu)}}class jS extends Xc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=oj(this,e,!0),r=this.bu.map(s=>tl(s,t)),i=new qc(r);return new ym(e.path,i)}isEqual(e){return e instanceof jS&&(0,Pt.vZ)(this.bu,e.bu)}}class $S extends Xc{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Th(e.serializer,Y3(e.serializer,this.Du));return new ym(e.path,t)}isEqual(e){return e instanceof $S&&this.Du===e.Du}}function HS(n,e,t,r){const i=n.Su(1,e,t);qS("Data must be an object, but it was:",i,r);const s=[],o=Or.empty();fu(r,(u,l)=>{const f=jI(e,u,t);l=(0,Pt.m9)(l);const g=i.fu(f);if(l instanceof Lm)s.push(f);else{const m=tl(l,g);null!=m&&(s.push(f),o.set(f,m))}});const a=new Mi(s);return new ij(o,a,i.fieldTransforms)}function zS(n,e,t,r,i,s){const o=n.Su(1,e,t),a=[Um(e,r,t)],u=[i];if(s.length%2!=0)throw new se(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Um(e,s[m])),u.push(s[m+1]);const l=[],f=Or.empty();for(let m=a.length-1;m>=0;--m)if(!lj(l,a[m])){const y=a[m];let E=u[m];E=(0,Pt.m9)(E);const w=o.fu(y);if(E instanceof Lm)l.push(y);else{const C=tl(E,w);null!=C&&(l.push(y),f.set(y,C))}}const g=new Mi(l);return new ij(f,g,o.fieldTransforms)}function aj(n,e,t,r=!1){return tl(t,n.Su(r?4:3,e))}function tl(n,e){if(cj(n=(0,Pt.m9)(n)))return qS("Unsupported field value:",e,n),uj(n,e);if(n instanceof Xc)return function(r,i){if(!sj(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=tl(a,i.gu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Pt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Y3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=gn.fromDate(r);return{timestampValue:Ah(i.serializer,s)}}if(r instanceof gn){const s=new gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(i.serializer,s)}}if(r instanceof LI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:yU(i.serializer,r._byteString)};if(r instanceof ln){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rA(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${FI(r)}`)}(n,e)}function uj(n,e){const t={};return v3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fu(n,(r,i)=>{const s=tl(i,e.Ru(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function cj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof LI||n instanceof To||n instanceof ln||n instanceof Xc)}function qS(n,e,t){if(!cj(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=FI(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function Um(n,e,t){if((e=(0,Pt.m9)(e))instanceof la)return e._internalPath;if("string"==typeof e)return jI(n,e);throw $I("Field path arguments must be of type string or ",n,!1,void 0,t)}const mie=new RegExp("[~\\*/\\[\\]]");function jI(n,e,t){if(e.search(mie)>=0)throw $I(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw $I(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $I(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new se(B.INVALID_ARGUMENT,a+n+u)}function lj(n,e){return n.some(t=>t.isEqual(e))}class Bm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _ie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _ie extends Bm{data(){return super.data()}}function HI(n,e){return"string"==typeof e?jI(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}function dj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new se(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GS{}class jm extends GS{}function Du(n,e,...t){let r=[];e instanceof GS&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof qh).length,a=s.filter(u=>u instanceof $m).length;if(o>1||o>0&&a>0)throw new se(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class $m extends jm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new $m(e,t,r)}_apply(e){const t=this._parse(e);return gj(e._query,t),new kr(e.firestore,e.converter,ZD(e._query,t))}_parse(e){const t=el(e.firestore);return function(s,o,a,u,l,f,g){let m;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new se(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){pj(g,f);const y=[];for(const E of g)y.push(fj(u,s,E));m={arrayValue:{values:y}}}else m=fj(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||pj(g,f),m=aj(a,"where",g,"in"===f||"not-in"===f);return yt.create(l,f,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qh extends GS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Lt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)gj(o,u),o=ZD(o,u)}(e._query,t),new kr(e.firestore,e.converter,ZD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class WS extends jm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new WS(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hm(s,o)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new sa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class zI extends jm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new zI(e,t,r)}_apply(e){return new kr(e.firestore,e.converter,lI(e._query,this._limit,this._limitType))}}class qI extends jm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qI(e,t,r)}_apply(e){const t=hj(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,(s=t,new sa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class GI extends jm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GI(e,t,r)}_apply(e){const t=hj(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,(s=t,new sa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function hj(n,e,t,r){if(t[0]=(0,Pt.m9)(t[0]),t[0]instanceof Bm)return function(s,o,a,u,l){if(!u)throw new se(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Ih(s))if(g.field.isKeyField())f.push($c(o,u.key));else{const m=u.data.field(g.field);if(rI(m))throw new se(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new se(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(m)}return new vu(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=el(n.firestore);return function(o,a,u,l,f,g){const m=o.explicitOrderBy;if(f.length>m.length)throw new se(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const w=f[E];if(m[E].field.isKeyField()){if("string"!=typeof w)throw new se(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!KD(o)&&-1!==w.indexOf("/"))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);const C=o.path.child(_t.fromString(w));if(!fe.isDocumentKey(C))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const R=new fe(C);y.push($c(a,R))}else{const C=aj(u,l,w);y.push(C)}}return new vu(y,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fj(n,e,t){if("string"==typeof(t=(0,Pt.m9)(t))){if(""===t)throw new se(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KD(e)&&-1!==t.indexOf("/"))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_t.fromString(t));if(!fe.isDocumentKey(r))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $c(n,new fe(r))}if(t instanceof ln)return $c(n,t._key);throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${FI(t)}.`)}function pj(n,e){if(!Array.isArray(n)||0===n.length)throw new se(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gj(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new se(B.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KS{convertValue(e,t="none"){switch(_u(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new LI(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(um(e));default:return null}}convertTimestamp(e){const t=pu(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_t.fromString(e);Pe(PU(r));const i=new gu(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function WI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Die extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends Bm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Hm extends da{data(e={}){return super.data(e)}}class Au{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hm(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Hm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Hm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Sie(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Sie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function _j(n,e){return n instanceof da&&e instanceof da?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Au&&e instanceof Au&&n._firestore===e._firestore&&VS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Su extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function yj(n,e,t){n=pt(n,ln);const r=pt(n.firestore,Jt),i=WI(n.converter,e,t);return Gh(r,[BI(el(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,mn.none())])}function vj(n,e,t,...r){n=pt(n,ln);const i=pt(n.firestore,Jt),s=el(i);let o;return o="string"==typeof(e=(0,Pt.m9)(e))||e instanceof la?zS(s,"updateDoc",n._key,e,t,r):HS(s,"updateDoc",n._key,e),Gh(i,[o.toMutation(n._key,mn.exists(!0))])}function Ej(n,...e){var t,r,i;n=(0,Pt.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||LS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(LS(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,f;if(n instanceof ln)l=pt(n.firestore,Jt),f=Eh(n._key.path),u={next:g=>{e[o]&&e[o](ZS(l,n,g))},error:e[o+1],complete:e[o+2]};else{const g=pt(n,kr);l=pt(g.firestore,Jt),f=g._query;const m=new Su(l);u={next:y=>{e[o]&&e[o](new Au(l,m,g,y))},error:e[o+1],complete:e[o+2]},dj(n._query)}return function(m,y,E,w){const C=new NI(w),R=new tS(y,C,E);return m.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return QA(yield zh(m),R)})),()=>{C.La(),m.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return JA(yield zh(m),R)}))}}(Sn(l),f,a,u)}function Gh(n,e){return function(r,i){const s=new or;return r.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function Cre(n,e,t){return oS.apply(this,arguments)}(yield OS(r),i,s)})),s.promise}(Sn(n),e)}function ZS(n,e,t){const r=t.docs.get(e._key),i=new Su(n);return new da(n,i,e._key,r,new nl(t.hasPendingWrites,t.fromCache),e.converter)}const Gie={maxAttempts:5};class Ij{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=el(e)}set(e,t,r){this._verifyNotCommitted();const i=Pu(e,this._firestore),s=WI(i.converter,t,r),o=BI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,mn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Pu(e,this._firestore);let o;return o="string"==typeof(t=(0,Pt.m9)(t))||t instanceof la?zS(this._dataReader,"WriteBatch.update",s._key,t,r,i):HS(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pu(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pu(n,e){if((n=(0,Pt.m9)(n)).firestore!==e)throw new se(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Wie extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=el(t)}get(t){const r=Pu(t,this._firestore),i=new Die(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ce();const o=s[0];if(o.isFoundDocument())return new Bm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Bm(this._firestore,i,r._key,null,r.converter);throw Ce()})}set(t,r,i){const s=Pu(t,this._firestore),o=WI(s.converter,r,i),a=BI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Pu(t,this._firestore);let a;return a="string"==typeof(r=(0,Pt.m9)(r))||r instanceof la?zS(this._dataReader,"Transaction.update",o._key,r,i,s):HS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Pu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pu(e,this._firestore),r=new Su(this._firestore);return super.get(e).then(i=>new da(this._firestore,r,t._key,i._document,new nl(!1,!1),t.converter))}}function YS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bj(){if(typeof Uint8Array>"u")throw new se("unimplemented","Uint8Arrays are not available in this environment.")}function Dj(){if(!function Pte(){return typeof atob<"u"}())throw new se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){hh=nh.SDK_VERSION,(0,nh._registerComponent)(new VL.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Jt(new Xee(r.getProvider("auth-internal")),new nte(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new se(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,nh.registerVersion)(t3,"4.4.2",e),(0,nh.registerVersion)(t3,"4.4.2","esm2017")}();class zm{constructor(e){this._delegate=e}static fromBase64String(e){return Dj(),new zm(To.fromBase64String(e))}static fromUint8Array(e){return bj(),new zm(To.fromUint8Array(e))}toBase64(){return Dj(),this._delegate.toBase64()}toUint8Array(){return bj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JS(n){return function rse(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ise{enableIndexedDbPersistence(e,t){return function iie(n,e){rj(n=pt(n,Jt));const t=Sn(n);if(t._uninitializedComponentsProvider)throw new se(B.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new $h;return nj(t,i,new AS(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sie(n){rj(n=pt(n,Jt));const e=Sn(n);if(e._uninitializedComponentsProvider)throw new se(B.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new $h;return nj(e,r,new VB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oie(n){if(n._initialized&&!n._terminated)throw new se(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{yield(t=(0,J.Z)(function*(i){if(!vs.D())return Promise.resolve();const s=i+"main";yield vs.delete(s)}),function r(i){return t.apply(this,arguments)})(vA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Aj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ri("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function JB(n,e,t,r={}){var i;const s=(n=pt(n,Fm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=_r.MOCK_USER;else{a=(0,Pt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new se(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _r(l)}n._authCredentials=new Jee(new n3(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function uie(n){return function zre(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield BB(n),t=yield jB(n);return e.setNetworkEnabled(!0),function(i){const s=le(i);return s.v_.delete(0),Nm(s)}(t)}))}(Sn(n=pt(n,Jt)))}(this._delegate)}disableNetwork(){return function cie(n){return function qre(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield BB(n),t=yield jB(n);return e.setNetworkEnabled(!1),(r=(0,J.Z)(function*(s){const o=le(s);o.v_.add(0),yield kh(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Sn(n=pt(n,Jt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aie(n){return function(t){const r=new or;return t.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function Are(n,e){return dS.apply(this,arguments)}(yield OS(t),r)})),r.promise}(Sn(n=pt(n,Jt)))}(this._delegate)}onSnapshotsInSync(e){return function Vie(n,e){return function Kre(n,e){const t=new NI(e);return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return i=yield zh(n),s=t,le(i).K_.add(s),void s.next();var i,s})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return i=yield zh(n),s=t,void le(i).K_.delete(s);var i,s}))}}(Sn(n=pt(n,Jt)),LS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wh(this,XB(this._delegate,e))}catch(t){throw gi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Es(this,VI(this._delegate,e))}catch(t){throw gi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mi(this,function eie(n,e){if(n=pt(n,Fm),FS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new se(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kr(n,null,(r=e,new sa(_t.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw gi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Kie(n,e,t){n=pt(n,Jt);const r=Object.assign(Object.assign({},Gie),t);return function(s){if(s.maxAttempts<1)throw new se(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new or;return s.asyncQueue.enqueueAndForget((0,J.Z)(function*(){const l=yield function $B(n){return kI(n).then(e=>e.datastore)}(s);new $re(s.asyncQueue,l,a,o,u).ja()})),u.promise}(Sn(n),i=>e(new Wie(n,i)),r)}(this._delegate,t=>e(new Sj(this,t)))}batch(){return Sn(this._delegate),new Pj(new Ij(this._delegate,e=>Gh(this._delegate,e)))}loadBundle(e){return function lie(n,e){const t=Sn(n=pt(n,Jt)),r=new nie;return function Zre(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?lU().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return LB(f,g);if(f instanceof ArrayBuffer)return LB(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Bre(f,a);var f}(t,xm(e));n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){!function Lre(n,e,t){const r=le(n);var i;(i=(0,J.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(E,w){const C=le(E),R=Fn(w.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",P=>C.$r.getBundleMetadata(P,w.id)).then(P=>!!P&&P.createTime.compareTo(R)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=l).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(SB(l));const f=new _re(l,o.localStore,a.serializer);let g=yield a.Oa();for(;g;){const y=yield f.na(g);y&&u._updateProgress(y),g=yield a.Oa()}const m=yield f.complete();return yield ca(o,m.sa,void 0),yield function(E,w){const C=le(E);return C.persistence.runTransaction("Save bundle","readwrite",R=>C.$r.saveBundleMetadata(R,w))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.ia)}catch(l){return Ri("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield OS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function die(n,e){return function Qre(n,e){return n.asyncQueue.enqueue((0,J.Z)(function*(){return function(r,i){const s=le(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Hh(n),e)}))}(Sn(n=pt(n,Jt)),e).then(t=>t?new kr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new mi(this,t):null)}}class ZI extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zm(new To(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Es.forKey(t,this.firestore,null)}}class Sj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}get(e){const t=il(e);return this._delegate.get(t).then(r=>new qm(this._firestore,new da(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=il(e);return r?(YS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=il(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=il(e);return this._delegate.delete(t),this}}class Pj{constructor(e){this._delegate=e}set(e,t,r){const i=il(e);return r?(YS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=il(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=il(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Hm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=rl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new rl(e,new ZI(e),t),i.set(t,s)),s}}rl.INSTANCES=new WeakMap;class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Es(t,new ln(t._delegate,r,new fe(e)))}static forKey(e,t,r){return new Es(t,new ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wh(this.firestore,XB(this._delegate,e))}catch(t){throw gi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pt.m9)(e))instanceof ln&&ej(this._delegate,e)}set(e,t){t=YS("DocumentReference.set",t);try{return t?yj(this._delegate,e,t):yj(this._delegate,e)}catch(r){throw gi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vj(this._delegate,e):vj(this._delegate,e,t,...r)}catch(i){throw gi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kie(n){return Gh(pt(n.firestore,Jt),[new Dh(n._key,mn.none())])}(this._delegate)}onSnapshot(...e){const t=Rj(e),r=Mj(e,i=>new qm(this.firestore,new da(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ej(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Rie(n){n=pt(n,ln);const e=pt(n.firestore,Jt),t=Sn(e),r=new Su(e);return function Gre(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(s,o,a){try{const u=yield function(f,g){const m=le(f);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new se(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Lh(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Hh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new da(e,r,n._key,i,new nl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Mie(n){n=pt(n,ln);const e=pt(n.firestore,Jt);return HB(Sn(e),n._key,{source:"server"}).then(t=>ZS(e,n,t))}(this._delegate):function Pie(n){n=pt(n,ln);const e=pt(n.firestore,Jt);return HB(Sn(e),n._key).then(t=>ZS(e,n,t))}(this._delegate),t.then(r=>new qm(this.firestore,new da(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?rl.getInstance(this.firestore,e):null))}}function gi(n,e,t){return n.message=n.message.replace(e,t),n}function Rj(n){for(const e of n)if("object"==typeof e&&!JS(e))return e;return{}}function Mj(n,e){var t,r;let i;return i=JS(n[0])?n[0]:JS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Es(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _j(this._delegate,e._delegate)}}class Gm extends qm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Qee(n,e){n||Ce()}(void 0!==t),t}}class mi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}where(e,t,r){try{return new mi(this.firestore,Du(this._delegate,function yie(n,e,t){const r=e,i=HI("where",n);return $m._create(i,r,t)}(e,t,r)))}catch(i){throw gi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mi(this.firestore,Du(this._delegate,function vie(n,e="asc"){const t=e,r=HI("orderBy",n);return WS._create(r,t)}(e,t)))}catch(r){throw gi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mi(this.firestore,Du(this._delegate,function Eie(n){return QB("limit",n),zI._create("limit",n,"F")}(e)))}catch(t){throw gi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new mi(this.firestore,Du(this._delegate,function Iie(n){return QB("limitToLast",n),zI._create("limitToLast",n,"L")}(e)))}catch(t){throw gi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new mi(this.firestore,Du(this._delegate,function wie(...n){return qI._create("startAt",n,!0)}(...e)))}catch(t){throw gi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new mi(this.firestore,Du(this._delegate,function Cie(...n){return qI._create("startAfter",n,!1)}(...e)))}catch(t){throw gi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new mi(this.firestore,Du(this._delegate,function Tie(...n){return GI._create("endBefore",n,!1)}(...e)))}catch(t){throw gi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new mi(this.firestore,Du(this._delegate,function bie(...n){return GI._create("endAt",n,!0)}(...e)))}catch(t){throw gi(t,"endAt()","Query.endAt()")}}isEqual(e){return VS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Nie(n){n=pt(n,kr);const e=pt(n.firestore,Jt),t=Sn(e),r=new Su(e);return function Wre(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(s,o,a){try{const u=yield DI(s,o,!0),l=new MB(o,u.hs),f=l.ha(u.documents),g=l.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const l=Lh(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Hh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Au(e,r,n,i))}(this._delegate):"server"===e?.source?function Oie(n){n=pt(n,kr);const e=pt(n.firestore,Jt),t=Sn(e),r=new Su(e);return zB(t,n._query,{source:"server"}).then(i=>new Au(e,r,n,i))}(this._delegate):function xie(n){n=pt(n,kr);const e=pt(n.firestore,Jt),t=Sn(e),r=new Su(e);return dj(n._query),zB(t,n._query).then(i=>new Au(e,r,n,i))}(this._delegate),t.then(r=>new XS(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Rj(e),r=Mj(e,i=>new XS(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ej(this._delegate,t,r)}withConverter(e){return new mi(this.firestore,this._delegate.withConverter(e?rl.getInstance(this.firestore,e):null))}}class ose{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ose(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Gm(this._firestore,r))})}isEqual(e){return _j(this._delegate,e._delegate)}}class Wh extends mi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Es(this.firestore,e):null}doc(e){try{return new Es(this.firestore,void 0===e?VI(this._delegate):VI(this._delegate,e))}catch(t){throw gi(t,"doc()","CollectionReference.doc()")}}add(e){return function Fie(n,e){const t=pt(n.firestore,Jt),r=VI(n),i=WI(n.converter,e);return Gh(t,[BI(el(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Es(this.firestore,t))}isEqual(e){return ej(this._delegate,e._delegate)}withConverter(e){return new Wh(this.firestore,this._delegate.withConverter(e?rl.getInstance(this.firestore,e):null))}}function il(n){return pt(n,ln)}class eP{constructor(...e){this._delegate=new la(...e)}static documentId(){return new eP(un.keyField().canonicalString())}isEqual(e){return(e=(0,Pt.m9)(e))instanceof la&&this._delegate._internalPath.isEqual(e._internalPath)}}class sl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Qie(){return new US("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sl(e)}static delete(){const e=function Zie(){return new Lm("deleteField")}();return e._methodName="FieldValue.delete",new sl(e)}static arrayUnion(...e){const t=function Yie(...n){return new BS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sl(t)}static arrayRemove(...e){const t=function Jie(...n){return new jS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sl(t)}static increment(e){const t=function Xie(n){return new $S("increment",n)}(e);return t._methodName="FieldValue.increment",new sl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ase={Firestore:Aj,GeoPoint:LI,Timestamp:gn,Blob:zm,Transaction:Sj,WriteBatch:Pj,DocumentReference:Es,DocumentSnapshot:qm,Query:mi,QueryDocumentSnapshot:Gm,QuerySnapshot:XS,CollectionReference:Wh,FieldPath:eP,FieldValue:sl,setLogLevel:function sse(n){!function Zee(n){lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xj(n,e){return function lse(n,e=hE){return new nt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function tP(n,e){return xj(n,e).pipe(ve(t=>({payload:t,type:"query"})))}!function cse(n){(function use(n,e){n.INTERNAL.registerComponent(new VL.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ase)))})(n,(e,t)=>new Aj(e,t,new ise)),n.registerVersion("@firebase/firestore-compat","0.3.25")}(kg.Z);class Nj{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Uj(r,t);return new Fj(i,s,this.afs)}snapshotChanges(){return function dse(n,e){return xj(n,e).pipe(Pv(void 0),Wb(),ve(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zi)}valueChanges(e={}){return this.snapshotChanges().pipe(ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return A(this.ref.get(e)).pipe(Zi)}}function QI(n,e){return tP(n,e).pipe(Pv(void 0),Wb(),ve(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function Oj(n,e,t){return QI(n,t).pipe(Mv((r,i)=>function hse(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function fse(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),nn(),ve(r=>r.map(i=>({type:i.type,payload:i}))))}function nP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function kj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Fj{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Pv(void 0),Wb(),fr(([r,i])=>i.length>0||!r),ve(([,r])=>r),Zi)}auditTrail(e){return this.stateChanges(e).pipe(Mv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kj(e);return Oj(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zi)}valueChanges(e={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Zi)}get(e){return A(this.query.get(e)).pipe(Zi)}add(e){return this.ref.add(e)}doc(e){return new Nj(this.ref.doc(e),this.afs)}}class pse{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QI(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.filter(r=>e.indexOf(r.type)>-1)),fr(t=>t.length>0),Zi):QI(this.query,this.afs.schedulers.outsideAngular).pipe(Zi)}auditTrail(e){return this.stateChanges(e).pipe(Mv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kj(e);return Oj(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zi)}valueChanges(e={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe(ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Zi)}get(e){return A(this.query.get(e)).pipe(Zi)}}const Vj=new ue("angularfire2.enableFirestorePersistence"),Lj=new ue("angularfire2.firestore.persistenceSettings"),gse=new ue("angularfire2.firestore.settings"),mse=new ue("angularfire2.firestore.use-emulator");function Uj(n,e=(t=>t)){return{query:e(n),ref:n}}let _se=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,f,g,m,y,E,w,C,R,P){this.schedulers=u;const O=Gb(t,a,r),W=f;g&&kL(O,a,m,E,w,C,y,R),[this.firestore,this.persistenceEnabled$]=bL(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{const ce=a.runOutsideAngular(()=>O.firestore());if(s&&ce.settings(s),W&&ce.useEmulator(...W),i&&!Cv(o)){const Re=()=>{try{return A(ce.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch($e){return typeof console<"u"&&console.warn($e),q(!1)}};return[ce,a.runOutsideAngular(Re)]}return[ce,q(!1)]},[s,W,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Uj(i,r),a=this.schedulers.ngZone.run(()=>s);return new Fj(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new pse(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Nj(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ee(zb),ee(qb,8),ee(Vj,8),ee(gse,8),ee(Ss),ee(vt),ee(CL),ee(Lj,8),ee(mse,8),ee(FL,8),ee(PL,8),ee(RL,8),ee(ML,8),ee(xL,8),ee(NL,8),ee(OL,8),ee(IL,8))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),yse=(()=>{class n{constructor(){kg.Z.registerVersion("angularfire",DX.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Vj,useValue:!0},{provide:Lj,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lr({type:n});static \u0275inj=Rn({providers:[_se]})}return n})(),vse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=lr({type:n,bootstrap:[iY]});static#n=this.\u0275inj=Rn({imports:[yse.enablePersistence(),$1,KQ,tQ,nQ,rZ,EX,HQ.forRoot(),bY.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]})}return n})();Y8().bootstrapModule(vse).catch(n=>console.error(n))},106:(ws,Zn,We)=>{We.d(Zn,{Z:()=>Yn});var I=We(58),Fe=We(537),z=We(534),Le=We(879);class It{constructor(je,Ye){this._delegate=je,this.firebase=Ye,(0,z._addComponent)(je,new Fe.wA("app-compat",()=>this,"PUBLIC")),this.container=je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this._delegate.automaticDataCollectionEnabled=je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(je=>{this._delegate.checkDestroyed(),je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(je,Ye=z._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const Xn=this._delegate.container.getProvider(je);return!Xn.isInitialized()&&"EXPLICIT"===(null===(Jn=Xn.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:Ye})}_removeServiceInstance(je,Ye=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(je).clearInstance(Ye)}_addComponent(je){(0,z._addComponent)(this._delegate,je)}_addOrOverwriteComponent(je){(0,z._addOrOverwriteComponent)(this._delegate,je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function at(){const Tt=function Qn(Tt){const je={},Ye={__esModule:!0,initializeApp:function zt(Je,Vn={}){const X=z.initializeApp(Je,Vn);if((0,I.r3)(je,X.name))return je[X.name];const en=new Tt(X,Ye);return je[X.name]=en,en},app:Xn,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Ut(Je){const Vn=Je.name,X=Vn.replace("-compat","");if(z._registerComponent(Je)&&"PUBLIC"===Je.type){const en=(qt=Xn())=>{if("function"!=typeof qt[X])throw dn.create("invalid-app-argument",{appName:Vn});return qt[X]()};void 0!==Je.serviceProps&&(0,I.ZB)(en,Je.serviceProps),Ye[X]=en,Tt.prototype[X]=function(...qt){return this._getService.bind(this,Vn).apply(this,Je.multipleInstances?qt:[])}}return"PUBLIC"===Je.type?Ye[X]:null},removeApp:function Jn(Je){delete je[Je]},useAsService:function Fr(Je,Vn){return"serverAuth"===Vn?null:Vn},modularAPIs:z}};function Xn(Je){if(!(0,I.r3)(je,Je=Je||z._DEFAULT_ENTRY_NAME))throw dn.create("no-app",{appName:Je});return je[Je]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function bt(){return Object.keys(je).map(Je=>je[Je])}}),Xn.App=Tt,Ye}(It);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function je(Ye){(0,I.ZB)(Tt,Ye)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),Tt}(),ae=new Le.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yn=te;!function wt(Tt){(0,z.registerVersion)("@firebase/app-compat","0.2.27",Tt)}()},534:(ws,Zn,We)=>{We.r(Zn),We.d(Zn,{FirebaseError:()=>Le.ZR,SDK_VERSION:()=>Us,_DEFAULT_ENTRY_NAME:()=>Oi,_addComponent:()=>Ls,_addOrOverwriteComponent:()=>cr,_apps:()=>Lr,_clearComponents:()=>Un,_components:()=>Ts,_getProvider:()=>Bt,_registerComponent:()=>Ao,_removeServiceInstance:()=>ki,deleteApp:()=>wr,getApp:()=>Bs,getApps:()=>ga,initializeApp:()=>pa,onLog:()=>ma,registerVersion:()=>js,setLogLevel:()=>ul});var I=We(861),Fe=We(537),z=We(879),Le=We(58);const It=(F,S)=>S.some(ie=>F instanceof ie);let Xt,dn;const te=new WeakMap,ae=new WeakMap,Te=new WeakMap,st=new WeakMap,wt=new WeakMap;let je={get(F,S,ie){if(F instanceof IDBTransaction){if("done"===S)return ae.get(F);if("objectStoreNames"===S)return F.objectStoreNames||Te.get(F);if("store"===S)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return zt(F[S])},set:(F,S,ie)=>(F[S]=ie,!0),has:(F,S)=>F instanceof IDBTransaction&&("done"===S||"store"===S)||S in F};function Xn(F){return"function"==typeof F?function Jn(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return dn||(dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...S){return F.apply(bt(this),S),zt(te.get(this))}:function(...S){return zt(F.apply(bt(this),S))}:function(S,...ie){const Ee=F.call(bt(this),S,...ie);return Te.set(Ee,S.sort?S.sort():[S]),zt(Ee)}}(F):(F instanceof IDBTransaction&&function Tt(F){if(ae.has(F))return;const S=new Promise((ie,Ee)=>{const qe=()=>{F.removeEventListener("complete",ut),F.removeEventListener("error",N),F.removeEventListener("abort",N)},ut=()=>{ie(),qe()},N=()=>{Ee(F.error||new DOMException("AbortError","AbortError")),qe()};F.addEventListener("complete",ut),F.addEventListener("error",N),F.addEventListener("abort",N)});ae.set(F,S)}(F),It(F,function Qn(){return Xt||(Xt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,je):F)}function zt(F){if(F instanceof IDBRequest)return function Yn(F){const S=new Promise((ie,Ee)=>{const qe=()=>{F.removeEventListener("success",ut),F.removeEventListener("error",N)},ut=()=>{ie(zt(F.result)),qe()},N=()=>{Ee(F.error),qe()};F.addEventListener("success",ut),F.addEventListener("error",N)});return S.then(ie=>{ie instanceof IDBCursor&&te.set(ie,F)}).catch(()=>{}),wt.set(S,F),S}(F);if(st.has(F))return st.get(F);const S=Xn(F);return S!==F&&(st.set(F,S),wt.set(S,F)),S}const bt=F=>wt.get(F),Je=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],X=new Map;function en(F,S){if(!(F instanceof IDBDatabase)||S in F||"string"!=typeof S)return;if(X.get(S))return X.get(S);const ie=S.replace(/FromIndex$/,""),Ee=S!==ie,qe=Vn.includes(ie);if(!(ie in(Ee?IDBIndex:IDBObjectStore).prototype)||!qe&&!Je.includes(ie))return;const ut=function(){var N=(0,I.Z)(function*(fn,...De){const ot=this.transaction(fn,qe?"readwrite":"readonly");let ya=ot.store;return Ee&&(ya=ya.index(De.shift())),(yield Promise.all([ya[ie](...De),qe&&ot.done]))[0]});return function(De){return N.apply(this,arguments)}}();return X.set(S,ut),ut}!function Ye(F){je=F(je)}(F=>({...F,get:(S,ie,Ee)=>en(S,ie)||F.get(S,ie,Ee),has:(S,ie)=>!!en(S,ie)||F.has(S,ie)}));class qt{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function Pn(F){const S=F.getComponent();return"VERSION"===S?.type}(ie)){const Ee=ie.getImmediate();return`${Ee.library}/${Ee.version}`}return null}).filter(ie=>ie).join(" ")}}const es="@firebase/app",nt=new z.Yd("@firebase/app"),Oi="[DEFAULT]",Nu={[es]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Lr=new Map,Ts=new Map;function Ls(F,S){try{F.container.addComponent(S)}catch(ie){nt.debug(`Component ${S.name} failed to register with FirebaseApp ${F.name}`,ie)}}function cr(F,S){F.container.addOrOverwriteComponent(S)}function Ao(F){const S=F.name;if(Ts.has(S))return nt.debug(`There were multiple attempts to register component ${S}.`),!1;Ts.set(S,F);for(const ie of Lr.values())Ls(ie,F);return!0}function Bt(F,S){const ie=F.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),F.container.getProvider(S)}function ki(F,S,ie=Oi){Bt(F,S).clearInstance(ie)}function Un(){Ts.clear()}const yi=new Le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ni{constructor(S,ie,Ee){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=Ee,this.container.addComponent(new Fe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}const Us="10.8.0";function pa(F,S={}){let ie=F;"object"!=typeof S&&(S={name:S});const Ee=Object.assign({name:Oi,automaticDataCollectionEnabled:!1},S),qe=Ee.name;if("string"!=typeof qe||!qe)throw yi.create("bad-app-name",{appName:String(qe)});if(ie||(ie=(0,Le.aH)()),!ie)throw yi.create("no-options");const ut=Lr.get(qe);if(ut){if((0,Le.vZ)(ie,ut.options)&&(0,Le.vZ)(Ee,ut.config))return ut;throw yi.create("duplicate-app",{appName:qe})}const N=new Fe.H0(qe);for(const De of Ts.values())N.addComponent(De);const fn=new ni(ie,Ee,N);return Lr.set(qe,fn),fn}function Bs(F=Oi){const S=Lr.get(F);if(!S&&F===Oi&&(0,Le.aH)())return pa();if(!S)throw yi.create("no-app",{appName:F});return S}function ga(){return Array.from(Lr.values())}function wr(F){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,I.Z)(function*(F){const S=F.name;Lr.has(S)&&(Lr.delete(S),yield Promise.all(F.container.getProviders().map(ie=>ie.delete())),F.isDeleted=!0)})).apply(this,arguments)}function js(F,S,ie){var Ee;let qe=null!==(Ee=Nu[F])&&void 0!==Ee?Ee:F;ie&&(qe+=`-${ie}`);const ut=qe.match(/\s|\//),N=S.match(/\s|\//);if(ut||N){const fn=[`Unable to register library "${qe}" with version "${S}":`];return ut&&fn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),ut&&N&&fn.push("and"),N&&fn.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void nt.warn(fn.join(" "))}Ao(new Fe.wA(`${qe}-version`,()=>({library:qe,version:S}),"VERSION"))}function ma(F,S){if(null!==F&&"function"!=typeof F)throw yi.create("invalid-log-argument");(0,z.Am)(F,S)}function ul(F){(0,z.Ub)(F)}const Ou="firebase-heartbeat-database",_a=1,D="firebase-heartbeat-store";let T=null;function A(){return T||(T=function Ut(F,S,{blocked:ie,upgrade:Ee,blocking:qe,terminated:ut}={}){const N=indexedDB.open(F,S),fn=zt(N);return Ee&&N.addEventListener("upgradeneeded",De=>{Ee(zt(N.result),De.oldVersion,De.newVersion,zt(N.transaction),De)}),ie&&N.addEventListener("blocked",De=>ie(De.oldVersion,De.newVersion,De)),fn.then(De=>{ut&&De.addEventListener("close",()=>ut()),qe&&De.addEventListener("versionchange",ot=>qe(ot.oldVersion,ot.newVersion,ot))}).catch(()=>{}),fn}(Ou,_a,{upgrade:(F,S)=>{if(0===S)try{F.createObjectStore(D)}catch(ie){console.warn(ie)}}}).catch(F=>{throw yi.create("idb-open",{originalErrorMessage:F.message})})),T}function M(){return(M=(0,I.Z)(function*(F){try{const ie=(yield A()).transaction(D),Ee=yield ie.objectStore(D).get(Xe(F));return yield ie.done,Ee}catch(S){if(S instanceof Le.ZR)nt.warn(S.message);else{const ie=yi.create("idb-get",{originalErrorMessage:S?.message});nt.warn(ie.message)}}})).apply(this,arguments)}function q(F,S){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,I.Z)(function*(F,S){try{const Ee=(yield A()).transaction(D,"readwrite");yield Ee.objectStore(D).put(S,Xe(F)),yield Ee.done}catch(ie){if(ie instanceof Le.ZR)nt.warn(ie.message);else{const Ee=yi.create("idb-set",{originalErrorMessage:ie?.message});nt.warn(Ee.message)}}})).apply(this,arguments)}function Xe(F){return`${F.name}!${F.options.appId}`}class Bn{constructor(S){this.container=S,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new Ot(ie),this._heartbeatsCachePromise=this._storage.read().then(Ee=>(this._heartbeatsCache=Ee,Ee))}triggerHeartbeat(){var S=this;return(0,I.Z)(function*(){var ie,Ee;const ut=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),N=be();if((null!=(null===(ie=S._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||(S._heartbeatsCache=yield S._heartbeatsCachePromise,null!=(null===(Ee=S._heartbeatsCache)||void 0===Ee?void 0:Ee.heartbeats)))&&S._heartbeatsCache.lastSentHeartbeatDate!==N&&!S._heartbeatsCache.heartbeats.some(fn=>fn.date===N))return S._heartbeatsCache.heartbeats.push({date:N,agent:ut}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter(fn=>{const De=new Date(fn.date).valueOf();return Date.now()-De<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,I.Z)(function*(){var ie;if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null==(null===(ie=S._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===S._heartbeatsCache.heartbeats.length)return"";const Ee=be(),{heartbeatsToSend:qe,unsentEntries:ut}=function er(F,S=1024){const ie=[];let Ee=F.slice();for(const qe of F){const ut=ie.find(N=>N.agent===qe.agent);if(ut){if(ut.dates.push(qe.date),rs(ie)>S){ut.dates.pop();break}}else if(ie.push({agent:qe.agent,dates:[qe.date]}),rs(ie)>S){ie.pop();break}Ee=Ee.slice(1)}return{heartbeatsToSend:ie,unsentEntries:Ee}}(S._heartbeatsCache.heartbeats),N=(0,Le.L)(JSON.stringify({version:2,heartbeats:qe}));return S._heartbeatsCache.lastSentHeartbeatDate=Ee,ut.length>0?(S._heartbeatsCache.heartbeats=ut,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),N})()}}function be(){return(new Date).toISOString().substring(0,10)}class Ot{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Le.hl)()&&(0,Le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,I.Z)(function*(){if(yield S._canUseIndexedDBPromise){const Ee=yield function K(F){return M.apply(this,arguments)}(S.app);return Ee?.heartbeats?Ee:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(S){var ie=this;return(0,I.Z)(function*(){var Ee;if(yield ie._canUseIndexedDBPromise){const ut=yield ie.read();return q(ie.app,{lastSentHeartbeatDate:null!==(Ee=S.lastSentHeartbeatDate)&&void 0!==Ee?Ee:ut.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var ie=this;return(0,I.Z)(function*(){var Ee;if(yield ie._canUseIndexedDBPromise){const ut=yield ie.read();return q(ie.app,{lastSentHeartbeatDate:null!==(Ee=S.lastSentHeartbeatDate)&&void 0!==Ee?Ee:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...S.heartbeats]})}})()}}function rs(F){return(0,Le.L)(JSON.stringify({version:2,heartbeats:F})).length}!function cl(F){Ao(new Fe.wA("platform-logger",S=>new qt(S),"PRIVATE")),Ao(new Fe.wA("heartbeat",S=>new Bn(S),"PRIVATE")),js(es,"0.9.27",F),js(es,"0.9.27","esm2017"),js("fire-js","")}("")},537:(ws,Zn,We)=>{We.d(Zn,{H0:()=>Qn,wA:()=>z});var I=We(861),Fe=We(58);class z{constructor(te,ae,Te){this.name=te,this.instanceFactory=ae,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const Le="[DEFAULT]";class It{constructor(te,ae){this.name=te,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const ae=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(ae)){const Te=new Fe.BH;if(this.instancesDeferred.set(ae,Te),this.isInitialized(ae)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:ae});st&&Te.resolve(st)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(te){var ae;const Te=this.normalizeInstanceIdentifier(te?.identifier),st=null!==(ae=te?.optional)&&void 0!==ae&&ae;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(wt){if(st)return null;throw wt}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function dn(at){return"EAGER"===at.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:Le})}catch{}for(const[ae,Te]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(ae);try{const wt=this.getOrInitializeService({instanceIdentifier:st});Te.resolve(wt)}catch{}}}}clearInstance(te=Le){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,I.Z)(function*(){const ae=Array.from(te.instances.values());yield Promise.all([...ae.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ae.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=Le){return this.instances.has(te)}getOptions(te=Le){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:ae={}}=te,Te=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Te,options:ae});for(const[wt,Yn]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(wt)&&Yn.resolve(st);return st}onInit(te,ae){var Te;const st=this.normalizeInstanceIdentifier(ae),wt=null!==(Te=this.onInitCallbacks.get(st))&&void 0!==Te?Te:new Set;wt.add(te),this.onInitCallbacks.set(st,wt);const Yn=this.instances.get(st);return Yn&&te(Yn,st),()=>{wt.delete(te)}}invokeOnInitCallbacks(te,ae){const Te=this.onInitCallbacks.get(ae);if(Te)for(const st of Te)try{st(te,ae)}catch{}}getOrInitializeService({instanceIdentifier:te,options:ae={}}){let Te=this.instances.get(te);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(at=te,at===Le?void 0:at),options:ae}),this.instances.set(te,Te),this.instancesOptions.set(te,ae),this.invokeOnInitCallbacks(Te,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,Te)}catch{}var at;return Te||null}normalizeInstanceIdentifier(te=Le){return this.component?this.component.multipleInstances?te:Le:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qn{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const ae=this.getProvider(te.name);if(ae.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);ae.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const ae=new It(te,this);return this.providers.set(te,ae),ae}getProviders(){return Array.from(this.providers.values())}}},879:(ws,Zn,We)=>{We.d(Zn,{Am:()=>at,Ub:()=>Qn,Yd:()=>dn,in:()=>Fe});const I=[];var Fe=function(te){return te[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",te}(Fe||{});const z={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},Le=Fe.INFO,It={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Xt=(te,ae,...Te)=>{if(ae<te.logLevel)return;const st=(new Date).toISOString(),wt=It[ae];if(!wt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[wt](`[${st}]  ${te.name}:`,...Te)};class dn{constructor(ae){this.name=ae,this._logLevel=Le,this._logHandler=Xt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in Fe))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?z[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...ae),this._logHandler(this,Fe.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...ae),this._logHandler(this,Fe.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...ae),this._logHandler(this,Fe.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...ae),this._logHandler(this,Fe.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...ae),this._logHandler(this,Fe.ERROR,...ae)}}function Qn(te){I.forEach(ae=>{ae.setLogLevel(te)})}function at(te,ae){for(const Te of I){let st=null;ae&&ae.level&&(st=z[ae.level]),Te.userLogHandler=null===te?null:(wt,Yn,...Tt)=>{const je=Tt.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch{return null}}).filter(Ye=>Ye).join(" ");Yn>=(st??wt.logLevel)&&te({level:Fe[Yn].toLowerCase(),message:je,args:Tt,type:wt.name})}}}},999:(ws,Zn,We)=>{We.r(Zn);var I=We(861),Fe=We(106),z=We(58),Le=We(534),It=We(879),Xt=We(582),dn=We(537);const at={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Yn=function st(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Tt=function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jn=new It.Yd("@firebase/auth");function zt(h,...c){Jn.logLevel<=It.in.ERROR&&Jn.error(`Auth (${Le.SDK_VERSION}): ${h}`,...c)}function bt(h,...c){throw Vn(h,...c)}function Ut(h,...c){return Vn(h,...c)}function Fr(h,c,d){const p=Object.assign(Object.assign({},Tt()),{[c]:d});return new z.LL("auth","Firebase",p).create(c,{appName:h.name})}function Je(h,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&bt(h,"argument-error"),Fr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vn(h,...c){if("string"!=typeof h){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(d,...p)}return je.create(h,...c)}function X(h,c,...d){if(!h)throw Vn(c,...d)}function en(h){const c="INTERNAL ASSERTION FAILED: "+h;throw zt(c),new Error(c)}function qt(h,c){h||en(c)}function Pn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function es(){return"http:"===ts()||"https:"===ts()}function ts(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class ns{constructor(c,d){this.shortDelay=c,this.longDelay=d,qt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function nt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(es()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function U(h,c){qt(h.emulator,"Emulator should always be set here");const{url:d}=h.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ${static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void en("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void en("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void en("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Z=new ns(3e4,6e4);function ne(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function H(h,c,d,p){return _e.apply(this,arguments)}function _e(){return(_e=(0,I.Z)(function*(h,c,d,p,_={}){return ft(h,_,(0,I.Z)(function*(){let v={},b={};p&&("GET"===c?b=p:v={body:JSON.stringify(p)});const x=(0,z.xO)(Object.assign({key:h.config.apiKey},b)).slice(1),Q=yield h._getAdditionalHeaders();return Q["Content-Type"]="application/json",h.languageCode&&(Q["X-Firebase-Locale"]=h.languageCode),$.fetch()(tn(h,h.config.apiHost,d,x),Object.assign({method:c,headers:Q,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function ft(h,c,d){return ve.apply(this,arguments)}function ve(){return(ve=(0,I.Z)(function*(h,c,d){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},j),c);try{const _=new ur(h),v=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const b=yield v.json();if("needConfirmation"in b)throw Ln(h,"account-exists-with-different-credential",b);if(v.ok&&!("errorMessage"in b))return b;{const x=v.ok?b.errorMessage:b.error.message,[Q,he]=x.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Q)throw Ln(h,"credential-already-in-use",b);if("EMAIL_EXISTS"===Q)throw Ln(h,"email-already-in-use",b);if("USER_DISABLED"===Q)throw Ln(h,"user-disabled",b);const Ie=p[Q]||Q.toLowerCase().replace(/[_\s]+/g,"-");if(he)throw Fr(h,Ie,he);bt(h,Ie)}}catch(_){if(_ instanceof z.ZR)throw _;bt(h,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function Ae(h,c,d,p){return gt.apply(this,arguments)}function gt(){return(gt=(0,I.Z)(function*(h,c,d,p,_={}){const v=yield H(h,c,d,p,_);return"mfaPendingCredential"in v&&bt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function tn(h,c,d,p){const _=`${c}${d}?${p}`;return h.config.emulator?U(h.config,_):`${h.config.apiScheme}://${_}`}function $t(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ur{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Ut(this.auth,"network-request-failed")),Z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(h,c,d){const p={appName:h.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Ut(h,c,p);return _.customData._tokenResponse=d,_}function Ir(h){return void 0!==h&&void 0!==h.getResponse}function Vr(h){return void 0!==h&&void 0!==h.enterprise}class ti{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return $t(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Cs(){return(Cs=(0,I.Z)(function*(h){return(yield H(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hn(h,c){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.Z)(function*(h,c){return H(h,"GET","/v2/recaptchaConfig",ne(h,c))})).apply(this,arguments)}function Oi(){return(Oi=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Lr(){return(Lr=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ls(){return(Ls=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function cr(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ki(){return(ki=(0,I.Z)(function*(h,c=!1){const d=(0,z.m9)(h),p=yield d.getIdToken(c),_=fa(p);X(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const v="object"==typeof _.firebase?_.firebase:void 0,b=v?.sign_in_provider;return{claims:_,token:p,authTime:cr(Un(_.auth_time)),issuedAtTime:cr(Un(_.iat)),expirationTime:cr(Un(_.exp)),signInProvider:b||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Un(h){return 1e3*Number(h)}function fa(h){const[c,d,p]=h.split(".");if(void 0===c||void 0===d||void 0===p)return zt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,z.tV)(d);return _?JSON.parse(_):(zt("Failed to decode base64 JWT payload"),null)}catch(_){return zt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function ni(h,c){return Us.apply(this,arguments)}function Us(){return(Us=(0,I.Z)(function*(h,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof z.ZR&&function pa({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Bs{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class ga{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wr(h){return Ur.apply(this,arguments)}function Ur(){return Ur=(0,I.Z)(function*(h){var c;const d=h.auth,p=yield h.getIdToken(),_=yield ni(h,function Ts(h,c){return Ls.apply(this,arguments)}(d,{idToken:p}));X(_?.users.length,d,"internal-error");const v=_.users[0];h._notifyReloadListener(v);const b=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function Ou(h){return h.map(c=>{var{providerId:d}=c,p=(0,Xt._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],x=function ul(h,c){return[...h.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(h.providerData,b),Ie=!!h.isAnonymous&&!(h.email&&v.passwordHash||x?.length),we={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:x,metadata:new ga(v.createdAt,v.lastLoginAt),isAnonymous:Ie};Object.assign(h,we)}),Ur.apply(this,arguments)}function ma(){return(ma=(0,I.Z)(function*(h){const c=(0,z.m9)(h);yield wr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,c){const d=yield ft(h,{},(0,I.Z)(function*(){const p=(0,z.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:v}=h.config,b=tn(h,_,"/v1/token",`key=${v}`),x=yield h._getAdditionalHeaders();return x["Content-Type"]="application/x-www-form-urlencoded",$.fetch()(b,{method:"POST",headers:x,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return H(h,"POST","/v2/accounts:revokeToken",ne(h,c))})).apply(this,arguments)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){X(c.idToken,"internal-error"),X(typeof c.idToken<"u","internal-error"),X(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function yi(h){const c=fa(h);return X(c,"internal-error"),X(typeof c.exp<"u","internal-error"),X(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,I.Z)(function*(){return X(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,I.Z)(function*(){const{accessToken:_,refreshToken:v,expiresIn:b}=yield function _a(h,c){return D.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,v,Number(b))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:v}=d,b=new K;return p&&(X("string"==typeof p,"internal-error",{appName:c}),b.refreshToken=p),_&&(X("string"==typeof _,"internal-error",{appName:c}),b.accessToken=_),v&&(X("number"==typeof v,"internal-error",{appName:c}),b.expirationTime=v),b}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return en("not implemented")}}function M(h,c){X("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class q{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,v=(0,Xt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new ga(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,I.Z)(function*(){const p=yield ni(d,d.stsTokenManager.getToken(d.auth,c));return X(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Bt(h){return ki.apply(this,arguments)}(this,c)}reload(){return function js(h){return ma.apply(this,arguments)}(this)}_assign(c){this!==c&&(X(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,I.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield wr(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const d=yield c.getIdToken();return yield ni(c,function xu(h,c){return Oi.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,v,b,x,Q,he,Ie;const we=null!==(p=d.displayName)&&void 0!==p?p:void 0,sn=null!==(_=d.email)&&void 0!==_?_:void 0,qr=null!==(v=d.phoneNumber)&&void 0!==v?v:void 0,lc=null!==(b=d.photoURL)&&void 0!==b?b:void 0,ay=null!==(x=d.tenantId)&&void 0!==x?x:void 0,id=null!==(Q=d._redirectEventId)&&void 0!==Q?Q:void 0,Kw=null!==(he=d.createdAt)&&void 0!==he?he:void 0,cp=null!==(Ie=d.lastLoginAt)&&void 0!==Ie?Ie:void 0,{uid:uy,emailVerified:cy,isAnonymous:ly,providerData:dc,stsTokenManager:Zw}=d;X(uy&&Zw,c,"internal-error");const BP=K.fromJSON(this.name,Zw);X("string"==typeof uy,c,"internal-error"),M(we,c.name),M(sn,c.name),X("boolean"==typeof cy,c,"internal-error"),X("boolean"==typeof ly,c,"internal-error"),M(qr,c.name),M(lc,c.name),M(ay,c.name),M(id,c.name),M(Kw,c.name),M(cp,c.name);const hc=new q({uid:uy,auth:c,email:sn,emailVerified:cy,displayName:we,isAnonymous:ly,photoURL:lc,phoneNumber:qr,tenantId:ay,stsTokenManager:BP,createdAt:Kw,lastLoginAt:cp});return dc&&Array.isArray(dc)&&(hc.providerData=dc.map(jP=>Object.assign({},jP))),id&&(hc._redirectEventId=id),hc}static _fromIdTokenResponse(c,d,p=!1){return(0,I.Z)(function*(){const _=new K;_.updateFromServerResponse(d);const v=new q({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield wr(v),v})()}}const Ue=new Map;function Xe(h){qt(h instanceof Function,"Expected a class definition");let c=Ue.get(h);return c?(qt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Ue.set(h,c),c)}const nn=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,I.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,I.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,I.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return h.type="NONE",h})();function Bn(h,c,d){return`firebase:${h}:${c}:${d}`}class be{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:v}=this.auth;this.fullUserKey=Bn(this.userKey,_.apiKey,v),this.fullPersistenceKey=Bn("persistence",_.apiKey,v),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?q._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,I.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,I.Z)(function*(){if(!d.length)return new be(Xe(nn),c,p);const _=(yield Promise.all(d.map(function(){var he=(0,I.Z)(function*(Ie){if(yield Ie._isAvailable())return Ie});return function(Ie){return he.apply(this,arguments)}}()))).filter(he=>he);let v=_[0]||Xe(nn);const b=Bn(p,c.config.apiKey,c.name);let x=null;for(const he of d)try{const Ie=yield he._get(b);if(Ie){const we=q._fromJSON(c,Ie);he!==v&&(x=we),v=he;break}}catch{}const Q=_.filter(he=>he._shouldAllowMigration);return v._shouldAllowMigration&&Q.length?(v=Q[0],x&&(yield v._set(b,x.toJSON())),yield Promise.all(d.map(function(){var he=(0,I.Z)(function*(Ie){if(Ie!==v)try{yield Ie._remove(b)}catch{}});return function(Ie){return he.apply(this,arguments)}}())),new be(v,c,p)):new be(v,c,p)})()}}function er(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(F(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ot(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ie(c))return"Blackberry";if(Ee(c))return"Webos";if(rs(c))return"Safari";if((c.includes("chrome/")||cl(c))&&!c.includes("edge/"))return"Chrome";if(S(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Ot(h=(0,z.z$)()){return/firefox\//i.test(h)}function rs(h=(0,z.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function cl(h=(0,z.z$)()){return/crios\//i.test(h)}function F(h=(0,z.z$)()){return/iemobile/i.test(h)}function S(h=(0,z.z$)()){return/android/i.test(h)}function ie(h=(0,z.z$)()){return/blackberry/i.test(h)}function Ee(h=(0,z.z$)()){return/webos/i.test(h)}function qe(h=(0,z.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function De(h=(0,z.z$)()){return qe(h)||S(h)||Ee(h)||ie(h)||/windows phone/i.test(h)||F(h)}function ya(h,c=[]){let d;switch(h){case"Browser":d=er((0,z.z$)());break;case"Worker":d=`${er((0,z.z$)())}-${h}`;break;default:d=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${Le.SDK_VERSION}/${p}`}class iP{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=v=>new Promise((b,x)=>{try{b(c(v))}catch(Q){x(Q)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,I.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const v of p)try{v()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function ku(){return(ku=(0,I.Z)(function*(h,c={}){return H(h,"GET","/v2/passwordPolicy",ne(h,c))})).apply(this,arguments)}class sP{constructor(c){var d,p,_,v;const b=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=b.minPasswordLength)&&void 0!==d?d:6,b.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=b.maxPasswordLength),void 0!==b.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=b.containsLowercaseCharacter),void 0!==b.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=b.containsUppercaseCharacter),void 0!==b.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=b.containsNumericCharacter),void 0!==b.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=b.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,v,b,x;const Q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,Q),this.validatePasswordCharacterOptions(c,Q),Q.isValid&&(Q.isValid=null===(d=Q.meetsMinPasswordLength)||void 0===d||d),Q.isValid&&(Q.isValid=null===(p=Q.meetsMaxPasswordLength)||void 0===p||p),Q.isValid&&(Q.isValid=null===(_=Q.containsLowercaseLetter)||void 0===_||_),Q.isValid&&(Q.isValid=null===(v=Q.containsUppercaseLetter)||void 0===v||v),Q.isValid&&(Q.isValid=null===(b=Q.containsNumericCharacter)||void 0===b||b),Q.isValid&&(Q.isValid=null===(x=Q.containsNonAlphanumericCharacter)||void 0===x||x),Q}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class ew{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $s(this),this.idTokenSubscription=new $s(this),this.beforeStateQueue=new iP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=Xe(d)),this._initializationPromise=this.queue((0,I.Z)(function*(){var _,v;if(!p._deleted&&(p.persistenceManager=yield be.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,I.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let v=_,b=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const x=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,Q=v?._redirectEventId,he=yield d.tryRedirectSignIn(c);(!x||x===Q)&&he?.user&&(v=he.user,b=!0)}if(!v)return d.directlySetCurrentUser(null);if(!v._redirectEventId){if(b)try{yield d.beforeStateQueue.runMiddleware(v)}catch(x){v=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(x))}return v?d.reloadAndSetCurrentUserOrClear(v):d.directlySetCurrentUser(null)}return X(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===v._redirectEventId?d.directlySetCurrentUser(v):d.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var d=this;return(0,I.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,I.Z)(function*(){try{yield wr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Do(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,I.Z)(function*(){const p=c?(0,z.m9)(c):null;return p&&X(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&X(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,I.Z)(function*(){yield d.assertedPersistence.setPersistence(Xe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,I.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const d=yield function XI(h){return ku.apply(this,arguments)}(c),p=new sP(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new z.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,I.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function T(h,c){return A.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,I.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,I.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&Xe(c)||d._popupRedirectResolver;X(p,d,"argument-error"),d.redirectPersistenceManager=yield be.create(d,[Xe(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,I.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,I.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,I.Z)(function*(){if(c===d.currentUser)return d.queue((0,I.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const v="function"==typeof d?d:d.next.bind(d);let b=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(x,this,"internal-error"),x.then(()=>{b||v(this.currentUser)}),"function"==typeof d){const Q=c.addObserver(d,p,_);return()=>{b=!0,Q()}}{const Q=c.addObserver(d);return()=>{b=!0,Q()}}}directlySetCurrentUser(c){var d=this;return(0,I.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ya(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Xn(h,...c){Jn.logLevel<=It.in.WARN&&Jn.warn(`Auth (${Le.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Gt(h){return(0,z.m9)(h)}class $s{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,z.ne)(d=>this.observer=d)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ll={loadJS:()=>(0,I.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Km(h){return ll.loadJS(h)}function Zm(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Oe{constructor(c){this.type="recaptcha-enterprise",this.auth=Gt(c)}verify(c="verify",d=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(x){if(!d){if(null==x.tenantId&&null!=x._agentRecaptchaConfig)return x._agentRecaptchaConfig.siteKey;if(null!=x.tenantId&&void 0!==x._tenantRecaptchaConfigs[x.tenantId])return x._tenantRecaptchaConfigs[x.tenantId].siteKey}return new Promise(function(){var Q=(0,I.Z)(function*(he,Ie){hn(x,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(we=>{if(void 0!==we.recaptchaKey){const sn=new ti(we);return null==x.tenantId?x._agentRecaptchaConfig=sn:x._tenantRecaptchaConfigs[x.tenantId]=sn,he(sn.siteKey)}Ie(new Error("recaptcha Enterprise site key undefined"))}).catch(we=>{Ie(we)})});return function(he,Ie){return Q.apply(this,arguments)}}())}),v.apply(this,arguments)}function b(x,Q,he){const Ie=window.grecaptcha;Vr(Ie)?Ie.enterprise.ready(()=>{Ie.enterprise.execute(x,{action:c}).then(we=>{Q(we)}).catch(()=>{Q("NO_RECAPTCHA")})}):he(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((x,Q)=>{(function _(x){return v.apply(this,arguments)})(p.auth).then(he=>{if(!d&&Vr(window.grecaptcha))b(he,x,Q);else{if(typeof window>"u")return void Q(new Error("RecaptchaVerifier is only supported in browser"));let Ie=function tw(){return ll.recaptchaEnterpriseScript}();0!==Ie.length&&(Ie+=he),Km(Ie).then(()=>{b(he,x,Q)}).catch(we=>{Q(we)})}}).catch(he=>{Q(he)})})})()}}function nw(h,c,d){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,I.Z)(function*(h,c,d,p=!1){const _=new Oe(h);let v;try{v=yield _.verify(d)}catch{v=yield _.verify(d,!0)}const b=Object.assign({},c);return Object.assign(b,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(b,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(b,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),b})).apply(this,arguments)}function dl(h,c,d,p){return de.apply(this,arguments)}function de(){return de=(0,I.Z)(function*(h,c,d,p){var _;if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield nw(h,c,d,"getOobCode"===d);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(b){if("auth/missing-recaptcha-token"===b.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=yield nw(h,c,d,"getOobCode"===d);return p(h,x)}return Promise.reject(b)});return function(b){return v.apply(this,arguments)}}())}),de.apply(this,arguments)}function Ym(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function Fu(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class So{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return en("not implemented")}_getIdTokenResponse(c){return en("not implemented")}_linkToIdToken(c,d){return en("not implemented")}_getReauthenticationResolver(c){return en("not implemented")}}function Jm(h,c){return rt.apply(this,arguments)}function rt(){return(rt=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:resetPassword",ne(h,c))})).apply(this,arguments)}function pl(){return(pl=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Br(h,c){return gl.apply(this,arguments)}function gl(){return(gl=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Rt(){return(Rt=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",ne(h,c))})).apply(this,arguments)}function hP(h,c){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPassword",ne(h,c))})).apply(this,arguments)}function ue(h,c){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:sendOobCode",ne(h,c))})).apply(this,arguments)}function ml(){return(ml=(0,I.Z)(function*(h,c){return ue(h,c)})).apply(this,arguments)}function Jh(h,c){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,I.Z)(function*(h,c){return ue(h,c)})).apply(this,arguments)}function ef(h,c){return e_.apply(this,arguments)}function e_(){return(e_=(0,I.Z)(function*(h,c){return ue(h,c)})).apply(this,arguments)}function t_(){return(t_=(0,I.Z)(function*(h,c){return ue(h,c)})).apply(this,arguments)}function n_(){return(n_=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithEmailLink",ne(h,c))})).apply(this,arguments)}function Uu(){return(Uu=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithEmailLink",ne(h,c))})).apply(this,arguments)}class Hs extends So{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Hs(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Hs(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,I.Z)(function*(){switch(d.signInMethod){case"password":return dl(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",hP);case"emailLink":return function pP(h,c){return n_.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:bt(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return dl(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Br);case"emailLink":return function Lu(h,c){return Uu.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:bt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function bs(h,c){return tf.apply(this,arguments)}function tf(){return(tf=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithIdp",ne(h,c))})).apply(this,arguments)}class Fi extends So{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Fi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):bt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,v=(0,Xt._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const b=new Fi(p,_);return b.idToken=v.idToken||void 0,b.accessToken=v.accessToken||void 0,b.secret=v.secret,b.nonce=v.nonce,b.pendingToken=v.pendingToken||null,b}_getIdTokenResponse(c){return bs(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,bs(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,bs(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,z.xO)(d)}return c}}function nf(){return(nf=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:sendVerificationCode",ne(h,c))})).apply(this,arguments)}function rf(){return(rf=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",ne(h,c))})).apply(this,arguments)}function _l(){return(_l=(0,I.Z)(function*(h,c){const d=yield Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",ne(h,c));if(d.temporaryProof)throw Ln(h,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const pe={USER_NOT_FOUND:"user-not-found"};function Bu(){return(Bu=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",ne(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),pe)})).apply(this,arguments)}class Vi extends So{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Vi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Vi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function zs(h,c){return rf.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function ee(h,c){return _l.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function yl(h,c){return Bu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}=c;return p||d||_||v?new Vi({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}):null}}class ju{constructor(c){var d,p,_,v,b,x;const Q=(0,z.zd)((0,z.pd)(c)),he=null!==(d=Q.apiKey)&&void 0!==d?d:null,Ie=null!==(p=Q.oobCode)&&void 0!==p?p:null,we=function sw(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=Q.mode)&&void 0!==_?_:null);X(he&&Ie&&we,"argument-error"),this.apiKey=he,this.operation=we,this.code=Ie,this.continueUrl=null!==(v=Q.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(b=Q.languageCode)&&void 0!==b?b:null,this.tenantId=null!==(x=Q.tenantId)&&void 0!==x?x:null}static parseLink(c){const d=function ow(h){const c=(0,z.zd)((0,z.pd)(h)).link,d=c?(0,z.zd)((0,z.pd)(c)).deep_link_id:null,p=(0,z.zd)((0,z.pd)(h)).deep_link_id;return(p?(0,z.zd)((0,z.pd)(p)).link:null)||p||d||c||h}(c);try{return new ju(d)}catch{return null}}}let Ea=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(d,p){return Hs._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=ju.parseLink(p);return X(_,"argument-error"),Hs._fromEmailAndCode(d,_.code,_.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class wn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Cr extends wn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ct extends Cr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return X("providerId"in d&&"signInMethod"in d,"argument-error"),Fi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return X(c.idToken||c.accessToken,"argument-error"),Fi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ct.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ct.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:v,nonce:b,providerId:x}=c;if(!p&&!_&&!d&&!v||!x)return null;try{return new ct(x)._credential({idToken:d,accessToken:p,nonce:b,pendingToken:v})}catch{return null}}}let $u=(()=>{class h extends Cr{constructor(){super("facebook.com")}static credential(d){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return h.credentialFromTaggedObject(d)}static credentialFromError(d){return h.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return h.credential(d.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),vl=(()=>{class h extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return h.credentialFromTaggedObject(d)}static credentialFromError(d){return h.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return h.credential(p,_)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),El=(()=>{class h extends Cr{constructor(){super("github.com")}static credential(d){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return h.credentialFromTaggedObject(d)}static credentialFromError(d){return h.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return h.credential(d.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class jr extends So{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return bs(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,bs(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,bs(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:v}=d;return p&&_&&v&&p===_?new jr(p,v):null}static _create(c,d){return new jr(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zu extends wn{constructor(c){X(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return zu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return zu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=jr.fromJSON(c);return X(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return jr._create(p,d)}catch{return null}}}let sf=(()=>{class h extends Cr{constructor(){super("twitter.com")}static credential(d,p){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return h.credentialFromTaggedObject(d)}static credentialFromError(d){return h.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return h.credential(p,_)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Il(h,c){return wl.apply(this,arguments)}function wl(){return(wl=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signUp",ne(h,c))})).apply(this,arguments)}class ii{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,I.Z)(function*(){const v=yield q._fromIdTokenResponse(c,p,_),b=Ia(p);return new ii({user:v,providerId:b,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Ia(p);return new ii({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Ia(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Cl(){return(Cl=(0,I.Z)(function*(h){var c;const d=Gt(h);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ii({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Il(d,{returnSecureToken:!0}),_=yield ii._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Tl extends z.ZR{constructor(c,d,p,_){var v;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Tl.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new Tl(c,d,p,_)}}function af(h,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(h):d._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Tl._fromErrorAndOperation(h,v,c,p):v})}function s_(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function si(){return si=(0,I.Z)(function*(h,c){const d=(0,z.m9)(h);yield Dl(!0,d,c);const{providerUserInfo:p}=yield function Nu(h,c){return Lr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=s_(p||[]);return d.providerData=d.providerData.filter(v=>_.has(v.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),si.apply(this,arguments)}function uf(h,c){return bl.apply(this,arguments)}function bl(){return(bl=(0,I.Z)(function*(h,c,d=!1){const p=yield ni(h,c._linkToIdToken(h.auth,yield h.getIdToken()),d);return ii._forOperation(h,"link",p)})).apply(this,arguments)}function Dl(h,c,d){return cf.apply(this,arguments)}function cf(){return(cf=(0,I.Z)(function*(h,c,d){yield wr(c);const _=!1===h?"provider-already-linked":"no-such-provider";X(s_(c.providerData).has(d)===h,c.auth,_)})).apply(this,arguments)}function o_(h,c){return lf.apply(this,arguments)}function lf(){return(lf=(0,I.Z)(function*(h,c,d=!1){const{auth:p}=h,_="reauthenticate";try{const v=yield ni(h,af(p,_,c,h),d);X(v.idToken,p,"internal-error");const b=fa(v.idToken);X(b,p,"internal-error");const{sub:x}=b;return X(h.uid===x,p,"user-mismatch"),ii._forOperation(h,_,v)}catch(v){throw"auth/user-not-found"===v?.code&&bt(p,"user-mismatch"),v}})).apply(this,arguments)}function df(h,c){return hf.apply(this,arguments)}function hf(){return(hf=(0,I.Z)(function*(h,c,d=!1){const p="signIn",_=yield af(h,p,c),v=yield ii._fromIdTokenResponse(h,p,_);return d||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function Al(h,c){return ff.apply(this,arguments)}function ff(){return(ff=(0,I.Z)(function*(h,c){return df(Gt(h),c)})).apply(this,arguments)}function Tr(h,c){return pf.apply(this,arguments)}function pf(){return(pf=(0,I.Z)(function*(h,c){const d=(0,z.m9)(h);return yield Dl(!1,d,c.providerId),uf(d,c)})).apply(this,arguments)}function a_(h,c){return gf.apply(this,arguments)}function gf(){return(gf=(0,I.Z)(function*(h,c){return o_((0,z.m9)(h),c)})).apply(this,arguments)}function mf(){return(mf=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithCustomToken",ne(h,c))})).apply(this,arguments)}function ke(){return ke=(0,I.Z)(function*(h,c){const d=Gt(h),p=yield function lr(h,c){return mf.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield ii._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),ke.apply(this,arguments)}class jn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?ht._fromServerResponse(c,d):"totpInfo"in d?Mn._fromServerResponse(c,d):bt(c,"internal-error")}}class ht extends jn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new ht(d)}}class Mn extends jn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Mn(d)}}function $n(h,c,d){var p;X((null===(p=d.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),X(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(X(d.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(X(d.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Gs(h){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(h){const c=Gt(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Sl(){return(Sl=(0,I.Z)(function*(h,c,d){const p=Gt(h),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&$n(p,_,d),yield dl(p,_,"getOobCode",Jh)})).apply(this,arguments)}function _f(){return _f=(0,I.Z)(function*(h,c,d){yield Jm((0,z.m9)(h),{oobCode:c,newPassword:d}).catch(function(){var p=(0,I.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Gs(h),_});return function(_){return p.apply(this,arguments)}}())}),_f.apply(this,arguments)}function Wt(){return Wt=(0,I.Z)(function*(h,c){yield function dP(h,c){return Rt.apply(this,arguments)}((0,z.m9)(h),{oobCode:c})}),Wt.apply(this,arguments)}function ge(h,c){return He.apply(this,arguments)}function He(){return(He=(0,I.Z)(function*(h,c){const d=(0,z.m9)(h),p=yield Jm(d,{oobCode:c}),_=p.requestType;switch(X(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(p.mfaInfo,d,"internal-error");default:X(p.email,d,"internal-error")}let v=null;return p.mfaInfo&&(v=jn._fromServerResponse(Gt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:_}})).apply(this,arguments)}function oi(){return(oi=(0,I.Z)(function*(h,c){const{data:d}=yield ge((0,z.m9)(h),c);return d.email})).apply(this,arguments)}function Hn(){return(Hn=(0,I.Z)(function*(h,c,d){const p=Gt(h),b=yield dl(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Il).catch(Q=>{throw"auth/password-does-not-meet-requirements"===Q.code&&Gs(h),Q}),x=yield ii._fromIdTokenResponse(p,"signIn",b);return yield p._updateCurrentUser(x.user),x})).apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(h,c,d){const p=Gt(h),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(b,x){X(x.handleCodeInApp,p,"argument-error"),x&&$n(p,b,x)})(_,d),yield dl(p,_,"getOobCode",ef)})).apply(this,arguments)}function Po(){return(Po=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h),_=Ea.credentialWithLink(c,d||Pn());return X(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Al(p,_)})).apply(this,arguments)}function Ws(){return(Ws=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:createAuthUri",ne(h,c))})).apply(this,arguments)}function Ro(){return Ro=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:es()?Pn():"http://localhost"},{signinMethods:_}=yield function l_(h,c){return Ws.apply(this,arguments)}((0,z.m9)(h),p);return _||[]}),Ro.apply(this,arguments)}function Ei(){return Ei=(0,I.Z)(function*(h,c){const d=(0,z.m9)(h),_={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&$n(d.auth,_,c);const{email:v}=yield function Yh(h,c){return ml.apply(this,arguments)}(d.auth,_);v!==h.email&&(yield h.reload())}),Ei.apply(this,arguments)}function Rl(){return Rl=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};d&&$n(p.auth,v,d);const{email:b}=yield function fP(h,c){return t_.apply(this,arguments)}(p.auth,v);b!==h.email&&(yield h.reload())}),Rl.apply(this,arguments)}function Li(){return(Li=(0,I.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Mo(){return Mo=(0,I.Z)(function*(h,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,z.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},b=yield ni(p,function Ks(h,c){return Li.apply(this,arguments)}(p.auth,v));p.displayName=b.displayName||null,p.photoURL=b.photoUrl||null;const x=p.providerData.find(({providerId:Q})=>"password"===Q);x&&(x.displayName=p.displayName,x.photoURL=p.photoURL),yield p._updateTokensIfNecessary(b)}),Mo.apply(this,arguments)}function Ml(h,c,d){return xl.apply(this,arguments)}function xl(){return xl=(0,I.Z)(function*(h,c,d){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),d&&(v.password=d);const b=yield ni(h,function Qh(h,c){return pl.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(b,!0)}),xl.apply(this,arguments)}class Ds{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class xo extends Ds{constructor(c,d,p,_){super(c,d,p),this.username=_}}class Ku extends Ds{constructor(c,d){super(c,"facebook.com",d)}}class tr extends xo{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class mP extends Ds{constructor(c,d){super(c,"google.com",d)}}class $r extends xo{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Dr(h){const{user:c,_tokenResponse:d}=h;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function ss(h){var c,d;if(!h)return null;const{providerId:p}=h,_=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const b=null===(d=null===(c=fa(h.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(b)return new Ds(v,"anonymous"!==b&&"custom"!==b?b:null)}if(!p)return null;switch(p){case"facebook.com":return new Ku(v,_);case"github.com":return new tr(v,_);case"google.com":return new mP(v,_);case"twitter.com":return new $r(v,_,h.screenName||null);case"custom":case"anonymous":return new Ds(v,null);default:return new Ds(v,p,_)}}(d)}class Da{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new Da("enroll",c,d)}static _fromMfaPendingCredential(c){return new Da("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Da._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Da._fromIdtoken(c.multiFactorSession.idToken)}return null}}class f_{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Gt(c),_=d.customData._serverResponse,v=(_.mfaInfo||[]).map(x=>jn._fromServerResponse(p,x));X(_.mfaPendingCredential,p,"internal-error");const b=Da._fromMfaPendingCredential(_.mfaPendingCredential);return new f_(b,v,function(){var x=(0,I.Z)(function*(Q){const he=yield Q._process(p,b);delete _.mfaInfo,delete _.mfaPendingCredential;const Ie=Object.assign(Object.assign({},_),{idToken:he.idToken,refreshToken:he.refreshToken});switch(d.operationType){case"signIn":const we=yield ii._fromIdTokenResponse(p,d.operationType,Ie);return yield p._updateCurrentUser(we.user),we;case"reauthenticate":return X(d.user,p,"internal-error"),ii._forOperation(d.user,d.operationType,Ie);default:bt(p,"internal-error")}});return function(Q){return x.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,I.Z)(function*(){return d.signInResolver(c)})()}}class p_{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>jn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new p_(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Da._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,I.Z)(function*(){const _=c,v=yield p.getSession(),b=yield ni(p.user,_._process(p.user.auth,v,d));return yield p.user._updateTokensIfNecessary(b),p.user.reload()})()}unenroll(c){var d=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const v=yield ni(d.user,function TP(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(h,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:b})=>b!==p),yield d.user._updateTokensIfNecessary(v),yield d.user.reload()}catch(v){throw v}})()}}const Nl=new WeakMap,Ef="__sak";class lw{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const If=(()=>{class h extends lw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bP(){const h=(0,z.z$)();return rs(h)||qe(h)}()&&function ot(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=De(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),v=this.localCache[p];_!==v&&d(p,v,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((x,Q,he)=>{this.notifyListeners(x,he)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const x=this.storage.getItem(_);if(d.newValue!==x)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const v=()=>{const x=this.storage.getItem(_);!p&&this.localCache[_]===x||this.notifyListeners(_,x)},b=this.storage.getItem(_);!function fn(){return(0,z.w1)()&&10===document.documentMode}()||b===d.newValue||d.newValue===d.oldValue?v():setTimeout(v,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,v=this;return(0,I.Z)(function*(){yield _().call(v,d,p),v.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,I.Z)(function*(){const v=yield p().call(_,d);return _.localCache[d]=JSON.stringify(v),v})()}_remove(d){var p=()=>super._remove,_=this;return(0,I.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return h.type="LOCAL",h})(),Ui=(()=>{class h extends lw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return h.type="SESSION",h})();let m_=(()=>{class h{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(v=>v.isListeningto(d));if(p)return p;const _=new h(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,I.Z)(function*(){const _=d,{eventId:v,eventType:b,data:x}=_.data,Q=p.handlersMap[b];if(!Q?.size)return;_.ports[0].postMessage({status:"ack",eventId:v,eventType:b});const he=Array.from(Q).map(function(){var we=(0,I.Z)(function*(sn){return sn(_.origin,x)});return function(sn){return we.apply(this,arguments)}}()),Ie=yield function Ii(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(he);_.ports[0].postMessage({status:"done",eventId:v,eventType:b,response:Ie})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Aa(h="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return h+d}class __{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let b,x;return new Promise((Q,he)=>{const Ie=Aa("",20);v.port1.start();const we=setTimeout(()=>{he(new Error("unsupported_event"))},p);x={messageChannel:v,onMessage(sn){const qr=sn;if(qr.data.eventId===Ie)switch(qr.data.status){case"ack":clearTimeout(we),b=setTimeout(()=>{he(new Error("timeout"))},3e3);break;case"done":clearTimeout(b),Q(qr.data.response);break;default:clearTimeout(we),clearTimeout(b),he(new Error("invalid_response"))}}},_.handlers.add(x),v.port1.addEventListener("message",x.onMessage),_.target.postMessage({eventType:c,eventId:Ie,data:d},[v.port2])}).finally(()=>{x&&_.removeMessageHandler(x)})})()}}function vn(){return window}function Ol(){return typeof vn().WorkerGlobalScope<"u"&&"function"==typeof vn().importScripts}function Zu(){return(Zu=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tf="firebaseLocalStorageDb",Qs="firebaseLocalStorage",Oo="fbase_key";class Sa{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function bf(h,c){return h.transaction([Qs],c?"readwrite":"readonly").objectStore(Qs)}function E_(){const h=indexedDB.open(Tf,1);return new Promise((c,d)=>{h.addEventListener("error",()=>{d(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Qs,{keyPath:Oo})}catch(_){d(_)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Qs)?c(p):(p.close(),yield function DP(){const h=indexedDB.deleteDatabase(Tf);return new Sa(h).toPromise()}(),c(yield E_()))}))})}function I_(h,c,d){return Df.apply(this,arguments)}function Df(){return(Df=(0,I.Z)(function*(h,c,d){const p=bf(h,!0).put({[Oo]:c,value:d});return new Sa(p).toPromise()})).apply(this,arguments)}function Fl(){return(Fl=(0,I.Z)(function*(h,c){const d=bf(h,!1).get(c),p=yield new Sa(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Vl(h,c){const d=bf(h,!0).delete(c);return new Sa(d).toPromise()}const Qu=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,I.Z)(function*(){return d.db||(d.db=yield E_()),d.db})()}_withRetries(d){var p=this;return(0,I.Z)(function*(){let _=0;for(;;)try{const v=yield p._openDb();return yield d(v)}catch(v){if(_++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,I.Z)(function*(){return Ol()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,I.Z)(function*(){d.receiver=m_._getInstance(function v_(){return Ol()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(_,v){return{keyProcessed:(yield d._poll()).includes(v.key)}});return function(_,v){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(_,v){return["keyChanged"]});return function(_,v){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,I.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function Cf(){return Zu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new __(d.activeServiceWorker);const v=yield d.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(_=v[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function y_(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const d=yield E_();return yield I_(d,Ef,"1"),yield Vl(d,Ef),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(v=>I_(v,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,I.Z)(function*(){const _=yield p._withRetries(v=>function AP(h,c){return Fl.apply(this,arguments)}(v,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(_=>Vl(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,I.Z)(function*(){const p=yield d._withRetries(b=>{const x=bf(b,!1).getAll();return new Sa(x).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],v=new Set;if(0!==p.length)for(const{fbase_key:b,value:x}of p)v.add(b),JSON.stringify(d.localCache[b])!==JSON.stringify(x)&&(d.notifyListeners(b,x),_.push(b));for(const b of Object.keys(d.localCache))d.localCache[b]&&!v.has(b)&&(d.notifyListeners(b,null),_.push(b));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Ll=1e12;class T_{constructor(c){this.auth=c,this.counter=Ll,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new gw(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Ll;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Ll))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,I.Z)(function*(){var p;return null===(p=d._widgets.get(c||Ll))||void 0===p||p.execute(),""})()}}class gw{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;X(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function b_(h){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sf=Zm("rcb"),SP=new ns(3e4,6e4);class mw{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=vn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return X(function wi(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Ir(vn().grecaptcha)?Promise.resolve(vn().grecaptcha):new Promise((p,_)=>{const v=vn().setTimeout(()=>{_(Ut(c,"network-request-failed"))},SP.get());vn()[Sf]=()=>{vn().clearTimeout(v),delete vn()[Sf];const x=vn().grecaptcha;if(!x||!Ir(x))return void _(Ut(c,"internal-error"));const Q=x.render;x.render=(he,Ie)=>{const we=Q(he,Ie);return this.counter++,we},this.hostLanguage=d,p(x)},Km(`${function aP(){return ll.recaptchaV2Script}()}?${(0,z.xO)({onload:Sf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(v),_(Ut(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=vn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D_{load(c){return(0,I.Z)(function*(){return new T_(c)})()}clearedOneInstance(){}}const A_="recaptcha",_w={theme:"light",type:"image"};class S_{constructor(c,d,p=Object.assign({},_w)){this.parameters=p,this.type=A_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gt(c),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;X(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D_:new mw,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(v=>{const b=x=>{x&&(c.tokenChangeListeners.delete(b),v(x))};c.tokenChangeListeners.add(b),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=vn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){X(es()&&!Ol(),c.auth,"internal-error"),yield function P_(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Mu(h){return Cs.apply(this,arguments)}(c.auth);X(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pf{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Vi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Mf(){return(Mf=(0,I.Z)(function*(h,c,d){const p=Gt(h),_=yield Pa(p,c,(0,z.m9)(d));return new Pf(_,v=>Al(p,v))})).apply(this,arguments)}function Ul(){return(Ul=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h);yield Dl(!1,p,"phone");const _=yield Pa(p.auth,c,(0,z.m9)(d));return new Pf(_,v=>Tr(p,v))})).apply(this,arguments)}function Mt(){return(Mt=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h),_=yield Pa(p.auth,c,(0,z.m9)(d));return new Pf(_,v=>a_(p,v))})).apply(this,arguments)}function Pa(h,c,d){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,I.Z)(function*(h,c,d){var p;const _=yield d.verify();try{let v;if(X("string"==typeof _,h,"argument-error"),X(d.type===A_,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const b=v.session;if("phoneNumber"in v)return X("enroll"===b.type,h,"internal-error"),(yield function IP(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:start",ne(h,c))}(h,{idToken:b.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{X("signin"===b.type,h,"internal-error");const x=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return X(x,h,"missing-multi-factor-info"),(yield function hw(h,c){return H(h,"POST","/v2/accounts/mfaSignIn:start",ne(h,c))}(h,{mfaPendingCredential:b.credential,mfaEnrollmentId:x,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:b}=yield function va(h,c){return nf.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:_});return b}}finally{d._reset()}}),Ra.apply(this,arguments)}function xf(){return(xf=(0,I.Z)(function*(h,c){yield uf((0,z.m9)(h),c)})).apply(this,arguments)}let Ma=(()=>{class h{constructor(d){this.providerId=h.PROVIDER_ID,this.auth=Gt(d)}verifyPhoneNumber(d,p){return Pa(this.auth,d,(0,z.m9)(p))}static credential(d,p){return Vi._fromVerification(d,p)}static credentialFromResult(d){return h.credentialFromTaggedObject(d)}static credentialFromError(d){return h.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Vi._fromTokenResponse(p,_):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Ci(h,c){return c?Xe(c):(X(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Ar extends So{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return bs(c,this._buildIdpRequest())}_linkToIdToken(c,d){return bs(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return bs(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function yw(h){return df(h.auth,new Ar(h),h.bypassAuthState)}function vw(h){const{auth:c,user:d}=h;return X(d,c,"internal-error"),o_(d,new Ar(h),h.bypassAuthState)}function Ew(h){return as.apply(this,arguments)}function as(){return(as=(0,I.Z)(function*(h){const{auth:c,user:d}=h;return X(d,c,"internal-error"),uf(d,new Ar(h),h.bypassAuthState)})).apply(this,arguments)}class Nf{constructor(c,d,p,_,v=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,I.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:v,tenantId:b,error:x,type:Q}=c;if(x)return void d.reject(x);const he={auth:d.auth,requestUri:p,sessionId:_,tenantId:b||void 0,postBody:v||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Q)(he))}catch(Ie){d.reject(Ie)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return yw;case"linkViaPopup":case"linkViaRedirect":return Ew;case"reauthViaPopup":case"reauthViaRedirect":return vw;default:bt(this.auth,"internal-error")}}resolve(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iw=new ns(2e3,1e4);function Bl(){return(Bl=(0,I.Z)(function*(h,c,d){const p=Gt(h);Je(h,c,wn);const _=Ci(p,d);return new N_(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Of(){return(Of=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h);Je(p.auth,c,wn);const _=Ci(p.auth,d);return new N_(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function jl(){return(jl=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h);Je(p.auth,c,wn);const _=Ci(p.auth,d);return new N_(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let N_=(()=>{class h extends Nf{constructor(d,p,_,v,b){super(d,p,v,b),this.provider=_,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var d=this;return(0,I.Z)(function*(){const p=yield d.execute();return X(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,I.Z)(function*(){qt(1===d.filter.length,"Popup operations only handle one event");const p=Aa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Ut(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Iw.get())};d()}}return h.currentPopupAction=null,h})();const ww="pendingRedirect",Yu=new Map;class Cw extends Nf{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,I.Z)(function*(){let p=Yu.get(d.auth._key());if(!p){try{const v=(yield function O_(h,c){return Ys.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(v)}catch(_){p=()=>Promise.reject(_)}Yu.set(d.auth._key(),p)}return d.bypassAuthState||Yu.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Ys(){return(Ys=(0,I.Z)(function*(h,c){const d=re(c),p=k_(h);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function kf(h,c){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,I.Z)(function*(h,c){return k_(h)._set(re(c),"true")})).apply(this,arguments)}function Vf(h,c){Yu.set(h._key(),c)}function k_(h){return Xe(h._redirectPersistence)}function re(h){return Bn(ww,h.config.apiKey,h.name)}function mt(h,c,d){return function hr(h,c,d){return zn.apply(this,arguments)}(h,c,d)}function zn(){return(zn=(0,I.Z)(function*(h,c,d){const p=Gt(h);Je(h,c,wn),yield p._initializationPromise;const _=Ci(p,d);return yield kf(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function nr(h,c,d){return function F_(h,c,d){return ko.apply(this,arguments)}(h,c,d)}function ko(){return(ko=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h);Je(p.auth,c,wn),yield p.auth._initializationPromise;const _=Ci(p.auth,d);yield kf(_,p.auth);const v=yield cs(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function us(h,c,d){return function Lf(h,c,d){return Ju.apply(this,arguments)}(h,c,d)}function Ju(){return(Ju=(0,I.Z)(function*(h,c,d){const p=(0,z.m9)(h);Je(p.auth,c,wn),yield p.auth._initializationPromise;const _=Ci(p.auth,d);yield Dl(!1,p,c.providerId),yield kf(_,p.auth);const v=yield cs(p);return _._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function V_(){return(V_=(0,I.Z)(function*(h,c){return yield Gt(h)._initializationPromise,Xu(h,c,!1)})).apply(this,arguments)}function Xu(h,c){return rr.apply(this,arguments)}function rr(){return(rr=(0,I.Z)(function*(h,c,d=!1){const p=Gt(h),_=Ci(p,c),b=yield new Cw(p,_,d).execute();return b&&!d&&(delete b.user._redirectEventId,yield p._persistUserIfCurrent(b.user),yield p._setRedirectUser(null,c)),b})).apply(this,arguments)}function cs(h){return $l.apply(this,arguments)}function $l(){return($l=(0,I.Z)(function*(h){const c=Aa(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class ls{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Dw(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uf(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!Uf(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Ut(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(c))}saveEventToCache(c){this.cachedEventUids.add(L_(c)),this.lastProcessedEventTime=Date.now()}}function L_(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Uf({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function U_(h){return ec.apply(this,arguments)}function ec(){return(ec=(0,I.Z)(function*(h,c={}){return H(h,"GET","/v1/projects",c)})).apply(this,arguments)}const Bf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B_=/^https?/;function $f(){return($f=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield U_(h);for(const d of c)try{if(j_(d))return}catch{}bt(h,"unauthorized-domain")})).apply(this,arguments)}function j_(h){const c=Pn(),{protocol:d,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const b=new URL(h);return""===b.hostname&&""===p?"chrome-extension:"===d&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&b.hostname===p}if(!B_.test(d))return!1;if(Bf.test(h))return p===h;const _=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Hf=new ns(3e4,6e4);function zf(){const h=vn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let d=0;d<h.CP.length;d++)h.CP[d]=null}let tc=null;const qf=new ns(5e3,15e3),Aw="__/auth/iframe",Sw="emulator/auth/iframe",Sr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rn(h){const c=h.config;X(c.authDomain,h,"auth-domain-config-required");const d=c.emulator?U(c,Sw):`https://${h.config.authDomain}/${Aw}`,p={apiKey:c.apiKey,appName:h.name,v:Le.SDK_VERSION},_=Fo.get(h.config.apiHost);_&&(p.eid=_);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${d}?${(0,z.xO)(p).slice(1)}`}function Gf(){return Gf=(0,I.Z)(function*(h){const c=yield function H_(h){return tc=tc||function $_(h){return new Promise((c,d)=>{var p,_,v;function b(){zf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{zf(),d(Ut(h,"network-request-failed"))},timeout:Hf.get()})}if(null!==(_=null===(p=vn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(v=vn().gapi)||void 0===v||!v.load){const x=Zm("iframefcb");return vn()[x]=()=>{gapi.load?b():d(Ut(h,"network-request-failed"))},Km(`${function uP(){return ll.gapiScript}()}?onload=${x}`).catch(Q=>d(Q))}b()}}).catch(c=>{throw tc=null,c})}(h),tc}(h),d=vn().gapi;return X(d,h,"internal-error"),c.open({where:document.body,url:rn(h),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sr,dontclear:!0},p=>new Promise(function(){var _=(0,I.Z)(function*(v,b){yield p.restyle({setHideOnLeave:!1});const x=Ut(h,"network-request-failed"),Q=vn().setTimeout(()=>{b(x)},qf.get());function he(){vn().clearTimeout(Q),v(p)}p.ping(he).then(he,()=>{b(x)})});return function(v,b){return _.apply(this,arguments)}}()))}),Gf.apply(this,arguments)}const Rw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class As{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ql="__/auth/handler",Gl="emulator/auth/handler",Wf=encodeURIComponent("fac");function Wl(h,c,d,p,_,v){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,I.Z)(function*(h,c,d,p,_,v){X(h.config.authDomain,h,"auth-domain-config-required"),X(h.config.apiKey,h,"invalid-api-key");const b={apiKey:h.config.apiKey,appName:h.name,authType:d,redirectUrl:p,v:Le.SDK_VERSION,eventId:_};if(c instanceof wn){c.setDefaultLanguage(h.languageCode),b.providerId=c.providerId||"",(0,z.xb)(c.getCustomParameters())||(b.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ie,we]of Object.entries(v||{}))b[Ie]=we}if(c instanceof Cr){const Ie=c.getScopes().filter(we=>""!==we);Ie.length>0&&(b.scopes=Ie.join(","))}h.tenantId&&(b.tid=h.tenantId);const x=b;for(const Ie of Object.keys(x))void 0===x[Ie]&&delete x[Ie];const Q=yield h._getAppCheckToken(),he=Q?`#${Wf}=${encodeURIComponent(Q)}`:"";return`${function Nw({config:h}){return h.emulator?U(h,Gl):`https://${h.authDomain}/${ql}`}(h)}?${(0,z.xO)(x).slice(1)}${he}`})).apply(this,arguments)}const Js="webStorageSupport",G_=class nc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ui,this._completeRedirectFn=Xu,this._overrideRedirectResult=Vf}_openPopup(c,d,p,_){var v=this;return(0,I.Z)(function*(){var b;qt(null===(b=v.eventManagers[c._key()])||void 0===b?void 0:b.manager,"_initialize() not called before _openPopup()");const x=yield Wl(c,d,p,Pn(),_);return function xw(h,c,d,p=500,_=600){const v=Math.max((window.screen.availHeight-_)/2,0).toString(),b=Math.max((window.screen.availWidth-p)/2,0).toString();let x="";const Q=Object.assign(Object.assign({},Rw),{width:p.toString(),height:_.toString(),top:v,left:b}),he=(0,z.z$)().toLowerCase();d&&(x=cl(he)?"_blank":d),Ot(he)&&(c=c||"http://localhost",Q.scrollbars="yes");const Ie=Object.entries(Q).reduce((sn,[qr,lc])=>`${sn}${qr}=${lc},`,"");if(function N(h=(0,z.z$)()){var c;return qe(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(he)&&"_self"!==x)return function zl(h,c){const d=document.createElement("a");d.href=h,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",x),new As(null);const we=window.open(c||"",x,Ie);X(we,h,"popup-blocked");try{we.focus()}catch{}return new As(we)}(c,x,Aa())})()}_openRedirect(c,d,p,_){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function wf(h){vn().location.href=h}(yield Wl(c,d,p,Pn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:v}=this.eventManagers[d];return _?Promise.resolve(_):(qt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,I.Z)(function*(){const p=yield function Pw(h){return Gf.apply(this,arguments)}(c),_=new ls(c);return p.register("authEvent",v=>(X(v?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Js,{type:Js},_=>{var v;const b=null===(v=_?.[0])||void 0===v?void 0:v[Js];void 0!==b&&d(!!b),bt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function jf(h){return $f.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return De()||rs()||qe()}};class PP{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return en("unexpected MultiFactorSessionType")}}}class rc extends PP{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new rc(c)}_finalizeEnroll(c,d,p){return function wP(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:finalize",ne(h,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function w_(h,c){return H(h,"POST","/v2/accounts/mfaSignIn:finalize",ne(h,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let RP=(()=>{class h{constructor(){}static assertion(d){return rc._fromCredential(d)}}return h.FACTOR_ID="phone",h})();var Zl="@firebase/auth";class kw{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,I.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vo(){return window}(0,z.Pz)("authIdTokenMaxAge"),function oP(h){ll=h}({loadJS:h=>new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=_=>{const v=Ut("internal-error");v.customData=_,d(v)},p.type="text/javascript",p.charset="UTF-8",function ds(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Qf(h){(0,Le._registerComponent)(new dn.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:b,authDomain:x}=p.options;X(b&&!b.includes(":"),"invalid-api-key",{appName:p.name});const Q={apiKey:b,authDomain:x,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ya(h)},he=new ew(p,_,v,Q);return function rw(h,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(Xe);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(he,d),he},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,Le._registerComponent)(new dn.wA("auth-internal",c=>{const d=Gt(c.getProvider("auth").getImmediate());return new kw(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)(Zl,"1.6.0",function ic(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(h)),(0,Le.registerVersion)(Zl,"1.6.0","esm2017")}("Browser");function Jl(){return Jl=(0,I.Z)(function*(h,c,d){var p;const{BuildInfo:_}=Vo();qt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function Q_(h){return Xf.apply(this,arguments)}(c.sessionId),b={};return qe()?b.ibi=_.packageName:S()?b.apn=_.packageName:bt(h,"operation-not-supported-in-this-environment"),_.displayName&&(b.appDisplayName=_.displayName),b.sessionId=v,Wl(h,d,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,b)}),Jl.apply(this,arguments)}function sc(){return(sc=(0,I.Z)(function*(h){const{BuildInfo:c}=Vo(),d={};qe()?d.iosBundleId=c.packageName:S()?d.androidPackageName=c.packageName:bt(h,"operation-not-supported-in-this-environment"),yield U_(h,d)})).apply(this,arguments)}function ed(){return(ed=(0,I.Z)(function*(h,c,d){const{cordova:p}=Vo();let _=()=>{};try{yield new Promise((v,b)=>{let x=null;function Q(){var we;v();const sn=null===(we=p.plugins.browsertab)||void 0===we?void 0:we.close;"function"==typeof sn&&sn(),"function"==typeof d?.close&&d.close()}function he(){x||(x=window.setTimeout(()=>{b(Ut(h,"redirect-cancelled-by-user"))},2e3))}function Ie(){"visible"===document?.visibilityState&&he()}c.addPassiveListener(Q),document.addEventListener("resume",he,!1),S()&&document.addEventListener("visibilitychange",Ie,!1),_=()=>{c.removePassiveListener(Q),document.removeEventListener("resume",he,!1),document.removeEventListener("visibilitychange",Ie,!1),x&&window.clearTimeout(x)}})}finally{_()}})).apply(this,arguments)}function Xf(){return(Xf=(0,I.Z)(function*(h){const c=function td(h){if(qt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),d=new Uint8Array(c);for(let p=0;p<h.length;p++)d[p]=h.charCodeAt(p);return d}(h),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(_=>_.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Vw extends ls{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function Oa(h){return ep.apply(this,arguments)}function ep(){return(ep=(0,I.Z)(function*(h){const c=yield xn()._get(oc(h));return c&&(yield xn()._remove(oc(h))),c})).apply(this,arguments)}function Lw(){const h=[];for(let d=0;d<20;d++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function xn(){return Xe(If)}function oc(h){return Bn("authEvent",h.config.apiKey,h.name)}function Uo(h){if(!h?.includes("?"))return{};const[c,...d]=h.split("?");return(0,z.zd)(d.join("?"))}const Va=class Fa{constructor(){this._redirectPersistence=Ui,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xu,this._overrideRedirectResult=Vf}_initialize(c){var d=this;return(0,I.Z)(function*(){const p=c._key();let _=d.eventManagers.get(p);return _||(_=new Vw(c),d.eventManagers.set(p,_),d.attachCallbackListeners(c,_)),_})()}_openPopup(c){bt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,p,_){var v=this;return(0,I.Z)(function*(){!function Z_(h){var c,d,p,_,v,b,x,Q,he,Ie;const we=Vo();X("function"==typeof(null===(c=we?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(d=we?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(v=null===(_=null===(p=we?.cordova)||void 0===p?void 0:p.plugins)||void 0===_?void 0:_.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Q=null===(x=null===(b=we?.cordova)||void 0===b?void 0:b.plugins)||void 0===x?void 0:x.browsertab)||void 0===Q?void 0:Q.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Ie=null===(he=we?.cordova)||void 0===he?void 0:he.InAppBrowser)||void 0===Ie?void 0:Ie.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const b=yield v._initialize(c);yield b.initialized(),b.resetRedirect(),function Tw(){Yu.clear()}(),yield v._originValidation(c);const x=function Y_(h,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:Lw(),postBody:null,tenantId:h.tenantId,error:Ut(h,"no-auth-event")}}(c,p,_);yield function J_(h,c){return xn()._set(oc(h),c)}(c,x);const Q=yield function Jf(h,c,d){return Jl.apply(this,arguments)}(c,x,d),he=yield function Fw(h){const{cordova:c}=Vo();return new Promise(d=>{c.plugins.browsertab.isAvailable(p=>{let _=null;p?c.plugins.browsertab.openUrl(h):_=c.InAppBrowser.open(h,function ut(h=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),d(_)})})}(Q);return function K_(h,c,d){return ed.apply(this,arguments)}(c,b,he)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Xl(h){return sc.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:p,handleOpenURL:_,BuildInfo:v}=Vo(),b=setTimeout((0,I.Z)(function*(){yield Oa(c),d.onEvent(tp())}),500),x=function(){var Ie=(0,I.Z)(function*(we){clearTimeout(b);const sn=yield Oa(c);let qr=null;sn&&we?.url&&(qr=function Pr(h,c){var d,p;const _=function X_(h){const c=Uo(h),d=c.link?decodeURIComponent(c.link):void 0,p=Uo(d).link,_=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Uo(_).link||_||p||d||h}(c);if(_.includes("/__/auth/callback")){const v=Uo(_),b=v.firebaseError?function Uw(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,x=null===(p=null===(d=b?.code)||void 0===d?void 0:d.split("auth/"))||void 0===p?void 0:p[1],Q=x?Ut(x):null;return Q?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:Q,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:_,postBody:null}}return null}(sn,we.url)),d.onEvent(qr||tp())});return function(sn){return Ie.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,x);const Q=_,he=`${v.packageName.toLowerCase()}://`;Vo().handleOpenURL=function(){var Ie=(0,I.Z)(function*(we){if(we.toLowerCase().startsWith(he)&&x({url:we}),"function"==typeof Q)try{Q(we)}catch(sn){console.error(sn)}});return function(we){return Ie.apply(this,arguments)}}()}};function tp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ut("no-auth-event")}}function nd(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function jw(h=(0,z.z$)()){return!("file:"!==nd()&&"ionic:"!==nd()&&"capacitor:"!==nd()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function ey(){try{const h=self.localStorage,c=Aa();if(h)return h.setItem(c,"1"),h.removeItem(c),!function Ua(h=(0,z.z$)()){return function VP(){return(0,z.w1)()&&11===document?.documentMode}()||function LP(h=(0,z.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,z.hl)()}catch{return rp()&&(0,z.hl)()}return!1}function rp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function En(){return(function kP(){return"http:"===nd()||"https:"===nd()}()||(0,z.ru)()||jw())&&!function FP(){return(0,z.b$)()||(0,z.UG)()}()&&ey()&&!rp()}function ty(){return jw()&&typeof document<"u"}function ip(){return(ip=(0,I.Z)(function*(){return!!ty()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=X,uc="persistence";function sp(h){return ny.apply(this,arguments)}function ny(){return(ny=(0,I.Z)(function*(h){yield h._initializationPromise;const c=Hw(),d=Bn(uc,h.config.apiKey,h.name);c&&c.setItem(d,h._getPersistence())})).apply(this,arguments)}function Hw(){var h;try{return(null===(h=function Ti(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const ui=X;class hs{constructor(){this.browserResolver=Xe(G_),this.cordovaResolver=Xe(Va),this.underlyingResolver=null,this._redirectPersistence=Ui,this._completeRedirectFn=Xu,this._overrideRedirectResult=Vf}_initialize(c){var d=this;return(0,I.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,p,_){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,d,p,_)})()}_openRedirect(c,d,p,_){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,d,p,_)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ty()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ui(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const d=yield function ac(){return ip.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Bo(h){return h.unwrap()}function ry(h){return iy(h)}function iy(h){const{_tokenResponse:c}=h instanceof z.ZR?h.customData:h;if(!c)return null;if(!(h instanceof z.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Ma.credentialFromResult(h);const d=c.providerId;if(!d||d===at.PASSWORD)return null;let p;switch(d){case at.GOOGLE:p=vl;break;case at.FACEBOOK:p=$u;break;case at.GITHUB:p=El;break;case at.TWITTER:p=sf;break;default:const{oauthIdToken:_,oauthAccessToken:v,oauthTokenSecret:b,pendingToken:x,nonce:Q}=c;return v||b||_||x?x?d.startsWith("saml.")?jr._create(d,x):Fi._fromParams({providerId:d,signInMethod:d,pendingToken:x,idToken:_,accessToken:v}):new ct(d).credential({idToken:_,accessToken:v,rawNonce:Q}):null}return h instanceof z.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function zr(h,c){return c.catch(d=>{throw d instanceof z.ZR&&function zw(h,c){var d;const p=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new qw(h,function EP(h,c){var d;const p=(0,z.m9)(h),_=c;return X(c.customData.operationType,p,"argument-error"),X(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),f_._fromError(p,_)}(h,c));else if(p){const _=iy(c),v=c;_&&(v.credential=_,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,d),d}).then(d=>{const _=d.user;return{operationType:d.operationType,credential:ry(d),additionalUserInfo:Dr(d),user:Bi.getOrCreate(_)}})}function op(h,c){return ap.apply(this,arguments)}function ap(){return(ap=(0,I.Z)(function*(h,c){const d=yield c;return{verificationId:d.verificationId,confirm:p=>zr(h,d.confirm(p))}})).apply(this,arguments)}class qw{constructor(c,d){this.resolver=d,this.auth=function UP(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return zr(Bo(this.auth),this.resolver.resolveSignIn(c))}}class Bi{constructor(c){this._delegate=c,this.multiFactor=function g_(h){const c=(0,z.m9)(h);return Nl.has(c)||Nl.set(c,p_._fromUser(c)),Nl.get(c)}(c)}static getOrCreate(c){return Bi.USER_MAP.has(c)||Bi.USER_MAP.set(c,new Bi(c)),Bi.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,I.Z)(function*(){return zr(d.auth,Tr(d._delegate,c))})()}linkWithPhoneNumber(c,d){var p=this;return(0,I.Z)(function*(){return op(p.auth,function os(h,c,d){return Ul.apply(this,arguments)}(p._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,I.Z)(function*(){return zr(d.auth,function Ve(h,c,d){return jl.apply(this,arguments)}(d._delegate,c,hs))})()}linkWithRedirect(c){var d=this;return(0,I.Z)(function*(){return yield sp(Gt(d.auth)),us(d._delegate,c,hs)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,I.Z)(function*(){return zr(d.auth,a_(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return op(this.auth,function R_(h,c,d){return Mt.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return zr(this.auth,function x_(h,c,d){return Of.apply(this,arguments)}(this._delegate,c,hs))}reauthenticateWithRedirect(c){var d=this;return(0,I.Z)(function*(){return yield sp(Gt(d.auth)),nr(d._delegate,c,hs)})()}sendEmailVerification(c){return function Ta(h,c){return Ei.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,I.Z)(function*(){return yield function aw(h,c){return si.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function lt(h,c){return Ml((0,z.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function gP(h,c){return Ml((0,z.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Hr(h,c){return xf.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Wu(h,c){return Mo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function Gu(h,c,d){return Rl.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bi.USER_MAP=new WeakMap;const Xs=X;let sy=(()=>{class h{constructor(d,p){if(this.app=d,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_}=d.options;Xs(_,"invalid-api-key",{appName:d.name}),Xs(_,"invalid-api-key",{appName:d.name});const v=typeof window<"u"?hs:void 0;this._delegate=p.initialize({options:{persistence:Gw(_,d.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,p){!function Kh(h,c,d){const p=Gt(h);X(p._canInitEmulator,p,"emulator-config-failed"),X(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,v=Ym(c),{host:b,port:x}=function fl(h){const c=Ym(h),d=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const v=_[1];return{host:v,port:Fu(p.substr(v.length+1))}}{const[v,b]=p.split(":");return{host:v,port:Fu(b)}}}(c);p.config.emulator={url:`${v}//${b}${null===x?"":`:${x}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:b,port:x,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Zh(){function h(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,d,p)}applyActionCode(d){return function uw(h,c){return Wt.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return ge(this._delegate,d)}confirmPasswordReset(d,p){return function Pl(h,c,d){return _f.apply(this,arguments)}(this._delegate,d,p)}createUserWithEmailAndPassword(d,p){var _=this;return(0,I.Z)(function*(){return zr(_._delegate,function qu(h,c,d){return Hn.apply(this,arguments)}(_._delegate,d,p))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function yn(h,c){return Ro.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Ca(h,c){const d=ju.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,I.Z)(function*(){Xs(En(),d._delegate,"operation-not-supported-in-this-environment");const p=yield function bw(h,c){return V_.apply(this,arguments)}(d._delegate,hs);return p?zr(d._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function np(h,c){Gt(h)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,p,_){const{next:v,error:b,complete:x}=ja(d,p,_);return this._delegate.onAuthStateChanged(v,b,x)}onIdTokenChanged(d,p,_){const{next:v,error:b,complete:x}=ja(d,p,_);return this._delegate.onIdTokenChanged(v,b,x)}sendSignInLinkToEmail(d,p){return function _n(h,c,d){return is.apply(this,arguments)}(this._delegate,d,p)}sendPasswordResetEmail(d,p){return function c_(h,c,d){return Sl.apply(this,arguments)}(this._delegate,d,p||void 0)}setPersistence(d){var p=this;return(0,I.Z)(function*(){let _;switch(function cc(h,c){Ba(Object.values(qn).includes(c),h,"invalid-persistence-type"),(0,z.b$)()?Ba(c!==qn.SESSION,h,"unsupported-persistence-type"):(0,z.UG)()?Ba(c===qn.NONE,h,"unsupported-persistence-type"):rp()?Ba(c===qn.NONE||c===qn.LOCAL&&(0,z.hl)(),h,"unsupported-persistence-type"):Ba(c===qn.NONE||ey(),h,"unsupported-persistence-type")}(p._delegate,d),d){case qn.SESSION:_=Ui;break;case qn.LOCAL:_=(yield Xe(Qu)._isAvailable())?Qu:If;break;case qn.NONE:_=nn;break;default:return bt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(_)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return zr(this._delegate,function i_(h){return Cl.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return zr(this._delegate,Al(this._delegate,d))}signInWithCustomToken(d){return zr(this._delegate,function u_(h,c){return ke.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,p){return zr(this._delegate,function wa(h,c,d){return Al((0,z.m9)(h),Ea.credential(c,d)).catch(function(){var p=(0,I.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Gs(h),_});return function(_){return p.apply(this,arguments)}}())}(this._delegate,d,p))}signInWithEmailLink(d,p){return zr(this._delegate,function ze(h,c,d){return Po.apply(this,arguments)}(this._delegate,d,p))}signInWithPhoneNumber(d,p){return op(this._delegate,function Rf(h,c,d){return Mf.apply(this,arguments)}(this._delegate,d,p))}signInWithPopup(d){var p=this;return(0,I.Z)(function*(){return Xs(En(),p._delegate,"operation-not-supported-in-this-environment"),zr(p._delegate,function M_(h,c,d){return Bl.apply(this,arguments)}(p._delegate,d,hs))})()}signInWithRedirect(d){var p=this;return(0,I.Z)(function*(){return Xs(En(),p._delegate,"operation-not-supported-in-this-environment"),yield sp(p._delegate),mt(p._delegate,d,hs)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Kt(h,c){return oi.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=qn,h})();function ja(h,c,d){let p=h;"function"!=typeof h&&({next:p,error:c,complete:d}=h);const _=p;return{next:b=>_(b&&Bi.getOrCreate(b)),error:c,complete:d}}function Gw(h,c){const d=function $w(h,c){const d=Hw();if(!d)return[];const p=Bn(uc,h,c);switch(d.getItem(p)){case qn.NONE:return[nn];case qn.LOCAL:return[Qu,Ui];case qn.SESSION:return[Ui];default:return[]}}(h,c);if(typeof self<"u"&&!d.includes(Qu)&&d.push(Qu),typeof window<"u")for(const p of[If,Ui])d.includes(p)||d.push(p);return d.includes(nn)||d.push(nn),d}class $a{constructor(){this.providerId="phone",this._delegate=new Ma(Bo(Fe.Z.auth()))}static credential(c,d){return Ma.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}$a.PHONE_SIGN_IN_METHOD=Ma.PHONE_SIGN_IN_METHOD,$a.PROVIDER_ID=Ma.PROVIDER_ID;const Ww=X;class oy{constructor(c,d,p=Fe.Z.app()){var _;Ww(null===(_=p.options)||void 0===_?void 0:_.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new S_(p.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rd(h){h.INTERNAL.registerComponent(new dn.wA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new sy(d,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ea,FacebookAuthProvider:$u,GithubAuthProvider:El,GoogleAuthProvider:vl,OAuthProvider:ct,SAMLAuthProvider:zu,PhoneAuthProvider:$a,PhoneMultiFactorGenerator:RP,RecaptchaVerifier:oy,TwitterAuthProvider:sf,Auth:sy,AuthCredential:So,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.2")}(Fe.Z)},861:(ws,Zn,We)=>{function I(z,Le,It,Xt,dn,Qn,at){try{var te=z[Qn](at),ae=te.value}catch(Te){return void It(Te)}te.done?Le(ae):Promise.resolve(ae).then(Xt,dn)}function Fe(z){return function(){var Le=this,It=arguments;return new Promise(function(Xt,dn){var Qn=z.apply(Le,It);function at(ae){I(Qn,Xt,dn,at,te,"next",ae)}function te(ae){I(Qn,Xt,dn,at,te,"throw",ae)}at(void 0)})}}We.d(Zn,{Z:()=>Fe})},582:(ws,Zn,We)=>{function Le(U,$){var j={};for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&$.indexOf(Z)<0&&(j[Z]=U[Z]);if(null!=U&&"function"==typeof Object.getOwnPropertySymbols){var ne=0;for(Z=Object.getOwnPropertySymbols(U);ne<Z.length;ne++)$.indexOf(Z[ne])<0&&Object.prototype.propertyIsEnumerable.call(U,Z[ne])&&(j[Z[ne]]=U[Z[ne]])}return j}function Te(U,$,j,Z){return new(j||(j=Promise))(function(H,_e){function ft(gt){try{Ae(Z.next(gt))}catch(tn){_e(tn)}}function ve(gt){try{Ae(Z.throw(gt))}catch(tn){_e(tn)}}function Ae(gt){gt.done?H(gt.value):function ne(H){return H instanceof j?H:new j(function(_e){_e(H)})}(gt.value).then(ft,ve)}Ae((Z=Z.apply(U,$||[])).next())})}function zt(U){return this instanceof zt?(this.v=U,this):new zt(U)}function bt(U,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Z=j.apply(U,$||[]),H=[];return ne={},_e("next"),_e("throw"),_e("return"),ne[Symbol.asyncIterator]=function(){return this},ne;function _e($t){Z[$t]&&(ne[$t]=function(ur){return new Promise(function(Ln,Ir){H.push([$t,ur,Ln,Ir])>1||ft($t,ur)})})}function ft($t,ur){try{!function ve($t){$t.value instanceof zt?Promise.resolve($t.value.v).then(Ae,gt):tn(H[0][2],$t)}(Z[$t](ur))}catch(Ln){tn(H[0][3],Ln)}}function Ae($t){ft("next",$t)}function gt($t){ft("throw",$t)}function tn($t,ur){$t(ur),H.shift(),H.length&&ft(H[0][0],H[0][1])}}function Fr(U){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=U[Symbol.asyncIterator];return $?$.call(U):(U=function Tt(U){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&U[$],Z=0;if(j)return j.call(U);if(U&&"number"==typeof U.length)return{next:function(){return U&&Z>=U.length&&(U=void 0),{value:U&&U[Z++],done:!U}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(U),j={},Z("next"),Z("throw"),Z("return"),j[Symbol.asyncIterator]=function(){return this},j);function Z(H){j[H]=U[H]&&function(_e){return new Promise(function(ft,ve){!function ne(H,_e,ft,ve){Promise.resolve(ve).then(function(Ae){H({value:Ae,done:ft})},_e)}(ft,ve,(_e=U[H](_e)).done,_e.value)})}}}We.d(Zn,{FC:()=>bt,KL:()=>Fr,_T:()=>Le,mG:()=>Te,qq:()=>zt}),"function"==typeof SuppressedError&&SuppressedError}},ws=>{ws(ws.s=282)}]);